var wg=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);import{T as bg,a as Cg,V as Sg,c as yh,b as Tg,d as Eg,e as Mg,h as Dg,i as kg,r as Og,u as Rg,f as Ig,v as Ca,g as Lg,j as Pg,k as Fg,l as vh,m as Ag,w as jg,n as jt,o as xh,p as Zt,q as $n,R as Yg,s as wh}from"./index-1cddbe14.js";import{s as Sl}from"./index-71108b8b.js";import{t as kt}from"./index-012bf22c.js";import{B as Ng,C as Bg,E as Vg,F as nn,K as Wg,R as Gg,S as zg,a as Ug,T as Xg,b as Hg,c as Zg,d as Kg,e as qg,f as Jg,g as $g,h as Qg,i as em,j as Yt,k as It,l as mt,m as Fe,n as oe,o as tm,p as im,q as nm,r as sm,s as rm,t as $e,u as lt,v as am,w as om,x as bh,y as lm,z as hm,A as cm,D as um,G as dm,H as fm,I as gm,J as mm,L as _m,M as pm,N as ym,O as vm,P as xm,Q as wm,U as bm,V as Cm,W as Sm,X as Tm,Y as Em,Z as Mm,_ as Dm,$ as km,a0 as Om,a1 as Rm,a2 as Im,a3 as Lm,a4 as Qe,a5 as Pm,a6 as Fm,a7 as Am,a8 as jm,a9 as Ym,aa as Nm,ab as Bm,ac as Vm,ad as Wm,ae as Gm,af as zm,ag as Um,ah as Xm,ai as Hm,aj as Zm,ak as ve,al as Tr,am as Km,an as qm,ao as Er,ap as Jm,aq as $m,ar as Qm,as as Be,at as e_,au as Ha,av as yi,aw as Za,ax as t_,ay as Nt,az as i_,aA as n_,aB as s_,aC as r_,aD as a_,aE as o_,aF as l_,aG as h_,aH as c_,aI as u_,aJ as d_,aK as ot,aL as f_,aM as g_,aN as m_,aO as Ch,aP as __,aQ as p_,aR as y_,aS as X,aT as v_,aU as x_,aV as w_,aW as b_,aX as C_,aY as S_,aZ as nr,a_ as T_,a$ as E_,b0 as M_,b1 as D_,b2 as Ue,b3 as k_,b4 as sr,b5 as O_,b6 as R_,b7 as Mr}from"./_plugin-vue_export-helper-27e74e83.js";var bw=wg((Xa,Uc)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const I_=()=>{},L_=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Ng,Comment:Bg,EffectScope:Vg,Fragment:nn,KeepAlive:Wg,ReactiveEffect:Gg,Static:zg,Suspense:Ug,Teleport:Xg,Text:Hg,Transition:bg,TransitionGroup:Cg,VueElement:Sg,assertNumber:Zg,callWithAsyncErrorHandling:Kg,callWithErrorHandling:qg,camelize:Jg,capitalize:$g,cloneVNode:Qg,compatUtils:em,compile:I_,computed:Yt,createApp:yh,createBlock:It,createCommentVNode:mt,createElementBlock:Fe,createElementVNode:oe,createHydrationRenderer:tm,createPropsRestProxy:im,createRenderer:nm,createSSRApp:Tg,createSlots:sm,createStaticVNode:rm,createTextVNode:$e,createVNode:lt,customRef:am,defineAsyncComponent:om,defineComponent:bh,defineCustomElement:Eg,defineEmits:lm,defineExpose:hm,defineProps:cm,defineSSRCustomElement:Mg,get devtools(){return um},effect:dm,effectScope:fm,getCurrentInstance:gm,getCurrentScope:mm,getTransitionRawChildren:_m,guardReactiveProps:pm,h:ym,handleError:vm,hydrate:Dg,initCustomFormatter:xm,initDirectivesForSSR:kg,inject:wm,isMemoSame:bm,isProxy:Cm,isReactive:Sm,isReadonly:Tm,isRef:Em,isRuntimeOnly:Mm,isShallow:Dm,isVNode:km,markRaw:Om,mergeDefaults:Rm,mergeProps:Im,nextTick:Lm,normalizeClass:Qe,normalizeProps:Pm,normalizeStyle:Fm,onActivated:Am,onBeforeMount:jm,onBeforeUnmount:Ym,onBeforeUpdate:Nm,onDeactivated:Bm,onErrorCaptured:Vm,onMounted:Wm,onRenderTracked:Gm,onRenderTriggered:zm,onScopeDispose:Um,onServerPrefetch:Xm,onUnmounted:Hm,onUpdated:Zm,openBlock:ve,popScopeId:Tr,provide:Km,proxyRefs:qm,pushScopeId:Er,queuePostFlushCb:Jm,reactive:$m,readonly:Qm,ref:Be,registerRuntimeCompiler:e_,render:Og,renderList:Ha,renderSlot:yi,resolveComponent:Za,resolveDirective:t_,resolveDynamicComponent:Nt,resolveFilter:i_,resolveTransitionHooks:n_,setBlockTracking:s_,setDevtoolsHook:r_,setTransitionHooks:a_,shallowReactive:o_,shallowReadonly:l_,shallowRef:h_,ssrContextKey:c_,ssrUtils:u_,stop:d_,toDisplayString:ot,toHandlerKey:f_,toHandlers:g_,toRaw:m_,toRef:Ch,toRefs:__,transformVNodeArgs:p_,triggerRef:y_,unref:X,useAttrs:v_,useCssModule:Rg,useCssVars:Ig,useSSRContext:x_,useSlots:w_,useTransitionState:b_,vModelCheckbox:Ca,vModelDynamic:Lg,vModelRadio:Pg,vModelSelect:Fg,vModelText:vh,vShow:Ag,version:C_,warn:S_,watch:nr,watchEffect:T_,watchPostEffect:E_,watchSyncEffect:M_,withAsyncContext:D_,withCtx:Ue,withDefaults:k_,withDirectives:sr,withKeys:jg,withMemo:O_,withModifiers:jt,withScopeId:R_},Symbol.toStringTag,{value:"Module"}));var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function A_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var r=Function.bind.apply(e,s);return new r}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}class j_{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ai=j_,jn={PROPERTYCHANGE:"propertychange"};class Y_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ka=Y_;function N_(n,e,t){let i,s;t=t||on;let r=0,l=n.length,a=!1;for(;r<l;)i=r+(l-r>>1),s=+t(n[i],e),s<0?r=i+1:(l=i,a=!s);return a?r:~r}function on(n,e){return n>e?1:n<e?-1:0}function qa(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;let s;if(t>0){for(s=1;s<i;++s)if(n[s]<e)return s-1}else if(t<0){for(s=1;s<i;++s)if(n[s]<=e)return s}else for(s=1;s<i;++s){if(n[s]==e)return s;if(n[s]<e)return typeof t=="function"?t(e,n[s-1],n[s])>0?s-1:s:n[s-1]-e<e-n[s]?s-1:s}return i-1}function B_(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function bi(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let s=0;s<i;s++)n[n.length]=t[s]}function Gi(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function V_(n,e,t){const i=e||on;return n.every(function(s,r){if(r===0)return!0;const l=i(n[r-1],s);return!(l>0||t&&l===0)})}function Yn(){return!0}function Vn(){return!1}function Nn(){}function W_(n){let e=!1,t,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!Gi(r,i))&&(e=!0,s=this,i=r,t=n.apply(this,arguments)),t}}function ws(n){for(const e in n)delete n[e]}function os(n){let e;for(e in n)return!1;return!e}class G_ extends Ka{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=t?new ai(e):e;r.target||(r.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,a[i]=0),++l[i];let h;for(let u=0,f=s.length;u<f;++u)if("handleEvent"in s[u]?h=s[u].handleEvent(r):h=s[u].call(this,r),h===!1||r.propagationStopped){h=!1;break}if(--l[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,Nn);delete l[i]}return h}disposeInternal(){this.listeners_&&ws(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const s=i.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=Nn,++this.pendingRemovals_[e]):(i.splice(s,1),i.length===0&&delete this.listeners_[e]))}}}const Dr=G_,xe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Oe(n,e,t,i,s){if(i&&i!==n&&(t=t.bind(i)),s){const l=t;t=function(){n.removeEventListener(e,t),l.apply(this,arguments)}}const r={target:n,type:e,listener:t};return n.addEventListener(e,t),r}function or(n,e,t,i){return Oe(n,e,t,i,!0)}function Ze(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),ws(n))}class kr extends Dr{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(xe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Oe(this,e[r],t);return s}return Oe(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=or(this,e[r],t)}else i=or(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)z_(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}kr.prototype.on;kr.prototype.once;kr.prototype.un;function z_(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ze(n[e]);else Ze(n)}const Sh=kr;function Ie(){throw new Error("Unimplemented abstract method.")}let U_=0;function Ae(n){return n.ol_uid||(n.ol_uid=String(++U_))}class Tl extends ai{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class X_ extends Sh{constructor(e){super(),this.on,this.once,this.un,Ae(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Tl(i,e,t)),i=jn.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Tl(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const s=this.values_||(this.values_={});if(i)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],os(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const oi=X_,H_={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class Z_ extends Error{constructor(e){const t=H_[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const Th=Z_,Ot={ADD:"add",REMOVE:"remove"},El={LENGTH:"length"};class Vs extends ai{constructor(e,t,i){super(e),this.element=t,this.index=i}}class K_ extends oi{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(El.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Vs(Ot.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Vs(Ot.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Vs(Ot.REMOVE,s,e)),this.dispatchEvent(new Vs(Ot.ADD,t,e))}updateLength_(){this.set(El.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==t)throw new Th(58)}}const Kt=K_,Vi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",q_=Vi.includes("firefox"),J_=Vi.includes("safari")&&!Vi.includes("chrom");J_&&(Vi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Vi));const $_=Vi.includes("webkit")&&!Vi.includes("edge"),Q_=Vi.includes("macintosh"),Eh=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ja=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ep=typeof Image<"u"&&Image.prototype.decode,Mh=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Te(n,e){if(!n)throw new Th(e)}new Array(6);function ni(){return[1,0,0,1,0,0]}function tp(n,e,t,i,s,r,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=r,n[5]=l,n}function ip(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function gt(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function np(n,e,t){return tp(n,e,0,0,t,0,0)}function Wi(n,e,t,i,s,r,l,a){const h=Math.sin(r),u=Math.cos(r);return n[0]=i*u,n[1]=s*h,n[2]=-i*h,n[3]=s*u,n[4]=l*i*u-a*i*h+e,n[5]=l*s*h+a*s*u+t,n}function $a(n,e){const t=sp(e);Te(t!==0,32);const i=e[0],s=e[1],r=e[2],l=e[3],a=e[4],h=e[5];return n[0]=l/t,n[1]=-s/t,n[2]=-r/t,n[3]=i/t,n[4]=(r*h-l*a)/t,n[5]=-(i*h-s*a)/t,n}function sp(n){return n[0]*n[3]-n[1]*n[2]}let Ml;function Dh(n){const e="matrix("+n.join(", ")+")";if(Ja)return e;const t=Ml||(Ml=document.createElement("div"));return t.style.transform=e,t.style.transform}const ft={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Sa(n){const e=Bt();for(let t=0,i=n.length;t<i;++t)ns(e,n[t]);return e}function Qa(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function kh(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function cn(n,e,t){let i,s;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?s=n[1]-t:n[3]<t?s=t-n[3]:s=0,i*i+s*s}function Or(n,e){return eo(n,e[0],e[1])}function On(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function eo(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Ta(n,e){const t=n[0],i=n[1],s=n[2],r=n[3],l=e[0],a=e[1];let h=ft.UNKNOWN;return l<t?h=h|ft.LEFT:l>s&&(h=h|ft.RIGHT),a<i?h=h|ft.BELOW:a>r&&(h=h|ft.ABOVE),h===ft.UNKNOWN&&(h=ft.INTERSECTING),h}function Bt(){return[1/0,1/0,-1/0,-1/0]}function si(n,e,t,i,s){return s?(s[0]=n,s[1]=e,s[2]=t,s[3]=i,s):[n,e,t,i]}function bs(n){return si(1/0,1/0,-1/0,-1/0,n)}function rp(n,e){const t=n[0],i=n[1];return si(t,i,t,i,e)}function Oh(n,e,t,i,s){const r=bs(s);return Ih(r,n,e,t,i)}function ls(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Rh(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function ns(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Ih(n,e,t,i,s){for(;t<i;t+=s)ap(n,e[t],e[t+1]);return n}function ap(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function to(n,e){let t;return t=e(Rr(n)),t||(t=e(Ir(n)),t)||(t=e(Lr(n)),t)||(t=e(un(n)),t)?t:!1}function Ea(n){let e=0;return io(n)||(e=He(n)*ri(n)),e}function Rr(n){return[n[0],n[1]]}function Ir(n){return[n[2],n[1]]}function ln(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function op(n,e){let t;return e==="bottom-left"?t=Rr(n):e==="bottom-right"?t=Ir(n):e==="top-left"?t=un(n):e==="top-right"?t=Lr(n):Te(!1,13),t}function Ma(n,e,t,i,s){const[r,l,a,h,u,f,_,p]=Da(n,e,t,i);return si(Math.min(r,a,u,_),Math.min(l,h,f,p),Math.max(r,a,u,_),Math.max(l,h,f,p),s)}function Da(n,e,t,i){const s=e*i[0]/2,r=e*i[1]/2,l=Math.cos(t),a=Math.sin(t),h=s*l,u=s*a,f=r*l,_=r*a,p=n[0],x=n[1];return[p-h+_,x-u-f,p-h-_,x-u+f,p+h-_,x+u+f,p+h+_,x+u-f,p-h+_,x-u-f]}function ri(n){return n[3]-n[1]}function ss(n,e,t){const i=t||Bt();return vt(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):bs(i),i}function un(n){return[n[0],n[3]]}function Lr(n){return[n[2],n[3]]}function He(n){return n[2]-n[0]}function vt(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function io(n){return n[2]<n[0]||n[3]<n[1]}function lp(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function hp(n,e,t){let i=!1;const s=Ta(n,e),r=Ta(n,t);if(s===ft.INTERSECTING||r===ft.INTERSECTING)i=!0;else{const l=n[0],a=n[1],h=n[2],u=n[3],f=e[0],_=e[1],p=t[0],x=t[1],w=(x-_)/(p-f);let C,b;r&ft.ABOVE&&!(s&ft.ABOVE)&&(C=p-(x-u)/w,i=C>=l&&C<=h),!i&&r&ft.RIGHT&&!(s&ft.RIGHT)&&(b=x-(p-h)*w,i=b>=a&&b<=u),!i&&r&ft.BELOW&&!(s&ft.BELOW)&&(C=p-(x-a)/w,i=C>=l&&C<=h),!i&&r&ft.LEFT&&!(s&ft.LEFT)&&(b=x-(p-l)*w,i=b>=a&&b<=u)}return i}function Lh(n,e){const t=e.getExtent(),i=ln(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const s=He(t),l=Math.floor((i[0]-t[0])/s)*s;n[0]-=l,n[2]-=l}return n}function cp(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];Lh(n,e);const i=He(t);if(He(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function rt(n,e,t){return Math.min(Math.max(n,e),t)}function up(n,e,t,i,s,r){const l=s-t,a=r-i;if(l!==0||a!==0){const h=((n-t)*l+(e-i)*a)/(l*l+a*a);h>1?(t=s,i=r):h>0&&(t+=l*h,i+=a*h)}return Ci(n,e,t,i)}function Ci(n,e,t,i){const s=t-n,r=i-e;return s*s+r*r}function dp(n){const e=n.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const h=Math.abs(n[a][i]);h>r&&(r=h,s=a)}if(r===0)return null;const l=n[s];n[s]=n[i],n[i]=l;for(let a=i+1;a<e;a++){const h=-n[a][i]/n[i][i];for(let u=i;u<e+1;u++)i==u?n[a][u]=0:n[a][u]+=h*n[i][u]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let s=i-1;s>=0;s--)n[s][e]-=n[s][i]*t[i]}return t}function rr(n){return n*Math.PI/180}function sn(n,e){const t=n%e;return t*e<0?t+e:t}function Lt(n,e,t){return n+t*(e-n)}function Pr(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Ws(n,e){return Math.floor(Pr(n,e))}function Gs(n,e){return Math.ceil(Pr(n,e))}const fp=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,gp=/^([a-z]*)$|^hsla?\(.*\)$/i;function Ph(n){return typeof n=="string"?n:Fh(n)}function mp(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const _p=function(){const e={};let t=0;return function(i){let s;if(e.hasOwnProperty(i))s=e[i];else{if(t>=1024){let r=0;for(const l in e)r++&3||(delete e[l],--t)}s=pp(i),e[i]=s,++t}return s}}();function lr(n){return Array.isArray(n)?n:_p(n)}function pp(n){let e,t,i,s,r;if(gp.exec(n)&&(n=mp(n)),fp.exec(n)){const l=n.length-1;let a;l<=4?a=1:a=2;const h=l===4||l===8;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),h?s=parseInt(n.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,h&&(s=(s<<4)+s)),r=[e,t,i,s/255]}else n.startsWith("rgba(")?(r=n.slice(5,-1).split(",").map(Number),Dl(r)):n.startsWith("rgb(")?(r=n.slice(4,-1).split(",").map(Number),r.push(1),Dl(r)):Te(!1,14);return r}function Dl(n){return n[0]=rt(n[0]+.5|0,0,255),n[1]=rt(n[1]+.5|0,0,255),n[2]=rt(n[2]+.5|0,0,255),n[3]=rt(n[3],0,1),n}function Fh(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const s=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+s+")"}class yp{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const s=kl(e,t,i);return s in this.cache_?this.cache_[s]:null}set(e,t,i,s){const r=kl(e,t,i);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function kl(n,e,t){const i=t?Ph(t):"null";return e+":"+n+":"+i}const hr=new yp,Ve={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class vp extends oi{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ve.OPACITY]=e.opacity!==void 0?e.opacity:1,Te(typeof t[Ve.OPACITY]=="number",64),t[Ve.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ve.Z_INDEX]=e.zIndex,t[Ve.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ve.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ve.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ve.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=rt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ie()}getLayerStatesArray(e){return Ie()}getExtent(){return this.get(Ve.EXTENT)}getMaxResolution(){return this.get(Ve.MAX_RESOLUTION)}getMinResolution(){return this.get(Ve.MIN_RESOLUTION)}getMinZoom(){return this.get(Ve.MIN_ZOOM)}getMaxZoom(){return this.get(Ve.MAX_ZOOM)}getOpacity(){return this.get(Ve.OPACITY)}getSourceState(){return Ie()}getVisible(){return this.get(Ve.VISIBLE)}getZIndex(){return this.get(Ve.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ve.EXTENT,e)}setMaxResolution(e){this.set(Ve.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ve.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ve.MAX_ZOOM,e)}setMinZoom(e){this.set(Ve.MIN_ZOOM,e)}setOpacity(e){Te(typeof e=="number",64),this.set(Ve.OPACITY,e)}setVisible(e){this.set(Ve.VISIBLE,e)}setZIndex(e){this.set(Ve.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Ah=vp,Ni={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},yt={ANIMATING:0,INTERACTING:1},Ut={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},xp=42,no=256,hs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class wp{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||hs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jh=wp,Cs=6378137,Rn=Math.PI*Cs,bp=[-Rn,-Rn,Rn,Rn],Cp=[-180,-85,180,85],zs=Cs*Math.log(Math.tan(Math.PI/2));class pn extends jh{constructor(e){super({code:e,units:"m",extent:bp,global:!0,worldExtent:Cp,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Cs)}})}}const Ol=[new pn("EPSG:3857"),new pn("EPSG:102100"),new pn("EPSG:102113"),new pn("EPSG:900913"),new pn("http://www.opengis.net/def/crs/EPSG/0/3857"),new pn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Sp(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=t){e[s]=Rn*n[s]/180;let r=Cs*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>zs?r=zs:r<-zs&&(r=-zs),e[s+1]=r}return e}function Tp(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=t)e[s]=180*n[s]/Rn,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Cs))/Math.PI-90;return e}const Ep=6378137,Rl=[-180,-90,180,90],Mp=Math.PI*Ep/180;class Zi extends jh{constructor(e,t){super({code:e,units:"degrees",extent:Rl,axisOrientation:t,global:!0,metersPerUnit:Mp,worldExtent:Rl})}}const Il=[new Zi("CRS:84"),new Zi("EPSG:4326","neu"),new Zi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Zi("urn:ogc:def:crs:OGC:2:84"),new Zi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Zi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Zi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ka={};function Dp(n){return ka[n]||ka[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function kp(n,e){ka[n]=e}let Pn={};function cr(n,e,t){const i=n.getCode(),s=e.getCode();i in Pn||(Pn[i]={}),Pn[i][s]=t}function Op(n,e){let t;return n in Pn&&e in Pn[n]&&(t=Pn[n][e]),t}function Rp(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function ur(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function so(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[0]*t-n[1]*i,r=n[1]*t+n[0]*i;return n[0]=s,n[1]=r,n}function Ip(n,e){return n[0]*=e,n[1]*=e,n}function Yh(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function Nh(n,e){return Math.sqrt(Yh(n,e))}function Bh(n,e){if(e.canWrapX()){const t=He(e.getExtent()),i=Lp(n,e,t);i&&(n[0]-=i*t)}return n}function Lp(n,e,t){const i=e.getExtent();let s=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||He(i),s=Math.floor((n[0]-i[0])/t)),s}const Pp=63710088e-1;function Ll(n,e,t){t=t||Pp;const i=rr(n[1]),s=rr(e[1]),r=(s-i)/2,l=rr(e[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Vh={info:1,warn:2,error:3,none:4};let Fp=Vh.info;function Wh(...n){Fp>Vh.warn||console.warn(...n)}let Oa=!0;function Gh(n){Oa=!(n===void 0?!0:n)}function ro(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function zh(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function Ap(n){kp(n.getCode(),n),cr(n,n,ro)}function jp(n){n.forEach(Ap)}function qt(n){return typeof n=="string"?Dp(n):n||null}function Pl(n,e,t,i){n=qt(n);let s;const r=n.getPointResolutionFunc();if(r){if(s=r(e,t),i&&i!==n.getUnits()){const l=n.getMetersPerUnit();l&&(s=s*l/hs[i])}}else{const l=n.getUnits();if(l=="degrees"&&!i||i=="degrees")s=e;else{const a=oo(n,qt("EPSG:4326"));if(a===zh&&l!=="degrees")s=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const f=Ll(u.slice(0,2),u.slice(2,4)),_=Ll(u.slice(4,6),u.slice(6,8));s=(f+_)/2}const h=i?hs[i]:n.getMetersPerUnit();h!==void 0&&(s/=h)}}return s}function Fl(n){jp(n),n.forEach(function(e){n.forEach(function(t){e!==t&&cr(e,t,ro)})})}function Yp(n,e,t,i){n.forEach(function(s){e.forEach(function(r){cr(s,r,t),cr(r,s,i)})})}function ao(n,e){if(n){if(typeof n=="string")return qt(n)}else return qt(e);return n}function yn(n,e){return Gh(),lo(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Np(n,e){const t=lo(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=sn(i+180,360)-180),t}function Cn(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||oo(n,e)===ro)&&t}function oo(n,e){const t=n.getCode(),i=e.getCode();let s=Op(t,i);return s||(s=zh),s}function dr(n,e){const t=qt(n),i=qt(e);return oo(t,i)}function lo(n,e,t){return dr(e,t)(n,void 0,n.length)}function Ra(n,e){return n}function Ht(n,e){return Oa&&!ur(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Oa=!1,Wh("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Uh(n,e){return n}function Ji(n,e){return n}function Bp(){Fl(Ol),Fl(Il),Yp(Il,Ol,Sp,Tp)}Bp();function Al(n,e,t){return function(i,s,r,l,a){if(!i)return;if(!s&&!e)return i;const h=e?0:r[0]*s,u=e?0:r[1]*s,f=a?a[0]:0,_=a?a[1]:0;let p=n[0]+h/2+f,x=n[2]-h/2+f,w=n[1]+u/2+_,C=n[3]-u/2+_;p>x&&(p=(x+p)/2,x=p),w>C&&(w=(C+w)/2,C=w);let b=rt(i[0],p,x),E=rt(i[1],w,C);if(l&&t&&s){const M=30*s;b+=-M*Math.log(1+Math.max(0,p-i[0])/M)+M*Math.log(1+Math.max(0,i[0]-x)/M),E+=-M*Math.log(1+Math.max(0,w-i[1])/M)+M*Math.log(1+Math.max(0,i[1]-C)/M)}return[b,E]}}function Vp(n){return n}function ho(n,e,t,i){const s=He(e)/t[0],r=ri(e)/t[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function co(n,e,t){let i=Math.min(n,e);const s=50;return i*=Math.log(1+s*Math.max(0,n/e-1))/s+1,t&&(i=Math.max(i,t),i/=Math.log(1+s*Math.max(0,t/n-1))/s+1),rt(i,t/2,e*2)}function Wp(n,e,t,i){return e=e!==void 0?e:!0,function(s,r,l,a){if(s!==void 0){const h=n[0],u=n[n.length-1],f=t?ho(h,t,l,i):h;if(a)return e?co(s,f,u):rt(s,u,f);const _=Math.min(f,s),p=Math.floor(qa(n,_,r));return n[p]>f&&p<n.length-1?n[p+1]:n[p]}}}function Gp(n,e,t,i,s,r){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(l,a,h,u){if(l!==void 0){const f=s?ho(e,s,h,r):e;if(u)return i?co(l,f,t):rt(l,t,f);const _=1e-9,p=Math.ceil(Math.log(e/f)/Math.log(n)-_),x=-a*(.5-_)+.5,w=Math.min(f,l),C=Math.floor(Math.log(e/w)/Math.log(n)+x),b=Math.max(p,C),E=e/Math.pow(n,b);return rt(E,t,f)}}}function jl(n,e,t,i,s){return t=t!==void 0?t:!0,function(r,l,a,h){if(r!==void 0){const u=i?ho(n,i,a,s):n;return!t||!h?rt(r,e,u):co(r,u,e)}}}function uo(n){if(n!==void 0)return 0}function Yl(n){if(n!==void 0)return n}function zp(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Up(n){return n=n||rr(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function Xh(n){return Math.pow(n,3)}function Wn(n){return 1-Xh(1-n)}function Xp(n){return 3*n*n-2*n*n*n}function Hp(n){return n}function rn(n,e,t,i,s,r){r=r||[];let l=0;for(let a=e;a<t;a+=i){const h=n[a],u=n[a+1];r[l++]=s[0]*h+s[2]*u+s[4],r[l++]=s[1]*h+s[3]*u+s[5]}return r&&r.length!=l&&(r.length=l),r}function fo(n,e,t,i,s,r,l){l=l||[];const a=Math.cos(s),h=Math.sin(s),u=r[0],f=r[1];let _=0;for(let p=e;p<t;p+=i){const x=n[p]-u,w=n[p+1]-f;l[_++]=u+x*a-w*h,l[_++]=f+x*h+w*a;for(let C=p+2;C<p+i;++C)l[_++]=n[C]}return l&&l.length!=_&&(l.length=_),l}function Zp(n,e,t,i,s,r,l,a){a=a||[];const h=l[0],u=l[1];let f=0;for(let _=e;_<t;_+=i){const p=n[_]-h,x=n[_+1]-u;a[f++]=h+s*p,a[f++]=u+r*x;for(let w=_+2;w<_+i;++w)a[f++]=n[w]}return a&&a.length!=f&&(a.length=f),a}function Hh(n,e,t,i,s,r,l){l=l||[];let a=0;for(let h=e;h<t;h+=i){l[a++]=n[h]+s,l[a++]=n[h+1]+r;for(let u=h+2;u<h+i;++u)l[a++]=n[u]}return l&&l.length!=a&&(l.length=a),l}const Nl=ni();class Kp extends oi{constructor(){super(),this.extent_=Bt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=W_(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ie()}closestPointXY(e,t,i,s){return Ie()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ie()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&bs(t),this.extentRevision_=this.getRevision()}return lp(this.extent_,e)}rotate(e,t){Ie()}scale(e,t,i){Ie()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ie()}getType(){return Ie()}applyTransform(e){Ie()}intersectsExtent(e){return Ie()}translate(e,t){Ie()}transform(e,t){const i=qt(e),s=i.getUnits()=="tile-pixels"?function(r,l,a){const h=i.getExtent(),u=i.getWorldExtent(),f=ri(u)/ri(h);return Wi(Nl,u[0],u[3],f,-f,0,0,0),rn(r,0,r.length,a,Nl,l),dr(i,t)(r,l,a)}:dr(i,t);return this.applyTransform(s),this}}const Zh=Kp;class qp extends Zh{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Oh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ie()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=fr(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ie()}setLayout(e,t,i){let s;if(e)s=fr(e);else{for(let r=0;r<i;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=Jp(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();fo(i,0,i.length,s,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=ln(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Zp(s,0,s.length,r,e,t,i,s),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Hh(i,0,i.length,s,e,t,i),this.changed()}}}function Jp(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function fr(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function $p(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return rn(i,0,i.length,s,e,t)}const zi=qp;function Bl(n,e,t,i,s,r,l){const a=n[e],h=n[e+1],u=n[t]-a,f=n[t+1]-h;let _;if(u===0&&f===0)_=e;else{const p=((s-a)*u+(r-h)*f)/(u*u+f*f);if(p>1)_=t;else if(p>0){for(let x=0;x<i;++x)l[x]=Lt(n[e+x],n[t+x],p);l.length=i;return}else _=e}for(let p=0;p<i;++p)l[p]=n[_+p];l.length=i}function go(n,e,t,i,s){let r=n[e],l=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],h=n[e+1],u=Ci(r,l,a,h);u>s&&(s=u),r=a,l=h}return s}function mo(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r){const a=t[r];s=go(n,e,a,i,s),e=a}return s}function Qp(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r){const a=t[r];s=mo(n,e,a,i,s),e=a[a.length-1]}return s}function _o(n,e,t,i,s,r,l,a,h,u,f){if(e==t)return u;let _,p;if(s===0){if(p=Ci(l,a,n[e],n[e+1]),p<u){for(_=0;_<i;++_)h[_]=n[e+_];return h.length=i,p}return u}f=f||[NaN,NaN];let x=e+i;for(;x<t;)if(Bl(n,x-i,x,i,l,a,f),p=Ci(l,a,f[0],f[1]),p<u){for(u=p,_=0;_<i;++_)h[_]=f[_];h.length=i,x+=i}else x+=i*Math.max((Math.sqrt(p)-Math.sqrt(u))/s|0,1);if(r&&(Bl(n,t-i,e,i,l,a,f),p=Ci(l,a,f[0],f[1]),p<u)){for(u=p,_=0;_<i;++_)h[_]=f[_];h.length=i}return u}function po(n,e,t,i,s,r,l,a,h,u,f){f=f||[NaN,NaN];for(let _=0,p=t.length;_<p;++_){const x=t[_];u=_o(n,e,x,i,s,r,l,a,h,u,f),e=x}return u}function ey(n,e,t,i,s,r,l,a,h,u,f){f=f||[NaN,NaN];for(let _=0,p=t.length;_<p;++_){const x=t[_];u=po(n,e,x,i,s,r,l,a,h,u,f),e=x[x.length-1]}return u}function Kh(n,e,t,i){for(let s=0,r=t.length;s<r;++s)n[e++]=t[s];return e}function Fr(n,e,t,i){for(let s=0,r=t.length;s<r;++s){const l=t[s];for(let a=0;a<i;++a)n[e++]=l[a]}return e}function yo(n,e,t,i,s){s=s||[];let r=0;for(let l=0,a=t.length;l<a;++l){const h=Fr(n,e,t[l],i);s[r++]=h,e=h}return s.length=r,s}function ty(n,e,t,i,s){s=s||[];let r=0;for(let l=0,a=t.length;l<a;++l){const h=yo(n,e,t[l],i,s[r]);h.length===0&&(h[0]=e),s[r++]=h,e=h[h.length-1]}return s.length=r,s}function vo(n,e,t,i,s,r,l){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)r[l++]=n[e],r[l++]=n[e+1];return l}const h=new Array(a);h[0]=1,h[a-1]=1;const u=[e,t-i];let f=0;for(;u.length>0;){const _=u.pop(),p=u.pop();let x=0;const w=n[p],C=n[p+1],b=n[_],E=n[_+1];for(let M=p+i;M<_;M+=i){const k=n[M],P=n[M+1],F=up(k,P,w,C,b,E);F>x&&(f=M,x=F)}x>s&&(h[(f-e)/i]=1,p+i<f&&u.push(p,f),f+i<_&&u.push(f,_))}for(let _=0;_<a;++_)h[_]&&(r[l++]=n[e+_*i],r[l++]=n[e+_*i+1]);return l}function iy(n,e,t,i,s,r,l,a){for(let h=0,u=t.length;h<u;++h){const f=t[h];l=vo(n,e,f,i,s,r,l),a.push(l),e=f}return l}function qi(n,e){return e*Math.round(n/e)}function ny(n,e,t,i,s,r,l){if(e==t)return l;let a=qi(n[e],s),h=qi(n[e+1],s);e+=i,r[l++]=a,r[l++]=h;let u,f;do if(u=qi(n[e],s),f=qi(n[e+1],s),e+=i,e==t)return r[l++]=u,r[l++]=f,l;while(u==a&&f==h);for(;e<t;){const _=qi(n[e],s),p=qi(n[e+1],s);if(e+=i,_==u&&p==f)continue;const x=u-a,w=f-h,C=_-a,b=p-h;if(x*b==w*C&&(x<0&&C<x||x==C||x>0&&C>x)&&(w<0&&b<w||w==b||w>0&&b>w)){u=_,f=p;continue}r[l++]=u,r[l++]=f,a=u,h=f,u=_,f=p}return r[l++]=u,r[l++]=f,l}function qh(n,e,t,i,s,r,l,a){for(let h=0,u=t.length;h<u;++h){const f=t[h];l=ny(n,e,f,i,s,r,l),a.push(l),e=f}return l}function sy(n,e,t,i,s,r,l,a){for(let h=0,u=t.length;h<u;++h){const f=t[h],_=[];l=qh(n,e,f,i,s,r,l,_),a.push(_),e=f[f.length-1]}return l}function Ai(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let l=e;l<t;l+=i)s[r++]=n.slice(l,l+i);return s.length=r,s}function cs(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let l=0,a=t.length;l<a;++l){const h=t[l];s[r++]=Ai(n,e,h,i,s[r]),e=h}return s.length=r,s}function Ia(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let l=0,a=t.length;l<a;++l){const h=t[l];s[r++]=h.length===1&&h[0]===e?[]:cs(n,e,h,i,s[r]),e=h[h.length-1]}return s.length=r,s}function Jh(n,e,t,i){let s=0,r=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const a=n[e],h=n[e+1];s+=l*a-r*h,r=a,l=h}return s/2}function $h(n,e,t,i){let s=0;for(let r=0,l=t.length;r<l;++r){const a=t[r];s+=Jh(n,e,a,i),e=a}return s}function ry(n,e,t,i){let s=0;for(let r=0,l=t.length;r<l;++r){const a=t[r];s+=$h(n,e,a,i),e=a[a.length-1]}return s}class gr extends zi{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new gr(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,s){return s<cn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(go(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,s))}getArea(){return Jh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new gr(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fr(this.flatCoordinates,0,e,this.stride),this.changed()}}const Vl=gr;class xo extends zi{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new xo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const r=this.flatCoordinates,l=Ci(e,t,r[0],r[1]);if(l<s){const a=this.stride;for(let h=0;h<a;++h)i[h]=r[h];return i.length=a,l}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return rp(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return eo(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Kh(this.flatCoordinates,0,e,this.stride),this.changed()}}const Bi=xo;function ay(n,e,t,i,s){return!to(s,function(l){return!$i(n,e,t,i,l[0],l[1])})}function $i(n,e,t,i,s,r){let l=0,a=n[t-i],h=n[t-i+1];for(;e<t;e+=i){const u=n[e],f=n[e+1];h<=r?f>r&&(u-a)*(r-h)-(s-a)*(f-h)>0&&l++:f<=r&&(u-a)*(r-h)-(s-a)*(f-h)<0&&l--,a=u,h=f}return l!==0}function wo(n,e,t,i,s,r){if(t.length===0||!$i(n,e,t[0],i,s,r))return!1;for(let l=1,a=t.length;l<a;++l)if($i(n,t[l-1],t[l],i,s,r))return!1;return!0}function oy(n,e,t,i,s,r){if(t.length===0)return!1;for(let l=0,a=t.length;l<a;++l){const h=t[l];if(wo(n,e,h,i,s,r))return!0;e=h[h.length-1]}return!1}function Qh(n,e,t,i,s,r,l){let a,h,u,f,_,p,x;const w=s[r+1],C=[];for(let M=0,k=t.length;M<k;++M){const P=t[M];for(f=n[P-i],p=n[P-i+1],a=e;a<P;a+=i)_=n[a],x=n[a+1],(w<=p&&x<=w||p<=w&&w<=x)&&(u=(w-p)/(x-p)*(_-f)+f,C.push(u)),f=_,p=x}let b=NaN,E=-1/0;for(C.sort(on),f=C[0],a=1,h=C.length;a<h;++a){_=C[a];const M=Math.abs(_-f);M>E&&(u=(f+_)/2,wo(n,e,t,i,u,w)&&(b=u,E=M)),f=_}return isNaN(b)&&(b=s[r]),l?(l.push(b,w,E),l):[b,w,E]}function ly(n,e,t,i,s){let r=[];for(let l=0,a=t.length;l<a;++l){const h=t[l];r=Qh(n,e,h,i,s,2*l,r),e=h[h.length-1]}return r}function ec(n,e,t,i,s){let r;for(e+=i;e<t;e+=i)if(r=s(n.slice(e-i,e),n.slice(e,e+i)),r)return r;return!1}function Ar(n,e,t,i,s){const r=Ih(Bt(),n,e,t,i);return vt(s,r)?On(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:ec(n,e,t,i,function(l,a){return hp(s,l,a)}):!1}function hy(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r){if(Ar(n,e,t[r],i,s))return!0;e=t[r]}return!1}function tc(n,e,t,i,s){return!!(Ar(n,e,t,i,s)||$i(n,e,t,i,s[0],s[1])||$i(n,e,t,i,s[0],s[3])||$i(n,e,t,i,s[2],s[1])||$i(n,e,t,i,s[2],s[3]))}function ic(n,e,t,i,s){if(!tc(n,e,t[0],i,s))return!1;if(t.length===1)return!0;for(let r=1,l=t.length;r<l;++r)if(ay(n,t[r-1],t[r],i,s)&&!Ar(n,t[r-1],t[r],i,s))return!1;return!0}function cy(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r){const a=t[r];if(ic(n,e,a,i,s))return!0;e=a[a.length-1]}return!1}function uy(n,e,t,i){for(;e<t-i;){for(let s=0;s<i;++s){const r=n[e+s];n[e+s]=n[t-i+s],n[t-i+s]=r}e+=i,t-=i}}function nc(n,e,t,i){let s=0,r=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const a=n[e],h=n[e+1];s+=(a-r)*(h+l),r=a,l=h}return s===0?void 0:s>0}function sc(n,e,t,i,s){s=s!==void 0?s:!1;for(let r=0,l=t.length;r<l;++r){const a=t[r],h=nc(n,e,a,i);if(r===0){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;e=a}return!0}function dy(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r){const a=t[r];if(!sc(n,e,a,i,s))return!1;a.length&&(e=a[a.length-1])}return!0}function La(n,e,t,i,s){s=s!==void 0?s:!1;for(let r=0,l=t.length;r<l;++r){const a=t[r],h=nc(n,e,a,i);(r===0?s&&h||!s&&!h:s&&!h||!s&&h)&&uy(n,e,a,i),e=a}return e}function Wl(n,e,t,i,s){for(let r=0,l=t.length;r<l;++r)e=La(n,e,t[r],i,s);return e}class us extends zi{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?bi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new us(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<cn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),po(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return wo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return $h(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),La(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,cs(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ln(this.getExtent());this.flatInteriorPoint_=Qh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Bi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Vl(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let l=0,a=i.length;l<a;++l){const h=i[l],u=new Vl(t.slice(r,h),e);s.push(u),r=h}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sc(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=La(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=qh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new us(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return ic(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=yo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const ds=us;function Gl(n){const e=n[0],t=n[1],i=n[2],s=n[3],r=[e,t,e,s,i,s,i,t,e,t];return new us(r,"XY",[r.length])}const aa=0;class fy extends oi{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ao(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Gh(),e.center&&(e.center=Ht(e.center,this.projection_)),e.extent&&(e.extent=Ji(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Ut)delete t[a];this.setProperties(t,!0);const i=my(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=gy(e),r=i.constraint,l=_y(e);this.constraints_={center:s,resolution:r,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),l=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([i[0]+l,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=Ht(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Ht(s.anchor,this.getProjection())),t[i]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const f=arguments[s];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(s===t){i&&Us(i,!0);return}let r=Date.now(),l=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const u=[];for(;s<t;++s){const f=arguments[s],_={start:r,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||Xp,callback:i};if(f.center&&(_.sourceCenter=l,_.targetCenter=f.center.slice(),l=_.targetCenter),f.zoom!==void 0?(_.sourceResolution=a,_.targetResolution=this.getResolutionForZoom(f.zoom),a=_.targetResolution):f.resolution&&(_.sourceResolution=a,_.targetResolution=f.resolution,a=_.targetResolution),f.rotation!==void 0){_.sourceRotation=h;const p=sn(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=h+p,h=_.targetRotation}py(_)?_.complete=!0:r+=_.duration,u.push(_)}this.animations_.push(u),this.setHint(yt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[yt.ANIMATING]>0}getInteracting(){return this.hints_[yt.INTERACTING]>0}cancelAnimations(){this.setHint(yt.ANIMATING,-this.hints_[yt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const s=this.animations_[t];if(s[0].callback&&Us(s[0].callback,!1),!e)for(let r=0,l=s.length;r<l;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let l=0,a=s.length;l<a;++l){const h=s[l];if(h.complete)continue;const u=e-h.start;let f=h.duration>0?u/h.duration:1;f>=1?(h.complete=!0,f=1):r=!1;const _=h.easing(f);if(h.sourceCenter){const p=h.sourceCenter[0],x=h.sourceCenter[1],w=h.targetCenter[0],C=h.targetCenter[1];this.nextCenter_=h.targetCenter;const b=p+_*(w-p),E=x+_*(C-x);this.targetCenter_=[b,E]}if(h.sourceResolution&&h.targetResolution){const p=_===1?h.targetResolution:h.sourceResolution+_*(h.targetResolution-h.sourceResolution);if(h.anchor){const x=this.getViewportSize_(this.getRotation()),w=this.constraints_.resolution(p,0,x,!0);this.targetCenter_=this.calculateCenterZoom(w,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const p=_===1?sn(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+_*(h.targetRotation-h.sourceRotation);if(h.anchor){const x=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(x,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(r){this.animations_[i]=null,this.setHint(yt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=s[0].callback;l&&Us(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-t[0],s[1]-t[1]],so(i,e-this.getRotation()),Rp(i,t)),i}calculateCenterZoom(e,t){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const l=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;i=[l,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],s=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Ra(e,this.getProjection())}getCenterInternal(){return this.get(Ut.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Uh(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Te(t,1);const i=this.getResolution();Te(i!==void 0,2);const s=this.getRotation();return Te(s!==void 0,3),Ma(t,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ut.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ji(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=He(e)/t[0],s=ri(e)/t[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(t/i)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(Ut.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/t;return function(l){return Math.log(i/l)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const l=this.getViewportSizeMinusPadding_();s=oa(s,this.getViewportSize_(),[l[0]/2+r[3],l[1]/2+r[0]],t,i)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,s;if(this.resolutions_){const r=qa(this.resolutions_,e,1);t=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=rt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,rt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Te(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){Te(!io(e),25);const s=Ji(e,this.getProjection());i=Gl(s)}else if(e.getType()==="Circle"){const s=Ji(e.getExtent(),this.getProjection());i=Gl(s),i.rotate(this.getRotation(),ln(s))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),l=e.getStride();let a=1/0,h=1/0,u=-1/0,f=-1/0;for(let _=0,p=r.length;_<p;_+=l){const x=r[_]*i-r[_+1]*s,w=r[_]*s+r[_+1]*i;a=Math.min(a,x),h=Math.min(h,w),u=Math.max(u,x),f=Math.max(f,w)}return[a,h,u,f]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const a=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);h=isNaN(h)?l:Math.max(h,l),h=this.getConstrainedResolution(h,r?0:1);const u=this.getRotation(),f=Math.sin(u),_=Math.cos(u),p=ln(a);p[0]+=(s[1]-s[3])/2*h,p[1]+=(s[0]-s[2])/2*h;const x=p[0]*_-p[1]*f,w=p[1]*_+p[0]*f,C=this.getConstrainedCenter([x,w],h),b=t.callback?t.callback:Nn;t.duration!==void 0?this.animateInternal({resolution:h,center:C,duration:t.duration,easing:t.easing},b):(this.targetResolution_=h,this.targetCenter_=C,this.applyTargetState_(!1,!0),Us(b,!0))}centerOn(e,t,i){this.centerOnInternal(Ht(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(oa(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,s){let r;const l=this.padding_;if(l&&e){const a=this.getViewportSizeMinusPadding_(-i),h=oa(e,s,[a[0]/2+l[3],a[1]/2+l[0]],t,i);r=[e[0]-h[0],e[1]-h[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Ra(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ht(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ht(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ht(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,l,r,i,this.calculateCenterShift(this.targetCenter_,l,s,r));this.get(Ut.ROTATION)!==s&&this.set(Ut.ROTATION,s),this.get(Ut.RESOLUTION)!==l&&(this.set(Ut.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ut.CENTER)||!ur(this.get(Ut.CENTER),a))&&this.set(Ut.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,l),h=this.constraints_.center(this.targetCenter_,a,l,!1,this.calculateCenterShift(this.targetCenter_,a,r,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!ur(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:e,easing:Wn,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(yt.INTERACTING,1)}endInteraction(e,t,i){i=i&&Ht(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(yt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Us(n,e){setTimeout(function(){n(e)},0)}function gy(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Al(n.extent,n.constrainOnlyCenter,t)}const e=ao(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Al(t,!1,!1)}return Vp}function my(n){let e,t,i,l=n.minZoom!==void 0?n.minZoom:aa,a=n.maxZoom!==void 0?n.maxZoom:28;const h=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,_=n.showFullExtent!==void 0?n.showFullExtent:!1,p=ao(n.projection,"EPSG:3857"),x=p.getExtent();let w=n.constrainOnlyCenter,C=n.extent;if(!u&&!C&&p.isGlobal()&&(w=!1,C=x),n.resolutions!==void 0){const b=n.resolutions;t=b[l],i=b[a]!==void 0?b[a]:b[b.length-1],n.constrainResolution?e=Wp(b,f,!w&&C,_):e=jl(t,i,f,!w&&C,_)}else{const E=(x?Math.max(He(x),ri(x)):360*hs.degrees/p.getMetersPerUnit())/no/Math.pow(2,aa),M=E/Math.pow(2,28-aa);t=n.maxResolution,t!==void 0?l=0:t=E/Math.pow(h,l),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(h,a):i=E/Math.pow(h,a):i=M),a=l+Math.floor(Math.log(t/i)/Math.log(h)),i=t/Math.pow(h,a-l),n.constrainResolution?e=Gp(h,t,i,f,!w&&C,_):e=jl(t,i,f,!w&&C,_)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:l,zoomFactor:h}}function _y(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Up():t===!1?Yl:typeof t=="number"?zp(t):Yl}return uo}function py(n){return!(n.sourceCenter&&n.targetCenter&&!ur(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function oa(n,e,t,i,s){const r=Math.cos(-s);let l=Math.sin(-s),a=n[0]*r-n[1]*l,h=n[1]*r+n[0]*l;a+=(e[0]/2-t[0])*i,h+=(t[1]-e[1]/2)*i,l=-l;const u=a*r-h*l,f=h*r+a*l;return[u,f]}const ei=fy;class yy extends Ah{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ve.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ve.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ze(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Oe(e,xe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;e instanceof ei?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e;const i=this.getExtent();return this.getVisible()&&bo(this.getLayerState(),t.viewState)&&(!i||vt(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const s=e instanceof ei?e.getViewStateAndExtent():e;let r=t(s);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Ve.MAP,e)}getMapInternal(){return this.get(Ve.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ze(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ze(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Oe(e,Ni.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);Te(!s.some(function(l){return l.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=Oe(this,xe.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Ve.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function bo(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const jr=yy;class vy extends Ka{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ie()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Wi(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),$a(s,i)}forEachFeatureAtCoordinate(e,t,i,s,r,l,a,h){let u;const f=t.viewState;function _(P,F,A,j){return r.call(l,F,P?A:null,j)}const p=f.projection,x=Bh(e.slice(),p),w=[[0,0]];if(p.canWrapX()&&s){const P=p.getExtent(),F=He(P);w.push([-F,0],[F,0])}const C=t.layerStatesArray,b=C.length,E=[],M=[];for(let P=0;P<w.length;P++)for(let F=b-1;F>=0;--F){const A=C[F],j=A.layer;if(j.hasRenderer()&&bo(A,f)&&a.call(h,j)){const V=j.getRenderer(),H=j.getSource();if(V&&H){const z=H.getWrapX()?x:e,se=_.bind(null,A.managed);M[0]=z[0]+w[P][0],M[1]=z[1]+w[P][1],u=V.forEachFeatureAtCoordinate(M,t,i,se,E)}if(u)return u}}if(E.length===0)return;const k=1/E.length;return E.forEach((P,F)=>P.distanceSq+=F*k),E.sort((P,F)=>P.distanceSq-F.distanceSq),E.some(P=>u=P.callback(P.feature,P.layer,P.geometry)),u}hasFeatureAtCoordinate(e,t,i,s,r,l){return this.forEachFeatureAtCoordinate(e,t,i,s,Yn,this,r,l)!==void 0}getMap(){return this.map_}renderFrame(e){Ie()}scheduleExpireIconCache(e){hr.canExpireCache()&&e.postRenderFunctions.push(xy)}}function xy(n,e){hr.expire()}const wy=vy;class by extends ai{constructor(e,t,i,s){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=s}}const rc=by,Xs="ol-hidden",Yr="ol-unselectable",Co="ol-control",zl="ol-collapsed",Cy=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Ul=["style","variant","weight","size","lineHeight","family"],ac=function(n){const e=n.match(Cy);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=Ul.length;i<s;++i){const r=e[i+1];r!==void 0&&(t[Ul[i]]=r)}return t.families=t.family.split(/,\s?/),t};function Tt(n,e,t,i){let s;return t&&t.length?s=t.shift():Ja?s=new OffscreenCanvas(n||300,e||300):s=document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("2d",i)}function Nr(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Xl(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Pa(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Sy(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Ty(n,e){const t=n.childNodes;for(let i=0;;++i){const s=t[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}}const oc="10px sans-serif",Si="#000",mr="round",fs=[],gs=0,Bn="round",ms=10,_s="#000",ps="center",_r="middle",Qi=[0,0,0,0],ys=1,vi=new oi;let Sn=null,Fa;const Aa={},Ey=function(){const e="32px ",t=["monospace","serif"],i=t.length,s="wmytzilWMYTZIL@#/&?$%10";let r,l;function a(u,f,_){let p=!0;for(let x=0;x<i;++x){const w=t[x];if(l=pr(u+" "+f+" "+e+w,s),_!=w){const C=pr(u+" "+f+" "+e+_+","+w,s);p=p&&C!=l}}return!!p}function h(){let u=!0;const f=vi.getKeys();for(let _=0,p=f.length;_<p;++_){const x=f[_];vi.get(x)<100&&(a.apply(this,x.split(`
`))?(ws(Aa),Sn=null,Fa=void 0,vi.set(x,100)):(vi.set(x,vi.get(x)+1,!0),u=!1))}u&&(clearInterval(r),r=void 0)}return function(u){const f=ac(u);if(!f)return;const _=f.families;for(let p=0,x=_.length;p<x;++p){const w=_[p],C=f.style+`
`+f.weight+`
`+w;vi.get(C)===void 0&&(vi.set(C,100,!0),a(f.style,f.weight,w)||(vi.set(C,0,!0),r===void 0&&(r=setInterval(h,32))))}}}(),My=function(){let n;return function(e){let t=Aa[e];if(t==null){if(Ja){const i=ac(e),s=lc(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Aa[e]=t}return t}}();function lc(n,e){return Sn||(Sn=Tt(1,1)),n!=Fa&&(Sn.font=n,Fa=Sn.font),Sn.measureText(e)}function pr(n,e){return lc(n,e).width}function Hl(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((s,r)=>Math.max(s,pr(n,r)),0);return t[e]=i,i}function Dy(n,e){const t=[],i=[],s=[];let r=0,l=0,a=0,h=0;for(let u=0,f=e.length;u<=f;u+=2){const _=e[u];if(_===`
`||u===f){r=Math.max(r,l),s.push(l),l=0,a+=h;continue}const p=e[u+1]||n.font,x=pr(p,_);t.push(x),l+=x;const w=My(p);i.push(w),h=Math.max(h,w)}return{width:r,height:a,widths:t,heights:i,lineWidths:s}}function ky(n,e,t,i,s,r,l,a,h,u,f){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(h,u),n.scale(f[0],f[1]),Oy(i,n)):f[0]<0||f[1]<0?(n.translate(h,u),n.scale(f[0],f[1]),n.drawImage(i,s,r,l,a,0,0,l,a)):n.drawImage(i,s,r,l,a,h,u,l*f[0],a*f[1]),n.restore()}function Oy(n,e){const t=n.contextInstructions;for(let i=0,s=t.length;i<s;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Ry extends wy{constructor(e){super(e),this.fontChangeListenerKey_=Oe(vi,jn.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Yr+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new rc(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){Ze(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ni.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(l,a){return l.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const s=[];let r=null;for(let l=0,a=t.length;l<a;++l){const h=t[l];e.layerIndex=l;const u=h.layer,f=u.getSourceState();if(!bo(h,i)||f!="ready"&&f!="undefined"){u.unrender();continue}const _=u.render(e,r);_&&(_!==r&&(this.children_.push(_),r=_),"getDeclutter"in u&&s.push(u))}for(let l=s.length-1;l>=0;--l)s[l].renderDeclutter(e);Ty(this.element_,this.children_),this.dispatchRenderEvent(Ni.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}const Iy=Ry;class Fi extends ai{constructor(e,t){super(e),this.layer=t}}const la={LAYERS:"layers"};class So extends Ah{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(la.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Kt(i.slice(),{unique:!0}):Te(typeof i.getArray=="function",43):i=new Kt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ze),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Oe(e,Ot.ADD,this.handleLayersAdd_,this),Oe(e,Ot.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ze);ws(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const r=t[i];this.registerLayerListeners_(r),this.dispatchEvent(new Fi("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[Oe(e,jn.PROPERTYCHANGE,this.handleLayerChange_,this),Oe(e,xe.CHANGE,this.handleLayerChange_,this)];e instanceof So&&t.push(Oe(e,"addlayer",this.handleLayerGroupAdd_,this),Oe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ae(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Fi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Fi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Fi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ae(t);this.listenerKeys_[i].forEach(Ze),delete this.listenerKeys_[i],this.dispatchEvent(new Fi("removelayer",t)),this.changed()}getLayers(){return this.get(la.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new Fi("removelayer",i[s]))}this.set(la.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let l=i,a=t.length;l<a;l++){const h=t[l];h.opacity*=s.opacity,h.visible=h.visible&&s.visible,h.maxResolution=Math.min(h.maxResolution,s.maxResolution),h.minResolution=Math.max(h.minResolution,s.minResolution),h.minZoom=Math.max(h.minZoom,s.minZoom),h.maxZoom=Math.min(h.maxZoom,s.maxZoom),s.extent!==void 0&&(h.extent!==void 0?h.extent=ss(h.extent,s.extent):h.extent=s.extent),h.zIndex===void 0&&(h.zIndex=r)}return t}getSourceState(){return"ready"}}const Br=So;class Ly extends ai{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}const Tn=Ly;class Py extends Tn{constructor(e,t,i,s,r,l){super(e,t,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const xi=Py,Ye={SINGLECLICK:"singleclick",CLICK:xe.CLICK,DBLCLICK:xe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ja={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Fy extends Dr{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Oe(i,ja.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Oe(i,ja.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_,Mh?{passive:!1}:!1)}emulateClick_(e){let t=new xi(Ye.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new xi(Ye.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new xi(Ye.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ye.POINTERUP||t.type==Ye.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Ye.POINTERDOWN||t.type==Ye.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new xi(Ye.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new xi(Ye.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Oe(i,Ye.POINTERMOVE,this.handlePointerMove_,this),Oe(i,Ye.POINTERUP,this.handlePointerUp_,this),Oe(this.element_,Ye.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Oe(this.element_.getRootNode(),Ye.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new xi(Ye.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new xi(Ye.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ze(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(xe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ze(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ze),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Ay=Fy,Pi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},pt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},yr=1/0;class jy{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ws(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){Te(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=yr?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,r=t[e],l=i[e],a=e;for(;e<s>>1;){const h=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),f=u<s&&i[u]<i[h]?u:h;t[e]=t[f],i[e]=i[f],e=f}t[e]=r,i[e]=l,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,r=i[t],l=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>l)i[t]=i[a],s[t]=s[a],t=a;else break}i[t]=r,s[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const r=t.length;let l,a,h;for(a=0;a<r;++a)l=t[a],h=e(l),h==yr?delete this.queuedElements_[this.keyFunction_(l)]:(i[s]=h,t[s++]=l);t.length=s,i.length=s,this.heapify_()}}const Yy=jy,ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ny extends Yy{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(xe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ce.LOADED||i===ce.ERROR||i===ce.EMPTY){i!==ce.ERROR&&t.removeEventListener(xe.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,s,r,l;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)r=this.dequeue()[0],l=r.getKey(),s=r.getState(),s===ce.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,r.load())}}const By=Ny;function Vy(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return yr;const r=n.viewState.center,l=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(l*l+a*a)/s}class Wy extends oi{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Pa(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Pa(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Ze(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Nn&&this.listenerKeys.push(Oe(e,Pi.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const To=Wy;class Gy extends To{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"›",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=l):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Yr+" "+Co+(this.collapsed_&&this.collapsible_?" "+zl:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Gi(t,this.renderedAttributions_)){Sy(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const l=document.createElement("li");l.innerHTML=t[s],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(zl),this.collapsed_?Xl(this.collapseLabel_,this.label_):Xl(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const zy=Gy;class Uy extends To{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=r,l.appendChild(this.label_),l.addEventListener(xe.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Yr+" "+Co,h=this.element;h.className=a,h.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Xs)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Wn}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Xs);!r&&i===0?this.element.classList.add(Xs):r&&i!==0&&this.element.classList.remove(Xs)}this.label_.style.transform=s}this.rotation_=i}}const Xy=Uy;class Hy extends To{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=h,f.appendChild(typeof l=="string"?document.createTextNode(l):l),f.addEventListener(xe.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=r,_.setAttribute("type","button"),_.title=u,_.appendChild(typeof a=="string"?document.createTextNode(a):a),_.addEventListener(xe.CLICK,this.handleClick_.bind(this,-i),!1);const p=t+" "+Yr+" "+Co,x=this.element;x.className=p,x.appendChild(f),x.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Wn})):i.setZoom(r)}}}const Zy=Hy;function Ky(n){n=n||{};const e=new Kt;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Zy(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Xy(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new zy(n.attributionOptions)),e}const Ya={ACTIVE:"active"};class qy extends oi{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ya.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Ya.ACTIVE,e)}setMap(e){this.map_=e}}function Jy(n,e,t){const i=n.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Hp,center:n.getConstrainedCenter(s)})}}function Eo(n,e,t,i){const s=n.getZoom();if(s===void 0)return;const r=n.getConstrainedZoom(s+e),l=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:i!==void 0?i:250,easing:Wn})}const Ss=qy;class $y extends Ss{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ye.DBLCLICK){const i=e.originalEvent,s=e.map,r=e.coordinate,l=i.shiftKey?-this.delta_:this.delta_,a=s.getView();Eo(a,l,r,this.duration_),i.preventDefault(),t=!0}return!t}}const Qy=$y;class e0 extends Ss{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ye.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ye.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ye.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ye.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Mo(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return{clientX:t/e,clientY:i/e}}const Gn=e0;function Na(n){const e=arguments;return function(t){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](t),!!i);++s);return i}}const t0=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},i0=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},hc=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?i0(n):!0},Ba=Yn,cc=function(n){const e=n.originalEvent;return e.button==0&&!($_&&Q_&&e.ctrlKey)},n0=Vn,Do=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},uc=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},dc=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},ha=function(n){const e=n.originalEvent;return Te(e!==void 0,56),e.pointerType=="mouse"},s0=function(n){const e=n.originalEvent;return Te(e!==void 0,56),e.isPrimary&&e.button===0};class r0 extends Gn{constructor(e){super({stopDown:Vn}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Na(Do,s0);this.condition_=e.onFocusOnly?Na(hc,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,s=t.getEventPixel(Mo(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();Ip(r,a.getResolution()),so(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),l=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(l),h=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(h),duration:500,easing:Wn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const a0=r0;class o0 extends Gn{constructor(e){e=e||{},super({stopDown:Vn}),this.condition_=e.condition?e.condition:t0,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!ha(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===uo)return;const s=t.getSize(),r=e.pixel,l=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=l-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=l}handleUpEvent(e){return ha(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return ha(e)&&cc(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const l0=o0;class h0 extends Ka{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ds([s])}getGeometry(){return this.geometry_}}const c0=h0,Hs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ca extends ai{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class u0 extends Gn{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new c0(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:cc,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],r=i[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ca(Hs.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ca(t?Hs.BOXEND:Hs.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ca(Hs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}const d0=u0;class f0 extends d0{constructor(e){e=e||{};const t=e.condition?e.condition:uc;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),l=i.getResolutionForExtentInternal(r),a=i.getResolution()/l;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Wn})}}const g0=f0,Ki={LEFT:37,UP:38,RIGHT:39,DOWN:40};class m0 extends Ss{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Do(t)&&dc(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN){const i=e.originalEvent,s=i.keyCode;if(this.condition_(e)&&(s==Ki.DOWN||s==Ki.LEFT||s==Ki.RIGHT||s==Ki.UP)){const l=e.map.getView(),a=l.getResolution()*this.pixelDelta_;let h=0,u=0;s==Ki.DOWN?u=-a:s==Ki.LEFT?h=-a:s==Ki.RIGHT?h=a:u=a;const f=[h,u];so(f,l.getRotation()),Jy(l,f,this.duration_),i.preventDefault(),t=!0}}return!t}}const _0=m0;class p0 extends Ss{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:dc,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==xe.KEYDOWN||e.type==xe.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,l=s==="+"?this.delta_:-this.delta_,a=r.getView();Eo(a,l,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const y0=p0;class v0{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[i],l=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(l,r),this.initialVelocity_=Math.sqrt(r*r+l*l)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const x0=v0;class w0 extends Ss{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Ba;this.condition_=e.onFocusOnly?Na(hc,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==xe.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==xe.WHEEL&&(r=s.deltaY,q_&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Eh),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=r;const h=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-rt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Eo(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const b0=w0;class C0 extends Gn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Vn),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const h=r-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=r;const l=e.map,a=l.getView();a.getConstraints().rotation!==uo&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Mo(this.targetPointers))),this.rotating_&&(l.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const S0=C0;class T0 extends Gn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Vn),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,l=i.clientY-s.clientY,a=Math.sqrt(r*r+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const h=e.map,u=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(Mo(this.targetPointers))),h.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const E0=T0;function M0(n){n=n||{};const e=new Kt,t=new x0(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new l0),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new Qy({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new a0({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new S0),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new E0({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new _0),e.push(new y0({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new b0({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new g0({duration:n.zoomDuration})),e}function Zl(n){return n[0]>0&&n[1]>0}function D0(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Pt(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function fc(n){if(n instanceof jr){n.setMapInternal(null);return}n instanceof Br&&n.getLayers().forEach(fc)}function gc(n,e){if(n instanceof jr){n.setMapInternal(e);return}if(n instanceof Br){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)gc(t[i],e)}}class k0 extends oi{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=O0(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Eh,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ni(),this.pixelToCoordinateTransform_=ni(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Ky(),this.interactions=t.interactions||M0({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new By(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(pt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(pt.VIEW,this.handleViewChanged_),this.addChangeListener(pt.SIZE,this.handleSizeChanged_),this.addChangeListener(pt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof ei)&&e.view.then(function(s){i.setView(new ei(s))}),this.controls.addEventListener(Ot.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Ot.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Ot.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Ot.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Ot.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Ot.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){gc(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:Yn,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,l,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(s){s instanceof Br?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Yn,r=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,l,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],l=i.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/r,(a.clientY-i.top)/l]}getTarget(){return this.get(pt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Ra(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?gt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(pt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Kt){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const l=s.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ht(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?gt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(pt.SIZE)}getView(){return this.get(pt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return Vy(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){t=t||e.type;const i=new xi(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===ja.POINTERDOWN||i===xe.WHEEL||i===xe.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,l=t.target;if(this.overlayContainerStopEvent_.contains(l)||!(r===s?s.documentElement:r).contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const l=s[r];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const l=e.viewHints;if(l[yt.ANIMATING]||l[yt.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Ni.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ni.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Tn(Pi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Tn(Pi.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Ze(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(xe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Pa(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Iy(this)),this.mapBrowserEventHandler_=new Ay(this,this.moveTolerance_);for(const r in Ye)this.mapBrowserEventHandler_.addEventListener(Ye[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(xe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(xe.WHEEL,this.boundHandleBrowserEvent_,Mh?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Oe(i,xe.KEYDOWN,this.handleBrowserEvent,this),Oe(i,xe.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ze(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ze(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Oe(e,jn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Oe(e,xe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ze),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Fi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Oe(e,jn.PROPERTYCHANGE,this.render,this),Oe(e,xe.CHANGE,this.render,this),Oe(e,"addlayer",this.handleLayerAdd_,this),Oe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){fc(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&Zl(t)&&i&&i.isDef()){const l=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ma(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:l,wantedTiles:{},mapId:Ae(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const h=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=Ma(a.nextCenter,a.nextResolution,h,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!io(this.previousExtent_)&&!ls(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Tn(Pi.MOVESTART,this,s)),this.previousExtent_=bs(this.previousExtent_)),this.previousExtent_&&!r.viewHints[yt.ANIMATING]&&!r.viewHints[yt.INTERACTING]&&!ls(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Tn(Pi.MOVEEND,this,r)),kh(r.extent,this.previousExtent_))),this.dispatchEvent(new Tn(Pi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Pi.LOADSTART)||this.hasListener(Pi.LOADEND)||this.hasListener(Ni.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Fi("removelayer",t)),this.set(pt.LAYERGROUP,e)}setSize(e){this.set(pt.SIZE,e)}setTarget(e){this.set(pt.TARGET,e)}setView(e){if(!e||e instanceof ei){this.set(pt.VIEW,e);return}this.set(pt.VIEW,new ei);const t=this;e.then(function(i){t.setView(new ei(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),l=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(l)&&(t=[r,l],!Zl(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Wh("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Gi(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}}function O0(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Br({layers:n.layers});t[pt.LAYERGROUP]=i,t[pt.TARGET]=n.target,t[pt.VIEW]=n.view instanceof ei?n.view:new ei;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new Kt(n.controls.slice()):(Te(typeof n.controls.getArray=="function",47),s=n.controls));let r;n.interactions!==void 0&&(Array.isArray(n.interactions)?r=new Kt(n.interactions.slice()):(Te(typeof n.interactions.getArray=="function",48),r=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new Kt(n.overlays.slice()):(Te(typeof n.overlays.getArray=="function",49),l=n.overlays):l=new Kt,{controls:s,interactions:r,keyboardEventTarget:e,overlays:l,values:t}}const R0=k0,Zs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class I0 extends jr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Zs.PRELOAD)}setPreload(e){this.set(Zs.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Zs.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Zs.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const L0=I0,ct={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class P0 extends Sh{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Ie()}getData(e){return null}prepareFrame(e){return Ie()}renderFrame(e,t){return Ie()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(s,r)=>{const l=this.loadedTileCallback.bind(this,i,s);return e.forEachLoadedTile(t,s,r,l)}}forEachFeatureAtCoordinate(e,t,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===ct.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ct.LOADED&&t!=ct.ERROR&&e.addEventListener(xe.CHANGE,this.boundHandleImageChange_),t==ct.IDLE&&(e.load(),t=e.getState()),t==ct.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const F0=P0,Kl=[];let En=null;function A0(){En=Tt(1,1,void 0,{willReadFrequently:!0})}class j0 extends F0{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ni(),this.pixelTransform=ni(),this.inversePixelTransform=ni(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){En||A0(),En.clearRect(0,0,1,1);let s;try{En.drawImage(e,t,i,1,1,0,0,1,1),s=En.getImageData(0,0,1,1).data}catch{return En=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const s=this.getLayer().getClassName();let r,l;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&Gi(lr(e.style.backgroundColor),lr(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(l=a.getContext("2d"))}if(l&&l.canvas.style.transform===t?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",l=Tt();const h=l.canvas;r.appendChild(h),a=h.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=l}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const s=un(i),r=Lr(i),l=Ir(i),a=Rr(i);gt(t.coordinateToPixelTransform,s),gt(t.coordinateToPixelTransform,r),gt(t.coordinateToPixelTransform,l),gt(t.coordinateToPixelTransform,a);const h=this.inversePixelTransform;gt(h,s),gt(h,r),gt(h,l),gt(h,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){const r=new rc(e,this.inversePixelTransform,i,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(Ni.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Ni.POSTRENDER,e,t)}getRenderTransform(e,t,i,s,r,l,a){const h=r/2,u=l/2,f=s/t,_=-f,p=-e[0]+a,x=-e[1];return Wi(this.tempTransform,h,u,f,_,-i,p,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const mc=j0;class Y0 extends Dr{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(xe.CHANGE)}release(){this.state===ce.ERROR&&this.setState(ce.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==ce.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==ce.LOADED){e.interimTile=null;break}else e.getState()==ce.LOADING?t=e:e.getState()==ce.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ce.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ie()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=t-i+1e3/60;return s>=this.transition_?1:Xh(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const _c=Y0;function pc(n,e,t){const i=n;let s=!0,r=!1,l=!1;const a=[or(i,xe.LOAD,function(){l=!0,r||e()})];return i.src&&ep?(r=!0,i.decode().then(function(){s&&e()}).catch(function(h){s&&(l?e():t())})):a.push(or(i,xe.ERROR,t)),function(){s=!1,a.forEach(Ze)}}class N0 extends _c{constructor(e,t,i,s,r,l){super(e,t,l),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ce.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ce.ERROR,this.unlistenImage_(),this.image_=B0(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ce.LOADED:this.state=ce.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ce.ERROR&&(this.state=ce.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ce.IDLE&&(this.state=ce.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=pc(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function B0(){const n=Tt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const yc=N0,V0=.5,W0=10,ql=.25;class G0{constructor(e,t,i,s,r,l){this.sourceProj_=e,this.targetProj_=t;let a={};const h=dr(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const k=M[0]+"/"+M[1];return a[k]||(a[k]=h(M)),a[k]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&He(s)==He(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?He(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?He(this.targetProj_.getExtent()):null;const u=un(i),f=Lr(i),_=Ir(i),p=Rr(i),x=this.transformInv_(u),w=this.transformInv_(f),C=this.transformInv_(_),b=this.transformInv_(p),E=W0+(l?Math.max(0,Math.ceil(Math.log2(Ea(i)/(l*l*256*256)))):0);if(this.addQuad_(u,f,_,p,x,w,C,b,E),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(k,P,F){M=Math.min(M,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-M>this.sourceWorldWidth_/2){const P=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];P[0][0]-M>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-M>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-M>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);const F=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-F<this.sourceWorldWidth_/2&&(k.source=P)}})}a={}}addTriangle_(e,t,i,s,r,l){this.triangles_.push({source:[s,r,l],target:[e,t,i]})}addQuad_(e,t,i,s,r,l,a,h,u){const f=Sa([r,l,a,h]),_=this.sourceWorldWidth_?He(f)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&_>.5&&_<1;let w=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=Sa([e,t,i,s]);w=He(b)/this.targetWorldWidth_>ql||w}!x&&this.sourceProj_.isGlobal()&&_&&(w=_>ql||w)}if(!w&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!vt(f,this.maxSourceExtent_))return;let C=0;if(!w&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1]))){if(u>0)w=!0;else if(C=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),C!=1&&C!=2&&C!=4&&C!=8)return}if(u>0){if(!w){const b=[(e[0]+i[0])/2,(e[1]+i[1])/2],E=this.transformInv_(b);let M;x?M=(sn(r[0],p)+sn(a[0],p))/2-sn(E[0],p):M=(r[0]+a[0])/2-E[0];const k=(r[1]+a[1])/2-E[1];w=M*M+k*k>this.errorThresholdSquared_}if(w){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const b=[(t[0]+i[0])/2,(t[1]+i[1])/2],E=this.transformInv_(b),M=[(s[0]+e[0])/2,(s[1]+e[1])/2],k=this.transformInv_(M);this.addQuad_(e,t,b,M,r,l,E,k,u-1),this.addQuad_(M,b,i,s,k,E,a,h,u-1)}else{const b=[(e[0]+t[0])/2,(e[1]+t[1])/2],E=this.transformInv_(b),M=[(i[0]+s[0])/2,(i[1]+s[1])/2],k=this.transformInv_(M);this.addQuad_(e,b,M,s,r,E,k,h,u-1),this.addQuad_(b,t,i,M,E,l,a,k,u-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}C&11||this.addTriangle_(e,i,s,r,a,h),C&14||this.addTriangle_(e,i,t,r,a,l),C&&(C&13||this.addTriangle_(t,s,e,l,h,r),C&7||this.addTriangle_(t,s,i,l,h,a))}calculateSourceExtent(){const e=Bt();return this.triangles_.forEach(function(t,i,s){const r=t.source;ns(e,r[0]),ns(e,r[1]),ns(e,r[2])}),e}getTriangles(){return this.triangles_}}const z0=G0;let ua;const Fn=[];function Jl(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function da(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function U0(){if(ua===void 0){const n=Tt(6,6,Fn);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Jl(n,4,5,4,0),Jl(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;ua=da(e,0)||da(e,4)||da(e,8),Nr(n),Fn.push(n.canvas)}return ua}function $l(n,e,t,i){const s=lo(t,e,n);let r=Pl(e,i,t);const l=e.getMetersPerUnit();l!==void 0&&(r*=l);const a=n.getMetersPerUnit();a!==void 0&&(r/=a);const h=n.getExtent();if(!h||Or(h,s)){const u=Pl(n,r,s)/r;isFinite(u)&&u>0&&(r/=u)}return r}function X0(n,e,t,i){const s=ln(t);let r=$l(n,e,s,i);return(!isFinite(r)||r<=0)&&to(t,function(l){return r=$l(n,e,l,i),isFinite(r)&&r>0}),r}function H0(n,e,t,i,s,r,l,a,h,u,f,_){const p=Tt(Math.round(t*n),Math.round(t*e),Fn);if(_||(p.imageSmoothingEnabled=!1),h.length===0)return p.canvas;p.scale(t,t);function x(P){return Math.round(P*t)/t}p.globalCompositeOperation="lighter";const w=Bt();h.forEach(function(P,F,A){Rh(w,P.extent)});const C=He(w),b=ri(w),E=Tt(Math.round(t*C/i),Math.round(t*b/i),Fn);_||(E.imageSmoothingEnabled=!1);const M=t/i;h.forEach(function(P,F,A){const j=P.extent[0]-w[0],V=-(P.extent[3]-w[3]),H=He(P.extent),z=ri(P.extent);P.image.width>0&&P.image.height>0&&E.drawImage(P.image,u,u,P.image.width-2*u,P.image.height-2*u,j*M,V*M,H*M,z*M)});const k=un(l);return a.getTriangles().forEach(function(P,F,A){const j=P.source,V=P.target;let H=j[0][0],z=j[0][1],se=j[1][0],ne=j[1][1],re=j[2][0],Ce=j[2][1];const te=x((V[0][0]-k[0])/r),ie=x(-(V[0][1]-k[1])/r),$=x((V[1][0]-k[0])/r),ue=x(-(V[1][1]-k[1])/r),Se=x((V[2][0]-k[0])/r),me=x(-(V[2][1]-k[1])/r),Le=H,U=z;H=0,z=0,se-=Le,ne-=U,re-=Le,Ce-=U;const ae=[[se,ne,0,0,$-te],[re,Ce,0,0,Se-te],[0,0,se,ne,ue-ie],[0,0,re,Ce,me-ie]],pe=dp(ae);if(pe){if(p.save(),p.beginPath(),U0()||!_){p.moveTo($,ue);const Z=4,et=te-$,Ke=ie-ue;for(let Pe=0;Pe<Z;Pe++)p.lineTo($+x((Pe+1)*et/Z),ue+x(Pe*Ke/(Z-1))),Pe!=Z-1&&p.lineTo($+x((Pe+1)*et/Z),ue+x((Pe+1)*Ke/(Z-1)));p.lineTo(Se,me)}else p.moveTo($,ue),p.lineTo(te,ie),p.lineTo(Se,me);p.clip(),p.transform(pe[0],pe[2],pe[1],pe[3],te,ie),p.translate(w[0]-Le,w[3]-U),p.scale(i/t,-i/t),p.drawImage(E.canvas,0,0),p.restore()}}),Nr(E),Fn.push(E.canvas),f&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(P,F,A){const j=P.target,V=(j[0][0]-k[0])/r,H=-(j[0][1]-k[1])/r,z=(j[1][0]-k[0])/r,se=-(j[1][1]-k[1])/r,ne=(j[2][0]-k[0])/r,re=-(j[2][1]-k[1])/r;p.beginPath(),p.moveTo(z,se),p.lineTo(V,H),p.lineTo(ne,re),p.closePath(),p.stroke()}),p.restore()),p.canvas}class Z0 extends _c{constructor(e,t,i,s,r,l,a,h,u,f,_,p){super(r,ce.IDLE,{interpolate:!!p}),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=l||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const x=s.getTileCoordExtent(this.wrappedTileCoord_),w=this.targetTileGrid_.getExtent();let C=this.sourceTileGrid_.getExtent();const b=w?ss(x,w):x;if(Ea(b)===0){this.state=ce.EMPTY;return}const E=e.getExtent();E&&(C?C=ss(C,E):C=E);const M=s.getResolution(this.wrappedTileCoord_[0]),k=X0(e,i,b,M);if(!isFinite(k)||k<=0){this.state=ce.EMPTY;return}const P=f!==void 0?f:V0;if(this.triangulation_=new z0(e,i,b,C,k*P,M),this.triangulation_.getTriangles().length===0){this.state=ce.EMPTY;return}this.sourceZ_=t.getZForResolution(k);let F=this.triangulation_.calculateSourceExtent();if(C&&(e.canWrapX()?(F[1]=rt(F[1],C[1],C[3]),F[3]=rt(F[3],C[1],C[3])):F=ss(F,C)),!Ea(F))this.state=ce.EMPTY;else{const A=t.getTileRangeForExtentAndZ(F,this.sourceZ_);for(let j=A.minX;j<=A.maxX;j++)for(let V=A.minY;V<=A.maxY;V++){const H=u(this.sourceZ_,j,V,a);H&&this.sourceTiles_.push(H)}this.sourceTiles_.length===0&&(this.state=ce.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==ce.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=ce.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],l=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=H0(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),l,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ce.LOADED}this.changed()}load(){if(this.state==ce.IDLE){this.state=ce.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==ce.IDLE||i==ce.LOADING){e++;const s=Oe(t,xe.CHANGE,function(r){const l=t.getState();(l==ce.LOADED||l==ce.ERROR||l==ce.EMPTY)&&(Ze(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,s){t.getState()==ce.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ze),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Nr(this.canvas_.getContext("2d")),Fn.push(this.canvas_),this.canvas_=null),super.release()}}const Va=Z0;class vc{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function vn(n,e,t,i,s){return s!==void 0?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new vc(n,e,t,i)}const xc=vc;class K0 extends mc{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Bt(),this.tmpTileRange_=new xc(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),s=t.getUseInterimTilesOnError();return i==ce.LOADED||i==ce.EMPTY||i==ce.ERROR&&!s}getTile(e,t,i,s){const r=s.pixelRatio,l=s.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,i,r,l);return u.getState()==ce.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=gt(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!Or(r,s))return null;const l=t.pixelRatio,a=t.viewState.projection,h=t.viewState,u=i.getRenderSource(),f=u.getTileGridForProjection(h.projection),_=u.getTilePixelRatio(t.pixelRatio);for(let p=f.getZForResolution(h.resolution);p>=f.getMinZoom();--p){const x=f.getTileCoordForCoordAndZ(s,p),w=u.getTile(p,x[1],x[2],l,a);if(!(w instanceof yc||w instanceof Va)||w instanceof Va&&w.getState()===ce.EMPTY)return null;if(w.getState()!==ce.LOADED)continue;const C=f.getOrigin(p),b=Pt(f.getTileSize(p)),E=f.getResolution(p),M=Math.floor(_*((s[0]-C[0])/E-x[1]*b[0])),k=Math.floor(_*((C[1]-s[1])/E-x[2]*b[1])),P=Math.round(_*u.getGutterForProjection(h.projection));return this.getImageData(w.getImage(),M+P,k+P)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,l=s.resolution,a=s.center,h=s.rotation,u=e.pixelRatio,f=this.getLayer(),_=f.getSource(),p=_.getRevision(),x=_.getTileGridForProjection(r),w=x.getZForResolution(l,_.zDirection),C=x.getResolution(w);let b=e.extent;const E=e.viewState.resolution,M=_.getTilePixelRatio(u),k=Math.round(He(b)/E*u),P=Math.round(ri(b)/E*u),F=i.extent&&Ji(i.extent);F&&(b=ss(b,Ji(i.extent)));const A=C*k/2/M,j=C*P/2/M,V=[a[0]-A,a[1]-j,a[0]+A,a[1]+j],H=x.getTileRangeForExtentAndZ(b,w),z={};z[w]={};const se=this.createLoadedTileFinder(_,r,z),ne=this.tmpExtent,re=this.tmpTileRange_;this.newTiles_=!1;const Ce=h?Da(s.center,E,h,e.size):void 0;for(let ae=H.minX;ae<=H.maxX;++ae)for(let pe=H.minY;pe<=H.maxY;++pe){if(h&&!x.tileCoordIntersectsViewport([w,ae,pe],Ce))continue;const Z=this.getTile(w,ae,pe,e);if(this.isDrawableTile(Z)){const Pe=Ae(this);if(Z.getState()==ce.LOADED){z[w][Z.tileCoord.toString()]=Z;let O=Z.inTransition(Pe);O&&i.opacity!==1&&(Z.endTransition(Pe),O=!1),!this.newTiles_&&(O||!this.renderedTiles.includes(Z))&&(this.newTiles_=!0)}if(Z.getAlpha(Pe,e.time)===1)continue}const et=x.getTileCoordChildTileRange(Z.tileCoord,re,ne);let Ke=!1;et&&(Ke=se(w+1,et)),Ke||x.forEachTileCoordParentTileRange(Z.tileCoord,se,re,ne)}const te=C/l*u/M;Wi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,h,-k/2,-P/2);const ie=Dh(this.pixelTransform);this.useContainer(t,ie,this.getBackground(e));const $=this.context,ue=$.canvas;$a(this.inversePixelTransform,this.pixelTransform),Wi(this.tempTransform,k/2,P/2,te,te,0,-k/2,-P/2),ue.width!=k||ue.height!=P?(ue.width=k,ue.height=P):this.containerReused||$.clearRect(0,0,k,P),F&&this.clipUnrotated($,e,F),_.getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e),this.renderedTiles.length=0;let Se=Object.keys(z).map(Number);Se.sort(on);let me,Le,U;i.opacity===1&&(!this.containerReused||_.getOpaque(e.viewState.projection))?Se=Se.reverse():(me=[],Le=[]);for(let ae=Se.length-1;ae>=0;--ae){const pe=Se[ae],Z=_.getTilePixelSize(pe,u,r),Ke=x.getResolution(pe)/C,Pe=Z[0]*Ke*te,O=Z[1]*Ke*te,R=x.getTileCoordForCoordAndZ(un(V),pe),N=x.getTileCoordExtent(R),W=gt(this.tempTransform,[M*(N[0]-V[0])/C,M*(V[3]-N[3])/C]),Q=M*_.getGutterForProjection(r),K=z[pe];for(const de in K){const Ee=K[de],ze=Ee.tileCoord,Vt=R[1]-ze[1],Jt=Math.round(W[0]-(Vt-1)*Pe),xt=R[2]-ze[2],tt=Math.round(W[1]-(xt-1)*O),Ne=Math.round(W[0]-Vt*Pe),ut=Math.round(W[1]-xt*O),_t=Jt-Ne,We=tt-ut,Wt=w===pe,Et=Wt&&Ee.getAlpha(Ae(this),e.time)!==1;let qe=!1;if(!Et)if(me){U=[Ne,ut,Ne+_t,ut,Ne+_t,ut+We,Ne,ut+We];for(let ye=0,Rt=me.length;ye<Rt;++ye)if(w!==pe&&pe<Le[ye]){const it=me[ye];vt([Ne,ut,Ne+_t,ut+We],[it[0],it[3],it[4],it[7]])&&(qe||($.save(),qe=!0),$.beginPath(),$.moveTo(U[0],U[1]),$.lineTo(U[2],U[3]),$.lineTo(U[4],U[5]),$.lineTo(U[6],U[7]),$.moveTo(it[6],it[7]),$.lineTo(it[4],it[5]),$.lineTo(it[2],it[3]),$.lineTo(it[0],it[1]),$.clip())}me.push(U),Le.push(pe)}else $.clearRect(Ne,ut,_t,We);this.drawTileImage(Ee,e,Ne,ut,_t,We,Q,Wt),me&&!Et?(qe&&$.restore(),this.renderedTiles.unshift(Ee)):this.renderedTiles.push(Ee),this.updateUsedTiles(e.usedTiles,_,Ee)}}return this.renderedRevision=p,this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!ls(this.renderedExtent_,V),this.renderedExtent_=V,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(e,_,x,u,r,b,w,f.getPreload()),this.scheduleExpireCache(e,_),this.postRender($,e),i.extent&&$.restore(),$.imageSmoothingEnabled=!0,ie!==ue.style.transform&&(ue.style.transform=ie),this.container}drawTileImage(e,t,i,s,r,l,a,h){const u=this.getTileImage(e);if(!u)return;const f=Ae(this),_=t.layerStatesArray[t.layerIndex],p=_.opacity*(h?e.getAlpha(f,t.time):1),x=p!==this.context.globalAlpha;x&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,s,r,l),x&&this.context.restore(),p!==_.opacity?t.animate=!0:h&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(s,r,l){const a=Ae(s);a in l.usedTiles&&s.expireCache(l.viewState.projection,l.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const s=Ae(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,t,i,s,r,l,a,h,u){const f=Ae(t);f in e.wantedTiles||(e.wantedTiles[f]={});const _=e.wantedTiles[f],p=e.tileQueue,x=i.getMinZoom(),w=e.viewState.rotation,C=w?Da(e.viewState.center,e.viewState.resolution,w,e.size):void 0;let b=0,E,M,k,P,F,A;for(A=x;A<=a;++A)for(M=i.getTileRangeForExtentAndZ(l,A,M),k=i.getResolution(A),P=M.minX;P<=M.maxX;++P)for(F=M.minY;F<=M.maxY;++F)w&&!i.tileCoordIntersectsViewport([A,P,F],C)||(a-A<=h?(++b,E=t.getTile(A,P,F,s,r),E.getState()==ce.IDLE&&(_[E.getKey()]=!0,p.isKeyQueued(E.getKey())||p.enqueue([E,f,i.getTileCoordCenter(E.tileCoord),k])),u!==void 0&&u(E)):t.useTile(A,P,F,r));t.updateCacheSize(b,r)}}const q0=K0;class J0 extends L0{constructor(e){super(e)}createRenderer(){return new q0(this)}}const $0=J0;class Q0{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Te(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Te(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Te(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const ev=Q0;function Ql(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Vr(n,e,t){return n+"/"+e+"/"+t}function wc(n){return Vr(n[0],n[1],n[2])}function tv(n){return n.split("/").map(Number)}function iv(n){return(n[1]<<n[0])+n[2]}function nv(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(i,s):!0}class sv extends ev{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=tv(e)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(wc(s.tileCoord)),s.release())})}}const bc=sv,fa={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class rv extends oi{constructor(e){super(),this.projection=qt(e.projection),this.attributions_=eh(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,s){t.viewResolver=i,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=eh(e),this.changed()}setState(e){this.state_=e,this.changed()}}function eh(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}const Cc=rv,xn=[0,0,0],Oi=5;class av{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Te(V_(this.resolutions_,function(s,r){return r-s},!0),17);let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Te(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=un(i)),Te(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Te(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:no,Te(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const l=new xc(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);l.minX=Math.max(a.minX,l.minX),l.maxX=Math.min(a.maxX,l.maxX),l.minY=Math.max(a.minY,l.minY),l.maxY=Math.min(a.maxY,l.maxY)}return l},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,l=s.maxX;r<=l;++r)for(let a=s.minY,h=s.maxY;a<=h;++a)i([t,r,a])}forEachTileCoordParentTileRange(e,t,i,s){let r,l,a,h=null,u=e[0]-1;for(this.zoomFactor_===2?(l=e[1],a=e[2]):h=this.getTileCoordExtent(e,s);u>=this.minZoom;){if(this.zoomFactor_===2?(l=Math.floor(l/2),a=Math.floor(a/2),r=vn(l,l,a,a,i)):r=this.getTileRangeForExtentAndZ(h,u,i),t(u,r))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,l=e[2]*2;return vn(r,r+1,l,l+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],l=e[2];if(t===s)return vn(r,l,r,l,i);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-s),u=Math.floor(r*h),f=Math.floor(l*h);if(t<s)return vn(u,u,f,f,i);const _=Math.floor(h*(r+1))-1,p=Math.floor(h*(l+1))-1;return vn(u,_,f,p,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const s=this.getOrigin(e),r=this.getResolution(e),l=Pt(this.getTileSize(e),this.tmpSize_),a=s[0]+t.minX*l[0]*r,h=s[0]+(t.maxX+1)*l[0]*r,u=s[1]+t.minY*l[1]*r,f=s[1]+(t.maxY+1)*l[1]*r;return si(a,u,h,f,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,xn);const s=xn[1],r=xn[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,xn);const l=xn[1],a=xn[2];return vn(s,l,r,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Pt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=Pt(this.getTileSize(e[0]),this.tmpSize_),l=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s,h=l+r[0]*s,u=a+r[1]*s;return si(l,a,h,u,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,r){const l=this.getZForResolution(i),a=i/this.getResolution(l),h=this.getOrigin(l),u=Pt(this.getTileSize(l),this.tmpSize_);let f=a*(e-h[0])/i/u[0],_=a*(h[1]-t)/i/u[1];return s?(f=Gs(f,Oi)-1,_=Gs(_,Oi)-1):(f=Ws(f,Oi),_=Ws(_,Oi)),Ql(l,f,_,r)}getTileCoordForXYAndZ_(e,t,i,s,r){const l=this.getOrigin(i),a=this.getResolution(i),h=Pt(this.getTileSize(i),this.tmpSize_);let u=(e-l[0])/a/h[0],f=(l[1]-t)/a/h[1];return s?(u=Gs(u,Oi)-1,f=Gs(f,Oi)-1):(u=Ws(u,Oi),f=Ws(f,Oi)),Ql(i,u,f,r)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=qa(this.resolutions_,e,t||0);return rt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return tc(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}const Sc=av;function Tc(n){let e=n.getDefaultTileGrid();return e||(e=cv(n),n.setDefaultTileGrid(e)),e}function ov(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),r=ko(t);if(!Or(r,s)){const l=He(r),a=Math.ceil((r[0]-s[0])/l);return s[0]+=l*a,n.getTileCoordForCoordAndZ(s,i)}return e}function lv(n,e,t,i){i=i!==void 0?i:"top-left";const s=Ec(n,e,t);return new Sc({extent:n,origin:op(n,i),resolutions:s,tileSize:t})}function hv(n){const e=n||{},t=e.extent||qt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ec(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Sc(i)}function Ec(n,e,t,i){e=e!==void 0?e:xp,t=Pt(t!==void 0?t:no);const s=ri(n),r=He(n);i=i>0?i:Math.max(r/t[0],s/t[1]);const l=e+1,a=new Array(l);for(let h=0;h<l;++h)a[h]=i/Math.pow(2,h);return a}function cv(n,e,t,i){const s=ko(n);return lv(s,e,t,i)}function ko(n){n=qt(n);let e=n.getExtent();if(!e){const t=180*hs.degrees/n.getMetersPerUnit();e=si(-t,-t,t,t)}return e}class uv extends Cc{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Pt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new bc(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let l=!0,a,h,u;for(let f=i.minX;f<=i.maxX;++f)for(let _=i.minY;_<=i.maxY;++_)h=Vr(t,f,_),u=!1,r.containsKey(h)&&(a=r.get(h),u=a.getState()===ce.LOADED,u&&(u=s(a)!==!1)),u||(l=!1);return l}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,r){return Ie()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Tc(e)}getTileCacheForProjection(e){const t=this.getProjection();return Te(t===null||Cn(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(t),l=Pt(s.getTileSize(e),this.tmpSize);return r==1?l:D0(l,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=ov(i,e,t)),nv(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,s){}}class dv extends ai{constructor(e,t){super(e),this.tile=t}}const fv=uv;function gv(n,e){const t=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(l,a,h){if(l)return n.replace(t,l[0].toString()).replace(i,l[1].toString()).replace(s,l[2].toString()).replace(r,function(){const u=l[0],f=e.getFullTileRange(u);return Te(f,55),(f.getHeight()-l[2]-1).toString()})}}function mv(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=gv(n[s],e);return _v(i)}function _v(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const s=iv(e),r=sn(s,n.length);return n[r](e,t,i)}}function pv(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(n.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}class Oo extends fv{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Oo.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ae(t),s=t.getState();let r;s==ce.LOADING?(this.tileLoadingKeys_[i]=!0,r=fa.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==ce.ERROR?fa.TILELOADERROR:s==ce.LOADED?fa.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new dv(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=pv(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(mv(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const s=Vr(e,t,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const yv=Oo;class vv extends yv{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:xv,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:yc,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Cn(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Cn(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Cn(t,e)))return this.tileGrid;const i=Ae(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Tc(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Cn(t,e))return this.tileCache;const i=Ae(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new bc(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,s,r,l){const a=[e,t,i],h=this.getTileCoordForTileUrlFunction(a,r),u=h?this.tileUrlFunction(h,s,r):void 0,f=new this.tileClass(a,u!==void 0?ce.IDLE:ce.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=l,f.addEventListener(xe.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,i,s,r){const l=this.getProjection();if(!l||!r||Cn(l,r))return this.getTileInternal(e,t,i,s,l||r);const a=this.getTileCacheForProjection(r),h=[e,t,i];let u;const f=wc(h);a.containsKey(f)&&(u=a.get(f));const _=this.getKey();if(u&&u.key==_)return u;const p=this.getTileGridForProjection(l),x=this.getTileGridForProjection(r),w=this.getTileCoordForTileUrlFunction(h,r),C=new Va(l,p,r,x,h,w,this.getTilePixelRatio(s),this.getGutter(),(b,E,M,k)=>this.getTileInternal(b,E,M,k,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return C.key=_,u?(C.interimTile=u,C.refreshInterimChain(),a.replace(f,C)):a.set(f,C),C}getTileInternal(e,t,i,s,r){let l=null;const a=Vr(e,t,i),h=this.getKey();if(!this.tileCache.containsKey(a))l=this.createTile_(e,t,i,s,r,h),this.tileCache.set(a,l);else if(l=this.tileCache.get(a),l.key!=h){const u=l;l=this.createTile_(e,t,i,s,r,h),u.getState()==ce.IDLE?l.interimTile=u.interimTile:l.interimTile=u,l.refreshInterimChain(),this.tileCache.replace(a,l)}return l}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=qt(e);if(i){const s=Ae(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function xv(n,e){n.getImage().src=e}const wv=vv;class bv extends wv{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:hv({extent:ko(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Cv=bv,Sv='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Tv extends Cv{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Sv];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const Ev=Tv;class Ro extends oi{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ro(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ze(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Oe(e,xe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Mv(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Mv(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Te(typeof n.getZIndex=="function",41),e=[n]),function(){return e}}const wi=Ro;function Dv(n,e,t,i,s){Mc(n,e,t||0,i||n.length-1,s||kv)}function Mc(n,e,t,i,s){for(;i>t;){if(i-t>600){var r=i-t+1,l=e-t+1,a=Math.log(r),h=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*h*(r-h)/r)*(l-r/2<0?-1:1),f=Math.max(t,Math.floor(e-l*h/r+u)),_=Math.min(i,Math.floor(e+(r-l)*h/r+u));Mc(n,e,f,_,s)}var p=n[e],x=t,w=i;for(Qn(n,t,e),s(n[i],p)>0&&Qn(n,t,i);x<w;){for(Qn(n,x,w),x++,w--;s(n[x],p)<0;)x++;for(;s(n[w],p)>0;)w--}s(n[t],p)===0?Qn(n,t,w):(w++,Qn(n,w,i)),w<=e&&(t=w+1),e<=w&&(i=w-1)}}function Qn(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function kv(n,e){return n<e?-1:n>e?1:0}let Dc=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!qs(e,t))return i;const s=this.toBBox,r=[];for(;t;){for(let l=0;l<t.children.length;l++){const a=t.children[l],h=t.leaf?s(a):a;qs(e,h)&&(t.leaf?i.push(a):ma(e,h)?this._all(a,i):r.push(a))}t=r.pop()}return i}collides(e){let t=this.data;if(!qs(e,t))return!1;const i=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],l=t.leaf?this.toBBox(r):r;if(qs(e,l)){if(t.leaf||ma(e,l))return!0;i.push(r)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Mn([]),this}remove(e,t){if(!e)return this;let i=this.data;const s=this.toBBox(e),r=[],l=[];let a,h,u;for(;i||r.length;){if(i||(i=r.pop(),h=r[r.length-1],a=l.pop(),u=!0),i.leaf){const f=Ov(e,i.children,t);if(f!==-1)return i.children.splice(f,1),r.push(i),this._condense(r),this}!u&&!i.leaf&&ma(i,s)?(r.push(i),l.push(a),a=0,h=i,i=i.children[0]):h?(a++,i=h.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,s){const r=i-t+1;let l=this._maxEntries,a;if(r<=l)return a=Mn(e.slice(t,i+1)),wn(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(l)),l=Math.ceil(r/Math.pow(l,s-1))),a=Mn([]),a.leaf=!1,a.height=s;const h=Math.ceil(r/l),u=h*Math.ceil(Math.sqrt(l));th(e,t,i,u,this.compareMinX);for(let f=t;f<=i;f+=u){const _=Math.min(f+u-1,i);th(e,f,_,h,this.compareMinY);for(let p=f;p<=_;p+=h){const x=Math.min(p+h-1,_);a.children.push(this._build(e,p,x,s-1))}}return wn(a,this.toBBox),a}_chooseSubtree(e,t,i,s){for(;s.push(t),!(t.leaf||s.length-1===i);){let r=1/0,l=1/0,a;for(let h=0;h<t.children.length;h++){const u=t.children[h],f=ga(u),_=Lv(e,u)-f;_<l?(l=_,r=f<r?f:r,a=u):_===l&&f<r&&(r=f,a=u)}t=a||t.children[0]}return t}_insert(e,t,i){const s=i?e:this.toBBox(e),r=[],l=this._chooseSubtree(s,this.data,t,r);for(l.children.push(e),is(l,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const i=e[t],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const l=this._chooseSplitIndex(i,r,s),a=Mn(i.children.splice(l,i.children.length-l));a.height=i.height,a.leaf=i.leaf,wn(i,this.toBBox),wn(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=Mn([e,t]),this.data.height=e.height+1,this.data.leaf=!1,wn(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let s,r=1/0,l=1/0;for(let a=t;a<=i-t;a++){const h=ts(e,0,a,this.toBBox),u=ts(e,a,i,this.toBBox),f=Pv(h,u),_=ga(h)+ga(u);f<r?(r=f,s=a,l=_<l?_:l):f===r&&_<l&&(l=_,s=a)}return s||i-t}_chooseSplitAxis(e,t,i){const s=e.leaf?this.compareMinX:Rv,r=e.leaf?this.compareMinY:Iv,l=this._allDistMargin(e,t,i,s),a=this._allDistMargin(e,t,i,r);l<a&&e.children.sort(s)}_allDistMargin(e,t,i,s){e.children.sort(s);const r=this.toBBox,l=ts(e,0,t,r),a=ts(e,i-t,i,r);let h=Ks(l)+Ks(a);for(let u=t;u<i-t;u++){const f=e.children[u];is(l,e.leaf?r(f):f),h+=Ks(l)}for(let u=i-t-1;u>=t;u--){const f=e.children[u];is(a,e.leaf?r(f):f),h+=Ks(a)}return h}_adjustParentBBoxes(e,t,i){for(let s=i;s>=0;s--)is(t[s],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():wn(e[t],this.toBBox)}};function Ov(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function wn(n,e){ts(n,0,n.children.length,e,n)}function ts(n,e,t,i,s){s||(s=Mn(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const l=n.children[r];is(s,n.leaf?i(l):l)}return s}function is(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Rv(n,e){return n.minX-e.minX}function Iv(n,e){return n.minY-e.minY}function ga(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Ks(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Lv(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Pv(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),s=Math.min(n.maxX,e.maxX),r=Math.min(n.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-i)}function ma(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function qs(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Mn(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function th(n,e,t,i,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=i)continue;const l=e+Math.ceil((t-e)/i/2)*i;Dv(n,l,e,t,s),r.push(e,l,l,t)}}class Io{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Pt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Io({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ie()}getImage(e){return Ie()}getHitDetectionImage(){return Ie()}getPixelRatio(e){return 1}getImageState(){return Ie()}getImageSize(){return Ie()}getOrigin(){return Ie()}getSize(){return Ie()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Pt(e)}listenImageChange(e){Ie()}load(){Ie()}unlistenImageChange(e){Ie()}}const kc=Io;function ii(n){return Array.isArray(n)?Fh(n):n}class Lo extends kc{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new Lo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,s=Tt(i.size*e,i.size*e);this.draw_(i,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ct.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const A=s;s=r,r=A}const l=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/l,h=r*Math.sin(a),u=Math.sqrt(r*r-h*h),f=s-u,_=Math.sqrt(h*h+f*f),p=_/h;if(e==="miter"&&p<=i)return p*t;const x=t/2/p,w=t/2*(f/_),b=Math.sqrt((s+x)*(s+x)+w*w)-s;if(this.radius2_===void 0||e==="bevel")return b*2;const E=s*Math.sin(a),M=Math.sqrt(s*s-E*E),k=r-M,F=Math.sqrt(E*E+k*k)/E;if(F<=i){const A=F*t/2-r-s;return 2*Math.max(b,A)}return b*2}createRenderOptions(){let e=Bn,t=0,i=null,s=0,r,l=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=_s),r=ii(r),l=this.stroke_.getWidth(),l===void 0&&(l=ys),i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=Bn),t=this.stroke_.getMiterLimit(),t===void 0&&(t=ms));const a=this.calculateLineJoinSize_(e,l,t),h=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*h+a);return{strokeStyle:r,strokeWidth:l,size:u,lineDash:i,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Si),t.fillStyle=ii(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=lr(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const s=Tt(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let a=0;a<t;a++){const h=r+a*l,u=a%2===0?i:s;e.lineTo(u*Math.cos(h),u*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Si,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const Oc=Lo;class Po extends Oc{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Po({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const Fo=Po;class Ao{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Ao({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const hn=Ao;class jo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new jo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const An=jo;class ji{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ih,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ji({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ih,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Fv(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Te(typeof n.getZIndex=="function",41),t=[n]),e=function(){return t}}return e}let _a=null;function Av(n,e){if(!_a){const t=new hn({color:"rgba(255,255,255,0.4)"}),i=new An({color:"#3399CC",width:1.25});_a=[new ji({image:new Fo({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return _a}function jv(){const n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n.Polygon=[new ji({fill:new hn({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new ji({stroke:new An({color:e,width:i+2})}),new ji({stroke:new An({color:t,width:i})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new ji({image:new Fo({radius:i*2,fill:new hn({color:t}),stroke:new An({color:e,width:i/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function ih(n){return n.getGeometry()}const en=ji;let es=null;class Yv extends Dr{constructor(e,t,i,s,r,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=l,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ct.LOADED){es||(es=Tt(1,1,void 0,{willReadFrequently:!0})),es.drawImage(this.image_,0,0);try{es.getImageData(0,0,1,1),this.tainted_=!1}catch{es=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(xe.CHANGE)}handleImageError_(){this.imageState_=ct.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ct.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Tt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ct.IDLE){this.image_||this.initializeImage_(),this.imageState_=ct.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=pc(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ct.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Ph(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Nv(n,e,t,i,s,r){let l=hr.get(e,i,r);return l||(l=new Yv(n,e,t,i,s,r),hr.set(e,i,r,l)),l}class Yo extends kc{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Te(!(a!==void 0&&l),4),Te(!l||l&&this.imgSize_,5),(a===void 0||a.length===0)&&l&&(a=l.src||Ae(l)),Te(a!==void 0&&a.length>0,6),Te(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const h=e.src!==void 0?ct.IDLE:ct.LOADED;if(this.color_=e.color!==void 0?lr(e.color):null,this.iconImage_=Nv(l,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const u=this.getImage(1),f=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};u.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):u.addEventListener("load",f)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(this.width_!==void 0||this.height_!==void 0)&&(e=void 0),new Yo({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const i=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/i.width,t/i.height]):e!==void 0?super.setScale([e/i.width,e/i.width]):t!==void 0?super.setScale([t/i.height,t/i.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const i=Array.isArray(e)?e[0]:e;i!==void 0&&(this.width_=i*t.width);const s=Array.isArray(e)?e[1]:e;s!==void 0&&(this.height_=s*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(xe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(xe.CHANGE,e)}}const rs=Yo,Bv="#333";class No{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Pt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new hn({color:Bv}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new No({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Pt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Wa=No;function nh(n){return new en({fill:vs(n,""),stroke:xs(n,""),text:Vv(n),image:Wv(n)})}function vs(n,e){const t=n[e+"fill-color"];if(t)return new hn({color:t})}function xs(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(!(!t&&!i))return new An({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function Vv(n){const e=n["text-value"];return e?new Wa({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:vs(n,"text-"),backgroundFill:vs(n,"text-background-"),stroke:xs(n,"text-"),backgroundStroke:xs(n,"text-background-")}):void 0}function Wv(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new rs({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const r="shape-";return new Oc({points:i,fill:vs(n,r),stroke:xs(n,r),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const s=n["circle-radius"];if(s){const r="circle-";return new Fo({radius:s,fill:vs(n,r),stroke:xs(n,r),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const sh={RENDER_ORDER:"renderOrder"};class Gv extends jr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(sh.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Dc(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(sh.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=Av;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof en)t=e;else if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r){const l=e[r];l instanceof en?s[r]=l:s[r]=nh(l)}t=s}else t=nh(e);this.style_=t,this.styleFunction_=e===null?void 0:Fv(this.style_),this.changed()}}const zv=Gv,Ts={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Js=[Ts.FILL],Yi=[Ts.STROKE],tn=[Ts.BEGIN_PATH],rh=[Ts.CLOSE_PATH],ge=Ts;class Uv{drawCustom(e,t,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Rc=Uv;class Xv extends Rc{constructor(e,t,i,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let l=r.length;for(let a=0,h=e.length;a<h;a+=t)s[0]=e[a],s[1]=e[a+1],Or(i,s)&&(r[l++]=s[0],r[l++]=s[1]);return l}appendFlatLineCoordinates(e,t,i,s,r,l){const a=this.coordinates;let h=a.length;const u=this.getBufferedMaxExtent();l&&(t+=s);let f=e[t],_=e[t+1];const p=this.tmpCoordinate_;let x=!0,w,C,b;for(w=t+s;w<i;w+=s)p[0]=e[w],p[1]=e[w+1],b=Ta(u,p),b!==C?(x&&(a[h++]=f,a[h++]=_,x=!1),a[h++]=p[0],a[h++]=p[1]):b===ft.INTERSECTING?(a[h++]=p[0],a[h++]=p[1],x=!1):x=!0,f=p[0],_=p[1],C=b;return(r&&x||w===t+s)&&(a[h++]=f,a[h++]=_),h}drawCustomCoordinates_(e,t,i,s,r){for(let l=0,a=i.length;l<a;++l){const h=i[l],u=this.appendFlatLineCoordinates(e,t,h,s,!1,!1);r.push(u),t=h}return t}drawCustom(e,t,i,s){this.beginGeometry(e,t);const r=e.getType(),l=e.getStride(),a=this.coordinates.length;let h,u,f,_,p;switch(r){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),_=[];const x=e.getEndss();p=0;for(let w=0,C=x.length;w<C;++w){const b=[];p=this.drawCustomCoordinates_(h,p,x[w],l,b),_.push(b)}this.instructions.push([ge.CUSTOM,a,_,e,i,Ia]),this.hitDetectionInstructions.push([ge.CUSTOM,a,_,e,s||i,Ia]);break;case"Polygon":case"MultiLineString":f=[],h=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(h,0,e.getEnds(),l,f),this.instructions.push([ge.CUSTOM,a,f,e,i,cs]),this.hitDetectionInstructions.push([ge.CUSTOM,a,f,e,s||i,cs]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([ge.CUSTOM,a,u,e,i,Ai]),this.hitDetectionInstructions.push([ge.CUSTOM,a,u,e,s||i,Ai]);break;case"MultiPoint":h=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,l),u>a&&(this.instructions.push([ge.CUSTOM,a,u,e,i,Ai]),this.hitDetectionInstructions.push([ge.CUSTOM,a,u,e,s||i,Ai]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([ge.CUSTOM,a,u,e,i]),this.hitDetectionInstructions.push([ge.CUSTOM,a,u,e,s||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[ge.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ge.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let s,r,l=-1;for(t=0;t<i;++t)s=e[t],r=s[0],r==ge.END_GEOMETRY?l=t:r==ge.BEGIN_GEOMETRY&&(s[2]=t,B_(this.hitDetectionInstructions,l,t),l=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const s=e.getColor();i.fillStyle=ii(s||Si)}else i.fillStyle=void 0;if(t){const s=t.getColor();i.strokeStyle=ii(s||_s);const r=t.getLineCap();i.lineCap=r!==void 0?r:mr;const l=t.getLineDash();i.lineDash=l?l.slice():fs;const a=t.getLineDashOffset();i.lineDashOffset=a||gs;const h=t.getLineJoin();i.lineJoin=h!==void 0?h:Bn;const u=t.getWidth();i.lineWidth=u!==void 0?u:ys;const f=t.getMiterLimit();i.miterLimit=f!==void 0?f:ms,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[ge.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ge.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,l=e.lineDashOffset,a=e.lineJoin,h=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!Gi(e.currentLineDash,r)||e.currentLineDashOffset!=l||e.currentLineJoin!=a||e.currentLineWidth!=h||e.currentMiterLimit!=u)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=l,e.currentLineJoin=a,e.currentLineWidth=h,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ge.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=kh(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Qa(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Es=Xv;class Hv extends Es{constructor(e,t,i,s){super(e,t,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(i,s);this.instructions.push([ge.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(i,s);this.instructions.push([ge.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Zv=Hv;class Kv extends Es{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinates_(e,t,i,s){const r=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,i,s,!1,!1),a=[ge.MOVE_TO_LINE_TO,r,l];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,fs,gs],tn);const l=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(l,0,l.length,a),this.hitDetectionInstructions.push(Yi),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],tn);const l=e.getEnds(),a=e.getFlatCoordinates(),h=e.getStride();let u=0;for(let f=0,_=l.length;f<_;++f)u=this.drawFlatCoordinates_(a,u,l[f],h);this.hitDetectionInstructions.push(Yi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Yi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Yi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(tn)}}const qv=Kv;class Jv extends Es{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinatess_(e,t,i,s){const r=this.state,l=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,h=i.length;this.instructions.push(tn),this.hitDetectionInstructions.push(tn);for(let u=0;u<h;++u){const f=i[u],_=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,f,s,!0,!a),x=[ge.MOVE_TO_LINE_TO,_,p];this.instructions.push(x),this.hitDetectionInstructions.push(x),a&&(this.instructions.push(rh),this.hitDetectionInstructions.push(rh)),t=f}return l&&(this.instructions.push(Js),this.hitDetectionInstructions.push(Js)),a&&(this.instructions.push(Yi),this.hitDetectionInstructions.push(Yi)),t}drawCircle(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Si]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const l=e.getFlatCoordinates(),a=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,a,!1,!1);const u=[ge.CIRCLE,h];this.instructions.push(tn,u),this.hitDetectionInstructions.push(tn,u),i.fillStyle!==void 0&&(this.instructions.push(Js),this.hitDetectionInstructions.push(Js)),i.strokeStyle!==void 0&&(this.instructions.push(Yi),this.hitDetectionInstructions.push(Yi)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Si]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const l=e.getEnds(),a=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(a,0,l,h),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Si]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const l=e.getEndss(),a=e.getOrientedFlatCoordinates(),h=e.getStride();let u=0;for(let f=0,_=l.length;f<_;++f)u=this.drawFlatCoordinatess_(a,u,l[f],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,s=t.length;i<s;++i)t[i]=qi(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const ah=Jv;function $v(n,e,t,i,s){const r=[];let l=t,a=0,h=e.slice(t,2);for(;a<n&&l+s<i;){const[u,f]=h.slice(-2),_=e[l+s],p=e[l+s+1],x=Math.sqrt((_-u)*(_-u)+(p-f)*(p-f));if(a+=x,a>=n){const w=(n-a+x)/x,C=Lt(u,_,w),b=Lt(f,p,w);h.push(C,b),r.push(h),h=[C,b],a==n&&(l+=s),a=0}else if(a<n)h.push(e[l+s],e[l+s+1]),l+=s;else{const w=x-a,C=Lt(u,_,w/x),b=Lt(f,p,w/x);h.push(C,b),r.push(h),h=[C,b],a=0,l+=s}}return a>0&&r.push(h),r}function Qv(n,e,t,i,s){let r=t,l=t,a=0,h=0,u=t,f,_,p,x,w,C,b,E,M,k;for(_=t;_<i;_+=s){const P=e[_],F=e[_+1];w!==void 0&&(M=P-w,k=F-C,x=Math.sqrt(M*M+k*k),b!==void 0&&(h+=p,f=Math.acos((b*M+E*k)/(p*x)),f>n&&(h>a&&(a=h,r=u,l=_),h=0,u=_-s)),p=x,b=M,E=k),w=P,C=F}return h+=x,h>a?[u,_]:[r,l]}const as={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class ex extends Es{constructor(e,t,i,s){super(e,t,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const l=this.coordinates;let a=l.length;const h=e.getType();let u=null,f=e.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!vt(this.getBufferedMaxExtent(),e.getExtent()))return;let _;if(u=e.getFlatCoordinates(),h=="LineString")_=[u.length];else if(h=="MultiLineString")_=e.getEnds();else if(h=="Polygon")_=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const C=e.getEndss();_=[];for(let b=0,E=C.length;b<E;++b)_.push(C[b][0])}this.beginGeometry(e,t);const p=r.repeat,x=p?void 0:r.textAlign;let w=0;for(let C=0,b=_.length;C<b;++C){let E;p?E=$v(p*this.resolution,u,w,_[C],f):E=[u.slice(w,_[C])];for(let M=0,k=E.length;M<k;++M){const P=E[M];let F=0,A=P.length;if(x==null){const V=Qv(r.maxAngle,P,0,P.length,2);F=V[0],A=V[1]}for(let V=F;V<A;V+=f)l.push(P[V],P[V+1]);const j=l.length;w=_[C],this.drawChars_(a,j),a=j}}this.endGeometry(t)}else{let _=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),f=2;break;case"Polygon":u=e.getFlatInteriorPoint(),r.overflow||_.push(u[2]/this.resolution),f=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();u=[];for(let E=0,M=b.length;E<M;E+=3)r.overflow||_.push(b[E+2]/this.resolution),u.push(b[E],b[E+1]);if(u.length===0)return;f=2;break}const p=this.appendFlatPointCoordinates(u,f);if(p===a)return;if(_&&(p-a)/2!==u.length/f){let b=a/2;_=_.filter((E,M)=>{const k=l[(b+M)*2]===u[M*f]&&l[(b+M)*2+1]===u[M*f+1];return k||--b,k})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let x=r.padding;if(x!=Qi&&(r.scale[0]<0||r.scale[1]<0)){let b=r.padding[0],E=r.padding[1],M=r.padding[2],k=r.padding[3];r.scale[0]<0&&(E=-E,k=-k),r.scale[1]<0&&(b=-b,M=-M),x=[b,E,M,k]}const w=this.pixelRatio;this.instructions.push([ge.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,x==Qi?Qi:x.map(function(b){return b*w}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const C=1/w;this.hitDetectionInstructions.push([ge.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,void 0,this.declutterImageWithText_,x,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||ps,justify:t.justify,textBaseline:t.textBaseline||_r,scale:t.scale});const l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,l=this.textKey_,a=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,u=as[s.textBaseline],f=this.textOffsetY_*h,_=this.text_,p=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ge.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,h,f,r,p*h,_,l,1]),this.hitDetectionInstructions.push([ge.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,1,f,r,p,_,l,1/h])}setTextStyle(e,t){let i,s,r;if(!e)this.text_="";else{const l=e.getFill();l?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=ii(l.getColor()||Si)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const w=a.getLineDash(),C=a.getLineDashOffset(),b=a.getWidth(),E=a.getMiterLimit();r.lineCap=a.getLineCap()||mr,r.lineDash=w?w.slice():fs,r.lineDashOffset=C===void 0?gs:C,r.lineJoin=a.getLineJoin()||Bn,r.lineWidth=b===void 0?ys:b,r.miterLimit=E===void 0?ms:E,r.strokeStyle=ii(a.getColor()||_s)}i=this.textState_;const h=e.getFont()||oc;Ey(h);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=h,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||_r,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Qi,i.scale=u===void 0?[1,1]:u;const f=e.getOffsetX(),_=e.getOffsetY(),p=e.getRotateWithView(),x=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=p===void 0?!1:p,this.textRotation_=x===void 0?0:x,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Ae(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Ae(s.fillStyle):""}this.declutterImageWithText_=t}}const tx={Circle:ah,Default:Es,Image:Zv,LineString:qv,Polygon:ah,Text:ex};class ix{constructor(e,t,i,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const s in i){const r=i[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[t];if(r===void 0){const l=tx[t];r=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}const oh=ix;function nx(n,e,t,i,s,r,l,a,h,u,f,_){let p=n[e],x=n[e+1],w=0,C=0,b=0,E=0;function M(){w=p,C=x,e+=i,p=n[e],x=n[e+1],E+=b,b=Math.sqrt((p-w)*(p-w)+(x-C)*(x-C))}do M();while(e<t-i&&E+b<r);let k=b===0?0:(r-E)/b;const P=Lt(w,p,k),F=Lt(C,x,k),A=e-i,j=E,V=r+a*h(u,s,f);for(;e<t-i&&E+b<V;)M();k=b===0?0:(V-E)/b;const H=Lt(w,p,k),z=Lt(C,x,k);let se;if(_){const ie=[P,F,H,z];fo(ie,0,4,2,_,ie,ie),se=ie[0]>ie[2]}else se=P>H;const ne=Math.PI,re=[],Ce=A+i===e;e=A,b=0,E=j,p=n[e],x=n[e+1];let te;if(Ce){M(),te=Math.atan2(x-C,p-w),se&&(te+=te>0?-ne:ne);const ie=(H+P)/2,$=(z+F)/2;return re[0]=[ie,$,(V-r)/2,te,s],re}s=s.replace(/\n/g," ");for(let ie=0,$=s.length;ie<$;){M();let ue=Math.atan2(x-C,p-w);if(se&&(ue+=ue>0?-ne:ne),te!==void 0){let pe=ue-te;if(pe+=pe>ne?-2*ne:pe<-ne?2*ne:0,Math.abs(pe)>l)return null}te=ue;const Se=ie;let me=0;for(;ie<$;++ie){const pe=se?$-ie-1:ie,Z=a*h(u,s[pe],f);if(e+i<t&&E+b<r+me+Z/2)break;me+=Z}if(ie===Se)continue;const Le=se?s.substring($-Se,$-ie):s.substring(Se,ie);k=b===0?0:(r+me/2-E)/b;const U=Lt(w,p,k),ae=Lt(C,x,k);re.push([U,ae,me/2,ue,Le]),r+=me}return re}function Ic(n,e,t,i){let s=n[e],r=n[e+1],l=0;for(let a=e+i;a<t;a+=i){const h=n[a],u=n[a+1];l+=Math.sqrt((h-s)*(h-s)+(u-r)*(u-r)),s=h,r=u}return l}const bn=Bt(),Ri=[],_i=[],pi=[],Ii=[];function lh(n){return n[3].declutterBox}const sx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function hh(n,e){return(e==="start"||e==="end")&&!sx.test(n)&&(e=e==="start"?"left":"right"),as[e]}function rx(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class ax{constructor(e,t,i,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=ni(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,s){const r=e+t+i+s;if(this.labels_[r])return this.labels_[r];const l=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,h=this.textStates[t],u=this.pixelRatio,f=[h.scale[0]*u,h.scale[1]*u],_=Array.isArray(e),p=h.justify?as[h.justify]:hh(Array.isArray(e)?e[0]:e,h.textAlign||ps),x=s&&l.lineWidth?l.lineWidth:0,w=_?e:e.split(`
`).reduce(rx,[]),{width:C,height:b,widths:E,heights:M,lineWidths:k}=Dy(h,w),P=C+x,F=[],A=(P+2)*f[0],j=(b+x)*f[1],V={width:A<0?Math.floor(A):Math.ceil(A),height:j<0?Math.floor(j):Math.ceil(j),contextInstructions:F};(f[0]!=1||f[1]!=1)&&F.push("scale",f),s&&(F.push("strokeStyle",l.strokeStyle),F.push("lineWidth",x),F.push("lineCap",l.lineCap),F.push("lineJoin",l.lineJoin),F.push("miterLimit",l.miterLimit),F.push("setLineDash",[l.lineDash]),F.push("lineDashOffset",l.lineDashOffset)),i&&F.push("fillStyle",a.fillStyle),F.push("textBaseline","middle"),F.push("textAlign","center");const H=.5-p;let z=p*P+H*x;const se=[],ne=[];let re=0,Ce=0,te=0,ie=0,$;for(let ue=0,Se=w.length;ue<Se;ue+=2){const me=w[ue];if(me===`
`){Ce+=re,re=0,z=p*P+H*x,++ie;continue}const Le=w[ue+1]||h.font;Le!==$&&(s&&se.push("font",Le),i&&ne.push("font",Le),$=Le),re=Math.max(re,M[te]);const U=[me,z+H*E[te]+p*(E[te]-k[ie]),.5*(x+re)+Ce];z+=E[te],s&&se.push("strokeText",U),i&&ne.push("fillText",U),++te}return Array.prototype.push.apply(F,se),Array.prototype.push.apply(F,ne),this.labels_[r]=V,V}replayTextBackground_(e,t,i,s,r,l,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),l&&(this.alignFill_=l[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,s,r,l,a,h,u,f,_,p,x,w,C,b){a*=p[0],h*=p[1];let E=i-a,M=s-h;const k=r+u>e?e-u:r,P=l+f>t?t-f:l,F=w[3]+k*p[0]+w[1],A=w[0]+P*p[1]+w[2],j=E-w[3],V=M-w[0];(C||_!==0)&&(Ri[0]=j,Ii[0]=j,Ri[1]=V,_i[1]=V,_i[0]=j+F,pi[0]=_i[0],pi[1]=V+A,Ii[1]=pi[1]);let H;return _!==0?(H=Wi(ni(),i,s,1,1,_,-i,-s),gt(H,Ri),gt(H,_i),gt(H,pi),gt(H,Ii),si(Math.min(Ri[0],_i[0],pi[0],Ii[0]),Math.min(Ri[1],_i[1],pi[1],Ii[1]),Math.max(Ri[0],_i[0],pi[0],Ii[0]),Math.max(Ri[1],_i[1],pi[1],Ii[1]),bn)):si(Math.min(j,j+F),Math.min(V,V+A),Math.max(j,j+F),Math.max(V,V+A),bn),x&&(E=Math.round(E),M=Math.round(M)),{drawImageX:E,drawImageY:M,drawImageW:k,drawImageH:P,originX:u,originY:f,declutterBox:{minX:bn[0],minY:bn[1],maxX:bn[2],maxY:bn[3],value:b},canvasTransform:H,scale:p}}replayImageOrLabel_(e,t,i,s,r,l,a){const h=!!(l||a),u=s.declutterBox,f=e.canvas,_=a?a[2]*s.scale[0]/2:0;return u.minX-_<=f.width/t&&u.maxX+_>=0&&u.minY-_<=f.height/t&&u.maxY+_>=0&&(h&&this.replayTextBackground_(e,Ri,_i,pi,Ii,l,a),ky(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=gt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,s){const r=this.textStates[t],l=this.createLabel(e,t,s,i),a=this.strokeStates[i],h=this.pixelRatio,u=hh(Array.isArray(e)?e[0]:e,r.textAlign||ps),f=as[r.textBaseline||_r],_=a&&a.lineWidth?a.lineWidth:0,p=l.width/h-2*r.scale[0],x=u*p+2*(.5-u)*_,w=f*l.height/h+2*(.5-f)*_;return{label:l,anchorX:x,anchorY:w}}execute_(e,t,i,s,r,l,a,h){let u;this.pixelCoordinates_&&Gi(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=rn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),ip(this.renderedTransform_,i));let f=0;const _=s.length;let p=0,x,w,C,b,E,M,k,P,F,A,j,V,H=0,z=0,se=null,ne=null;const re=this.coordinateCache_,Ce=this.viewRotation_,te=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,ie={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ce},$=this.instructions!=s||this.overlaps?0:200;let ue,Se,me,Le;for(;f<_;){const U=s[f];switch(U[0]){case ge.BEGIN_GEOMETRY:ue=U[1],Le=U[3],ue.getGeometry()?a!==void 0&&!vt(a,Le.getExtent())?f=U[2]+1:++f:f=U[2];break;case ge.BEGIN_PATH:H>$&&(this.fill_(e),H=0),z>$&&(e.stroke(),z=0),!H&&!z&&(e.beginPath(),b=NaN,E=NaN),++f;break;case ge.CIRCLE:p=U[1];const pe=u[p],Z=u[p+1],et=u[p+2],Ke=u[p+3],Pe=et-pe,O=Ke-Z,R=Math.sqrt(Pe*Pe+O*O);e.moveTo(pe+R,Z),e.arc(pe,Z,R,0,2*Math.PI,!0),++f;break;case ge.CLOSE_PATH:e.closePath(),++f;break;case ge.CUSTOM:p=U[1],x=U[2];const N=U[3],W=U[4],Q=U.length==6?U[5]:void 0;ie.geometry=N,ie.feature=ue,f in re||(re[f]=[]);const K=re[f];Q?Q(u,p,x,2,K):(K[0]=u[p],K[1]=u[p+1],K.length=2),W(K,ie),++f;break;case ge.DRAW_IMAGE:p=U[1],x=U[2],P=U[3],w=U[4],C=U[5];let de=U[6];const Ee=U[7],ze=U[8],Vt=U[9],Jt=U[10];let xt=U[11];const tt=U[12];let Ne=U[13];const ut=U[14],_t=U[15];if(!P&&U.length>=20){F=U[19],A=U[20],j=U[21],V=U[22];const nt=this.drawLabelWithPointPlacement_(F,A,j,V);P=nt.label,U[3]=P;const bt=U[23];w=(nt.anchorX-bt)*this.pixelRatio,U[4]=w;const ht=U[24];C=(nt.anchorY-ht)*this.pixelRatio,U[5]=C,de=P.height,U[6]=de,Ne=P.width,U[13]=Ne}let We;U.length>25&&(We=U[25]);let Wt,Et,qe;U.length>17?(Wt=U[16],Et=U[17],qe=U[18]):(Wt=Qi,Et=!1,qe=!1),Jt&&te?xt+=Ce:!Jt&&!te&&(xt-=Ce);let ye=0;for(;p<x;p+=2){if(We&&We[ye++]<Ne/this.pixelRatio)continue;const nt=this.calculateImageOrLabelDimensions_(P.width,P.height,u[p],u[p+1],Ne,de,w,C,ze,Vt,xt,tt,r,Wt,Et||qe,ue),bt=[e,t,P,nt,Ee,Et?se:null,qe?ne:null];if(h){if(ut==="none")continue;if(ut==="obstacle"){h.insert(nt.declutterBox);continue}else{let ht,Dt;if(_t){const at=x-p;if(!_t[at]){_t[at]=bt;continue}if(ht=_t[at],delete _t[at],Dt=lh(ht),h.collides(Dt))continue}if(h.collides(nt.declutterBox))continue;ht&&(h.insert(Dt),this.replayImageOrLabel_.apply(this,ht)),h.insert(nt.declutterBox)}}this.replayImageOrLabel_.apply(this,bt)}++f;break;case ge.DRAW_CHARS:const Rt=U[1],it=U[2],Ti=U[3],wt=U[4];V=U[5];const Un=U[6],Ui=U[7],dt=U[8];j=U[9];const li=U[10];F=U[11],A=U[12];const At=[U[13],U[13]],$t=this.textStates[A],ke=$t.font,Mt=[$t.scale[0]*Ui,$t.scale[1]*Ui];let Qt;ke in this.widths_?Qt=this.widths_[ke]:(Qt={},this.widths_[ke]=Qt);const hi=Ic(u,Rt,it,2),Ei=Math.abs(Mt[0])*Hl(ke,F,Qt);if(wt||Ei<=hi){const nt=this.textStates[A].textAlign,bt=(hi-Ei)*as[nt],ht=nx(u,Rt,it,2,F,bt,Un,Math.abs(Mt[0]),Hl,ke,Qt,te?0:this.viewRotation_);e:if(ht){const Dt=[];let at,D,m,v,T;if(j)for(at=0,D=ht.length;at<D;++at){T=ht[at],m=T[4],v=this.createLabel(m,A,"",j),w=T[2]+(Mt[0]<0?-li:li),C=Ti*v.height+(.5-Ti)*2*li*Mt[1]/Mt[0]-dt;const L=this.calculateImageOrLabelDimensions_(v.width,v.height,T[0],T[1],v.width,v.height,w,C,0,0,T[3],At,!1,Qi,!1,ue);if(h&&h.collides(L.declutterBox))break e;Dt.push([e,t,v,L,1,null,null])}if(V)for(at=0,D=ht.length;at<D;++at){T=ht[at],m=T[4],v=this.createLabel(m,A,V,""),w=T[2],C=Ti*v.height-dt;const L=this.calculateImageOrLabelDimensions_(v.width,v.height,T[0],T[1],v.width,v.height,w,C,0,0,T[3],At,!1,Qi,!1,ue);if(h&&h.collides(L.declutterBox))break e;Dt.push([e,t,v,L,1,null,null])}h&&h.load(Dt.map(lh));for(let L=0,S=Dt.length;L<S;++L)this.replayImageOrLabel_.apply(this,Dt[L])}}++f;break;case ge.END_GEOMETRY:if(l!==void 0){ue=U[1];const nt=l(ue,Le);if(nt)return nt}++f;break;case ge.FILL:$?H++:this.fill_(e),++f;break;case ge.MOVE_TO_LINE_TO:for(p=U[1],x=U[2],Se=u[p],me=u[p+1],M=Se+.5|0,k=me+.5|0,(M!==b||k!==E)&&(e.moveTo(Se,me),b=M,E=k),p+=2;p<x;p+=2)Se=u[p],me=u[p+1],M=Se+.5|0,k=me+.5|0,(p==x-2||M!==b||k!==E)&&(e.lineTo(Se,me),b=M,E=k);++f;break;case ge.SET_FILL_STYLE:se=U,this.alignFill_=U[2],H&&(this.fill_(e),H=0,z&&(e.stroke(),z=0)),e.fillStyle=U[1],++f;break;case ge.SET_STROKE_STYLE:ne=U,z&&(e.stroke(),z=0),this.setStrokeStyle_(e,U),++f;break;case ge.STROKE:$?z++:e.stroke(),++f;break;default:++f;break}}H&&this.fill_(e),z&&e.stroke()}execute(e,t,i,s,r,l){this.viewRotation_=s,this.execute_(e,t,i,this.instructions,r,void 0,void 0,l)}executeHitDetection(e,t,i,s,r){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}const ox=ax,pa=["Polygon","Circle","LineString","Image","Text","Default"];class lx{constructor(e,t,i,s,r,l){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ni(),this.createExecutors_(r)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const s=e[t];for(const r in s){const l=s[r];i[r]=new ox(this.resolution_,this.pixelRatio_,this.overlaps_,l)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,s,r,l){s=Math.round(s);const a=s*2+1,h=Wi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Tt(a,a,void 0,{willReadFrequently:!0}));const f=this.hitDetectionContext_;f.canvas.width!==a||f.canvas.height!==a?(f.canvas.width=a,f.canvas.height=a):u||f.clearRect(0,0,a,a);let _;this.renderBuffer_!==void 0&&(_=Bt(),ns(_,e),Qa(_,t*(this.renderBuffer_+s),_));const p=hx(s);let x;function w(F,A){const j=f.getImageData(0,0,a,a).data;for(let V=0,H=p.length;V<H;V++)if(j[p[V]]>0){if(!l||x!=="Image"&&x!=="Text"||l.includes(F)){const z=(p[V]-3)/4,se=s-z%a,ne=s-(z/a|0),re=r(F,A,se*se+ne*ne);if(re)return re}f.clearRect(0,0,a,a);break}}const C=Object.keys(this.executorsByZIndex_).map(Number);C.sort(on);let b,E,M,k,P;for(b=C.length-1;b>=0;--b){const F=C[b].toString();for(M=this.executorsByZIndex_[F],E=pa.length-1;E>=0;--E)if(x=pa[E],k=M[x],k!==void 0&&(P=k.executeHitDetection(f,h,i,w,_),P))return P}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],s=t[1],r=t[2],l=t[3],a=[i,s,i,l,r,l,r,s];return rn(a,0,8,2,e,a),a}isEmpty(){return os(this.executorsByZIndex_)}execute(e,t,i,s,r,l,a){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(on),this.maxExtent_&&(e.save(),this.clip(e,i)),l=l||pa;let u,f,_,p,x,w;for(a&&h.reverse(),u=0,f=h.length;u<f;++u){const C=h[u].toString();for(x=this.executorsByZIndex_[C],_=0,p=l.length;_<p;++_){const b=l[_];w=x[b],w!==void 0&&w.execute(e,t,i,s,r,a)}}this.maxExtent_&&e.restore()}}const ya={};function hx(n){if(ya[n]!==void 0)return ya[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let r=0;r<=n;++r)for(let l=0;l<=n;++l){const a=r*r+l*l;if(a>t)break;let h=i[a];h||(h=[],i[a]=h),h.push(((n+r)*e+(n+l))*4+3),r>0&&h.push(((n-r)*e+(n+l))*4+3),l>0&&(h.push(((n+r)*e+(n-l))*4+3),r>0&&h.push(((n-r)*e+(n-l))*4+3))}const s=[];for(let r=0,l=i.length;r<l;++r)i[r]&&s.push(...i[r]);return ya[n]=s,s}const ch=lx;class cx extends Rc{constructor(e,t,i,s,r,l,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=s,this.transformRotation_=s?Pr(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=l,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ni()}drawImages_(e,t,i,s){if(!this.image_)return;const r=rn(e,t,i,s,this.transform_,this.pixelCoordinates_),l=this.context_,a=this.tmpLocalTransform_,h=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=h*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,_=r.length;f<_;f+=2){const p=r[f]-this.imageAnchorX_,x=r[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const w=p+this.imageAnchorX_,C=x+this.imageAnchorY_;Wi(a,w,C,1,1,u,-w,-C),l.setTransform.apply(l,a),l.translate(w,C),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=h)}drawText_(e,t,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=rn(e,t,i,s,this.transform_,this.pixelCoordinates_),l=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=s){const h=r[t]+this.textOffsetX_,u=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.translate(h-this.textOffsetX_,u-this.textOffsetY_),l.rotate(a),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&l.strokeText(this.text_,h,u),this.textFillState_&&l.fillText(this.text_,h,u))}}moveToLineTo_(e,t,i,s,r){const l=this.context_,a=rn(e,t,i,s,this.transform_,this.pixelCoordinates_);l.moveTo(a[0],a[1]);let h=a.length;r&&(h-=2);for(let u=2;u<h;u+=2)l.lineTo(a[u],a[u+1]);return r&&l.closePath(),i}drawRings_(e,t,i,s){for(let r=0,l=i.length;r<l;++r)t=this.moveToLineTo_(e,t,i[r],s,!0);return t}drawCircle(e){if(vt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=$p(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(i*i+s*s),l=this.context_;l.beginPath(),l.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!vt(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,s=t.length;i<s;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(vt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const l=e.getEnds(),a=e.getStride();i.beginPath();for(let h=0,u=l.length;h<u;++h)r=this.moveToLineTo_(s,r,l[h],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!vt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),l=e.getStride();t.beginPath();for(let a=0,h=r.length;a<h;++a){const u=r[a];s=this.drawRings_(i,s,u,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Gi(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:ps;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=s&&(i.textAlign=s,t.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:ii(i||Si)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),l=t.getLineDashOffset(),a=t.getLineJoin(),h=t.getWidth(),u=t.getMiterLimit(),f=r||fs;this.strokeState_={lineCap:s!==void 0?s:mr,lineDash:this.pixelRatio_===1?f:f.map(_=>_*this.pixelRatio_),lineDashOffset:(l||gs)*this.pixelRatio_,lineJoin:a!==void 0?a:Bn,lineWidth:(h!==void 0?h:ys)*this.pixelRatio_,miterLimit:u!==void 0?u:ms,strokeStyle:ii(i||_s)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/i,l[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:ii(x||Si)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),w=i.getLineCap(),C=i.getLineDash(),b=i.getLineDashOffset(),E=i.getLineJoin(),M=i.getWidth(),k=i.getMiterLimit();this.textStrokeState_={lineCap:w!==void 0?w:mr,lineDash:C||fs,lineDashOffset:b||gs,lineJoin:E!==void 0?E:Bn,lineWidth:M!==void 0?M:ys,miterLimit:k!==void 0?k:ms,strokeStyle:ii(x||_s)}}const s=e.getFont(),r=e.getOffsetX(),l=e.getOffsetY(),a=e.getRotateWithView(),h=e.getRotation(),u=e.getScaleArray(),f=e.getText(),_=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:s!==void 0?s:oc,textAlign:_!==void 0?_:ps,textBaseline:p!==void 0?p:_r},this.text_=f!==void 0?Array.isArray(f)?f.reduce((x,w,C)=>x+=C%2?" ":w,""):f:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const ux=cx,ti=.5;function dx(n,e,t,i,s,r,l){const a=n[0]*ti,h=n[1]*ti,u=Tt(a,h);u.imageSmoothingEnabled=!1;const f=u.canvas,_=new ux(u,ti,s,null,l),p=t.length,x=Math.floor((256*256*256-1)/p),w={};for(let b=1;b<=p;++b){const E=t[b-1],M=E.getStyleFunction()||i;if(!i)continue;let k=M(E,r);if(!k)continue;Array.isArray(k)||(k=[k]);const F=(b*x).toString(16).padStart(7,"#00000");for(let A=0,j=k.length;A<j;++A){const V=k[A],H=V.getGeometryFunction()(E);if(!H||!vt(s,H.getExtent()))continue;const z=V.clone(),se=z.getFill();se&&se.setColor(F);const ne=z.getStroke();ne&&(ne.setColor(F),ne.setLineDash(null)),z.setText(void 0);const re=V.getImage();if(re&&re.getOpacity()!==0){const $=re.getImageSize();if(!$)continue;const ue=Tt($[0],$[1],void 0,{alpha:!1}),Se=ue.canvas;ue.fillStyle=F,ue.fillRect(0,0,Se.width,Se.height),z.setImage(new rs({img:Se,imgSize:$,anchor:re.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:re.getOrigin(),opacity:1,size:re.getSize(),scale:re.getScale(),rotation:re.getRotation(),rotateWithView:re.getRotateWithView()}))}const Ce=z.getZIndex()||0;let te=w[Ce];te||(te={},w[Ce]=te,te.Polygon=[],te.Circle=[],te.LineString=[],te.Point=[]);const ie=H.getType();if(ie==="GeometryCollection"){const $=H.getGeometriesArrayRecursive();for(let ue=0,Se=$.length;ue<Se;++ue){const me=$[ue];te[me.getType().replace("Multi","")].push(me,z)}}else te[ie.replace("Multi","")].push(H,z)}}const C=Object.keys(w).map(Number).sort(on);for(let b=0,E=C.length;b<E;++b){const M=w[C[b]];for(const k in M){const P=M[k];for(let F=0,A=P.length;F<A;F+=2){_.setStyle(P[F+1]);for(let j=0,V=e.length;j<V;++j)_.setTransform(e[j]),_.drawGeometry(P[F])}}}return u.getImageData(0,0,f.width,f.height)}function fx(n,e,t){const i=[];if(t){const s=Math.floor(Math.round(n[0])*ti),r=Math.floor(Math.round(n[1])*ti),l=(rt(s,0,t.width-1)+rt(r,0,t.height-1)*t.width)*4,a=t.data[l],h=t.data[l+1],f=t.data[l+2]+256*(h+256*a),_=Math.floor((256*256*256-1)/e.length);f&&f%_===0&&i.push(e[f/_-1])}return i}const gx=.5,Lc={Point:Cx,LineString:xx,Polygon:Tx,MultiPoint:Sx,MultiLineString:wx,MultiPolygon:bx,GeometryCollection:vx,Circle:px};function mx(n,e){return parseInt(Ae(n),10)-parseInt(Ae(e),10)}function _x(n,e){const t=Ga(n,e);return t*t}function Ga(n,e){return gx*n/e}function px(n,e,t,i,s){const r=t.getFill(),l=t.getStroke();if(r||l){const h=n.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(r,l),h.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const h=(s||n).getBuilder(t.getZIndex(),"Text");h.setTextStyle(a),h.drawText(e,i)}}function uh(n,e,t,i,s,r,l){let a=!1;const h=t.getImage();if(h){const u=h.getImageState();u==ct.LOADED||u==ct.ERROR?h.unlistenImageChange(s):(u==ct.IDLE&&h.load(),h.listenImageChange(s),a=!0)}return yx(n,e,t,i,r,l),a}function yx(n,e,t,i,s,r){const l=t.getGeometryFunction()(e);if(!l)return;const a=l.simplifyTransformed(i,s);if(t.getRenderer())Pc(n,a,t,e);else{const u=Lc[a.getType()];u(n,a,t,e,r)}}function Pc(n,e,t,i){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let l=0,a=r.length;l<a;++l)Pc(n,r[l],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function vx(n,e,t,i,s){const r=e.getGeometriesArray();let l,a;for(l=0,a=r.length;l<a;++l){const h=Lc[r[l].getType()];h(n,r[l],t,i,s)}}function xx(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i)}const l=t.getText();if(l&&l.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(l),a.drawText(e,i)}}function wx(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i)}const l=t.getText();if(l&&l.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(l),a.drawText(e,i)}}function bx(n,e,t,i,s){const r=t.getFill(),l=t.getStroke();if(l||r){const h=n.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(r,l),h.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const h=(s||n).getBuilder(t.getZIndex(),"Text");h.setTextStyle(a),h.drawText(e,i)}}function Cx(n,e,t,i,s){const r=t.getImage(),l=t.getText();let a;if(r){if(r.getImageState()!=ct.LOADED)return;let h=n;if(s){const f=r.getDeclutterMode();if(f!=="none")if(h=s,f==="obstacle"){const _=n.getBuilder(t.getZIndex(),"Image");_.setImageStyle(r,a),_.drawPoint(e,i)}else l&&l.getText()&&(a={})}const u=h.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawPoint(e,i)}if(l&&l.getText()){let h=n;s&&(h=s);const u=h.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,a),u.drawText(e,i)}}function Sx(n,e,t,i,s){const r=t.getImage(),l=t.getText();let a;if(r){if(r.getImageState()!=ct.LOADED)return;let h=n;if(s){const f=r.getDeclutterMode();if(f!=="none")if(h=s,f==="obstacle"){const _=n.getBuilder(t.getZIndex(),"Image");_.setImageStyle(r,a),_.drawMultiPoint(e,i)}else l&&l.getText()&&(a={})}const u=h.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawMultiPoint(e,i)}if(l&&l.getText()){let h=n;s&&(h=s);const u=h.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,a),u.drawText(e,i)}}function Tx(n,e,t,i,s){const r=t.getFill(),l=t.getStroke();if(r||l){const h=n.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(r,l),h.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const h=(s||n).getBuilder(t.getZIndex(),"Text");h.setTextStyle(a),h.drawText(e,i)}}class Ex extends mc{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Bt(),this.wrappedRenderedExtent_=Bt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const s=t.extent,r=t.viewState,l=r.center,a=r.resolution,h=r.projection,u=r.rotation,f=h.getExtent(),_=this.getLayer().getSource(),p=t.pixelRatio,x=t.viewHints,w=!(x[yt.ANIMATING]||x[yt.INTERACTING]),C=this.compositionContext_,b=Math.round(t.size[0]*p),E=Math.round(t.size[1]*p),M=_.getWrapX()&&h.canWrapX(),k=M?He(f):null,P=M?Math.ceil((s[2]-f[2])/k)+1:1;let F=M?Math.floor((s[0]-f[0])/k):0;do{const A=this.getRenderTransform(l,a,u,p,b,E,F*k);e.execute(C,1,A,u,w,void 0,i)}while(++F<P)}setupCompositionContext_(){if(this.opacity_!==1){const e=Tt(this.context.canvas.width,this.context.canvas.height,Kl);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Nr(this.compositionContext_),Kl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];np(this.pixelTransform,1/i,1/i),$a(this.inversePixelTransform,this.pixelTransform);const r=Dh(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const l=this.context,a=l.canvas,h=this.replayGroup_,u=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!u||u.isEmpty()))return null;const f=Math.round(e.size[0]*i),_=Math.round(e.size[1]*i);a.width!=f||a.height!=_?(a.width=f,a.height=_,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||l.clearRect(0,0,f,_),this.preRender(l,e);const p=e.viewState;p.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let x=!1,w=!0;if(s.extent&&this.clipping){const C=Ji(s.extent);w=vt(C,e.extent),x=w&&!On(C,e.extent),x&&this.clipUnrotated(this.compositionContext_,e,C)}return w&&this.renderWorlds(h,e),x&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(l,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];gt(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,l=this.renderedRotation_,a=this.renderedProjection_,h=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],_=i[0]*ti,p=i[1]*ti;f.push(this.getRenderTransform(s,r,l,ti,_,p,0).slice());const x=u.getSource(),w=a.getExtent();if(x.getWrapX()&&a.canWrapX()&&!On(w,h)){let C=h[0];const b=He(w);let E=0,M;for(;C<w[0];)--E,M=b*E,f.push(this.getRenderTransform(s,r,l,ti,_,p,M).slice()),C+=b;for(E=0,C=h[2];C>w[2];)++E,M=b*E,f.push(this.getRenderTransform(s,r,l,ti,_,p,M).slice()),C-=b}this.hitDetectionImageData_=dx(i,f,this.renderedFeatures_,u.getStyleFunction(),h,r,l)}t(fx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,s,r){if(!this.replayGroup_)return;const l=t.viewState.resolution,a=t.viewState.rotation,h=this.getLayer(),u={},f=function(x,w,C){const b=Ae(x),E=u[b];if(E){if(E!==!0&&C<E.distanceSq){if(C===0)return u[b]=!0,r.splice(r.lastIndexOf(E),1),s(x,h,w);E.geometry=w,E.distanceSq=C}}else{if(C===0)return u[b]=!0,s(x,h,w);r.push(u[b]={feature:x,layer:h,geometry:w,distanceSq:C,callback:s})}};let _;const p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(x=>_=x.forEachFeatureAtCoordinate(e,l,a,i,f,x===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(w=>w.value):null)),_}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const s=e.viewHints[yt.ANIMATING],r=e.viewHints[yt.INTERACTING],l=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!l&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,u=e.viewState,f=u.projection,_=u.resolution,p=e.pixelRatio,x=t.getRevision(),w=t.getRenderBuffer();let C=t.getRenderOrder();C===void 0&&(C=mx);const b=u.center.slice(),E=Qa(h,w*_),M=E.slice(),k=[E.slice()],P=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!On(P,e.extent)){const te=He(P),ie=Math.max(He(E)/2,te);E[0]=P[0]-ie,E[2]=P[2]+ie,Bh(b,f);const $=Lh(k[0],f);$[0]<P[0]&&$[2]<P[2]?k.push([$[0]+te,$[1],$[2]+te,$[3]]):$[0]>P[0]&&$[2]>P[2]&&k.push([$[0]-te,$[1],$[2]-te,$[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==C&&On(this.wrappedRenderedExtent_,E))return Gi(this.renderedExtent_,M)||(this.hitDetectionImageData_=null,this.renderedExtent_=M),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const F=new oh(Ga(_,p),E,_,p);let A;this.getLayer().getDeclutter()&&(A=new oh(Ga(_,p),E,_,p));let j;for(let te=0,ie=k.length;te<ie;++te)i.loadFeatures(k[te],_,f);const V=_x(_,p);let H=!0;const z=te=>{let ie;const $=te.getStyleFunction()||t.getStyleFunction();if($&&(ie=$(te,_)),ie){const ue=this.renderFeature(te,V,ie,F,j,A);H=H&&!ue}},se=Uh(E),ne=i.getFeaturesInExtent(se);C&&ne.sort(C);for(let te=0,ie=ne.length;te<ie;++te)z(ne[te]);this.renderedFeatures_=ne,this.ready=H;const re=F.finish(),Ce=new ch(E,_,p,i.getOverlaps(),re,t.getRenderBuffer());return A&&(this.declutterExecutorGroup=new ch(E,_,p,i.getOverlaps(),A.finish(),t.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=C,this.renderedExtent_=M,this.wrappedRenderedExtent_=E,this.renderedCenter_=b,this.renderedProjection_=f,this.replayGroup_=Ce,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,s,r,l){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let h=0,u=i.length;h<u;++h)a=uh(s,e,i[h],t,this.boundHandleStyleImageChange_,r,l)||a;else a=uh(s,e,i,t,this.boundHandleStyleImageChange_,r,l);return a}}const Mx=Ex;class Dx extends zv{constructor(e){super(e)}createRenderer(){return new Mx(this)}}const Dn=Dx;class kx{constructor(e){this.rbush_=new Dc(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ae(t)]=i}load(e,t){const i=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const l=e[s],a=t[s],h={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:a};i[s]=h,this.items_[Ae(a)]=h}this.rbush_.load(i)}remove(e){const t=Ae(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ae(t)],s=[i.minX,i.minY,i.maxX,i.maxY];ls(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let s=0,r=e.length;s<r;s++)if(i=t(e[s]),i)return i;return i}isEmpty(){return os(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return si(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const dh=kx,Xt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Ox(n,e){return[[-1/0,-1/0,1/0,1/0]]}let Rx=!1;function Ix(n,e,t,i,s,r,l){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,s):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Rx,a.onload=function(h){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();let f;u=="json"||u=="text"?f=a.responseText:u=="xml"?(f=a.responseXML,f||(f=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(f=a.response),f?r(e.readFeatures(f,{extent:t,featureProjection:s}),e.readProjection(f)):l()}else l()},a.onerror=l,a.send()}function fh(n,e){return function(t,i,s,r,l){const a=this;Ix(n,e,t,i,s,function(h,u){a.addFeatures(h),r!==void 0&&r(h)},l||Nn)}}class Li extends ai{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Lx extends Cc{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Nn,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Te(this.format_,7),this.loader_=fh(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Ox;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new dh:null,this.loadedExtentsRtree_=new dh,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!t&&i===void 0&&(i=new Kt(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ae(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Li(Xt.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Oe(t,xe.CHANGE,this.handleFeatureChange_,this),Oe(t,jn.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=t),i&&(Te(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],s=[];for(let r=0,l=e.length;r<l;r++){const a=e[r],h=Ae(a);this.addToIndex_(h,a)&&i.push(a)}for(let r=0,l=i.length;r<l;r++){const a=i[r],h=Ae(a);this.setupChangeEvents_(h,a);const u=a.getGeometry();if(u){const f=u.getExtent();t.push(f),s.push(a)}else this.nullGeometryFeatures_[h]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(Xt.ADDFEATURE))for(let r=0,l=i.length;r<l;r++)this.dispatchEvent(new Li(Xt.ADDFEATURE,i[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Xt.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Xt.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Ot.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Ot.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ze);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Li(Xt.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const r=t(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),os(this.nullGeometryFeatures_)||bi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=cp(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const i=e[0],s=e[1];let r=null;const l=[NaN,NaN];let a=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||Yn,this.featuresRtree_.forEachInExtent(h,function(u){if(t(u)){const f=u.getGeometry(),_=a;if(a=f.closestPointXY(i,s,l,a),a<_){r=u;const p=Math.sqrt(a);h[0]=i-p,h[1]=s-p,h[2]=i+p,h[3]=s+p}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ae(t),s=t.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const l=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const r=t.getId();if(r!==void 0){const l=r.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Li(Xt.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ae(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&os(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,i);for(let l=0,a=r.length;l<a;++l){const h=r[l];s.forEachInExtent(h,function(f){return On(f.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Li(Xt.FEATURESLOADSTART)),this.loader_.call(this,h,t,i,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new Li(Xt.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Li(Xt.FEATURESLOADERROR))}),s.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(s){if(ls(s.extent,e))return i=s,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Ae(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ae(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Ze),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Li(Xt.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Te(this.format_,7),this.url_=e,this.setLoader(fh(e,this.format_))}}const kn=Lx;class Wr extends zi{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new Wr(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const r=this.flatCoordinates,l=e-r[0],a=t-r[1],h=l*l+a*a;if(h<s){if(h===0)for(let u=0;u<this.stride;++u)i[u]=r[u];else{const u=this.getRadius()/Math.sqrt(h);i[0]=r[0]+u*l,i[1]=r[1]+u*a;for(let f=2;f<this.stride;++f)i[f]=r[f]}return i.length=this.stride,h}return s}containsXY(e,t){const i=this.flatCoordinates,s=e-i[0],r=t-i[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return si(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(vt(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:to(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+i;for(let r=1;r<t;++r)s[t+r]=e[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=Kh(s,0,e,this.stride);s[r++]=s[0]+t;for(let l=1,a=this.stride;l<a;++l)s[r++]=s[l];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),s=this.getStride();this.setCenter(fo(i,0,i.length,s,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),s=this.getStride();this.setCenter(Hh(i,0,i.length,s,e,t,i)),this.changed()}}Wr.prototype.transform;const Fc=Wr;class vr extends Zh{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ze),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Oe(this.geometries_[e],xe.CHANGE,this.changed,this))}clone(){const e=new vr(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,s){if(s<cn(this.getExtent(),e,t))return s;const r=this.geometries_;for(let l=0,a=r.length;l<a;++l)s=r[l].closestPointXY(e,t,i,s);return s}containsXY(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(e,t))return!0;return!1}computeExtent(e){bs(e);const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)Rh(e,t[i].getExtent());return e}getGeometries(){return gh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let s=!1;for(let r=0,l=i.length;r<l;++r){const a=i[r],h=a.getSimplifiedGeometry(e);t.push(h),h!==a&&(s=!0)}if(s){const r=new vr(null);return r.setGeometriesArray(t),r}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(e,t);this.changed()}scale(e,t,i){i||(i=ln(this.getExtent()));const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)s[r].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(gh(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function gh(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const Px=vr;function Ac(n,e,t,i,s,r,l){let a,h;const u=(t-e)/i;if(u===1)a=e;else if(u===2)a=e,h=s;else if(u!==0){let f=n[e],_=n[e+1],p=0;const x=[0];for(let b=e+i;b<t;b+=i){const E=n[b],M=n[b+1];p+=Math.sqrt((E-f)*(E-f)+(M-_)*(M-_)),x.push(p),f=E,_=M}const w=s*p,C=N_(x,w);C<0?(h=(w-x[-C-2])/(x[-C-1]-x[-C-2]),a=e+(-C-2)*i):a=e+C*i}l=l>1?l:2,r=r||new Array(l);for(let f=0;f<l;++f)r[f]=a===void 0?NaN:h===void 0?n[a+f]:Lt(n[a+f],n[a+i+f],h);return r}function za(n,e,t,i,s,r){if(t==e)return null;let l;if(s<n[e+i-1])return r?(l=n.slice(e,e+i),l[i-1]=s,l):null;if(n[t-1]<s)return r?(l=n.slice(t-i,t),l[i-1]=s,l):null;if(s==n[e+i-1])return n.slice(e,e+i);let a=e/i,h=t/i;for(;a<h;){const p=a+h>>1;s<n[(p+1)*i-1]?h=p:a=p+1}const u=n[a*i-1];if(s==u)return n.slice((a-1)*i,(a-1)*i+i);const f=n[(a+1)*i-1],_=(s-u)/(f-u);l=[];for(let p=0;p<i-1;++p)l.push(Lt(n[(a-1)*i+p],n[a*i+p],_));return l.push(s),l}function Fx(n,e,t,i,s,r,l){if(l)return za(n,e,t[t.length-1],i,s,r);let a;if(s<n[i-1])return r?(a=n.slice(0,i),a[i-1]=s,a):null;if(n[n.length-1]<s)return r?(a=n.slice(n.length-i),a[i-1]=s,a):null;for(let h=0,u=t.length;h<u;++h){const f=t[h];if(e!=f){if(s<n[e+i-1])return null;if(s<=n[f-1])return za(n,e,f,i,s,!1);e=f}}return null}class xr extends zi{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?bi(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new xr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<cn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(go(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,s))}forEachSegment(e){return ec(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,za(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ac(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Ic(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new xr(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ar(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fr(this.flatCoordinates,0,e,this.stride),this.changed()}}const an=xr;class wr extends zi{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let s=this.getLayout();const r=e,l=[],a=[];for(let h=0,u=r.length;h<u;++h){const f=r[h];h===0&&(s=f.getLayout()),bi(l,f.getFlatCoordinates()),a.push(l.length)}this.setFlatCoordinates(s,l),this.ends_=a}}appendLineString(e){this.flatCoordinates?bi(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new wr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<cn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),po(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,s))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Fx(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return cs(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new an(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,s=[];let r=0;for(let l=0,a=t.length;l<a;++l){const h=t[l],u=new an(e.slice(r,h),i);s.push(u),r=h}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let l=0,a=s.length;l<a;++l){const h=s[l],u=Ac(t,i,h,r,.5);bi(e,u),i=h}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=iy(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new wr(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return hy(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=yo(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const jc=wr;class Bo extends zi{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?bi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new Bo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){if(s<cn(this.getExtent(),e,t))return s;const r=this.flatCoordinates,l=this.stride;for(let a=0,h=r.length;a<h;a+=l){const u=Ci(e,t,r[a],r[a+1]);if(u<s){s=u;for(let f=0;f<l;++f)i[f]=r[a+f];i.length=l}}return s}getCoordinates(){return Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Bi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,s=[];for(let r=0,l=e.length;r<l;r+=i){const a=new Bi(e.slice(r,r+i),t);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let s=0,r=t.length;s<r;s+=i){const l=t[s],a=t[s+1];if(eo(e,l,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fr(this.flatCoordinates,0,e,this.stride),this.changed()}}const Yc=Bo;function Ax(n,e,t,i){const s=[];let r=Bt();for(let l=0,a=t.length;l<a;++l){const h=t[l];r=Oh(n,e,h[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=h[h.length-1]}return s}class br extends zi{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let s=this.getLayout();const r=e,l=[],a=[];for(let h=0,u=r.length;h<u;++h){const f=r[h];h===0&&(s=f.getLayout());const _=l.length,p=f.getEnds();for(let x=0,w=p.length;x<w;++x)p[x]+=_;bi(l,f.getFlatCoordinates()),a.push(p)}t=s,e=l,i=a}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;bi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,r=t.length;s<r;++s)t[s]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const i=new br(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,s){return s<cn(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qp(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ey(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return oy(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return ry(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Wl(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Ia(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Ax(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ly(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Yc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;dy(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Wl(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=sy(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new br(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const i=this.endss_[e].slice(),s=i[i.length-1];if(t!==0)for(let r=0,l=i.length;r<l;++r)i[r]-=t;return new ds(this.flatCoordinates.slice(t,s),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let l=0,a=i.length;l<a;++l){const h=i[l].slice(),u=h[h.length-1];if(r!==0)for(let _=0,p=h.length;_<p;++_)h[_]-=r;const f=new ds(t.slice(r,u),e,h);s.push(f),r=u}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return cy(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=ty(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const Nc=br,jx="/assets/—Pngtree—car top view image_8931232-52668fbb.png",Yx="/assets/north-af71ca06.png",Nx="/assets/child-baby-boy-girl-svgrepo-com-7900af0a.png",$s={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Qs extends ai{constructor(e,t){super(e),this.feature=t}}function Bx(n,e){const t=[];for(let i=0;i<e.length;++i){const r=e[i].getGeometry();Bc(n,r,t)}return t}function er(n,e){return Ci(n[0],n[1],e[0],e[1])}function In(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function tr(n,e,t){let i,s;e<t?(i=e,s=t):(i=t,s=e);const r=Math.ceil(i),l=Math.floor(s);if(r>l){const h=Ln(n,i),u=Ln(n,s);return er(h,u)}let a=0;if(i<r){const h=Ln(n,i),u=In(n,r);a+=er(h,u)}if(l<s){const h=In(n,l),u=Ln(n,s);a+=er(h,u)}for(let h=r;h<l-1;++h){const u=In(n,h),f=In(n,h+1);a+=er(u,f)}return a}function Bc(n,e,t){if(e instanceof an){ir(n,e.getCoordinates(),!1,t);return}if(e instanceof jc){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s)ir(n,i[s],!1,t);return}if(e instanceof ds){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s)ir(n,i[s],!0,t);return}if(e instanceof Nc){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s){const l=i[s];for(let a=0,h=l.length;a<h;++a)ir(n,l[a],!0,t)}return}if(e instanceof Px){const i=e.getGeometries();for(let s=0;s<i.length;++s)Bc(n,i[s],t);return}}const va={index:-1,endIndex:NaN};function Vx(n,e,t,i){const s=n[0],r=n[1];let l=1/0,a=-1,h=NaN;for(let _=0;_<e.targets.length;++_){const p=e.targets[_],x=p.coordinates;let w=1/0,C;for(let b=0;b<x.length-1;++b){const E=x[b],M=x[b+1],k=Vc(s,r,E,M);k.squaredDistance<w&&(w=k.squaredDistance,C=b+k.along)}w<l&&(l=w,p.ring&&e.targetIndex===_&&(p.endIndex>p.startIndex?C<p.startIndex&&(C+=x.length):p.endIndex<p.startIndex&&C>p.startIndex&&(C-=x.length)),h=C,a=_)}const u=e.targets[a];let f=u.ring;if(e.targetIndex===a&&f){const _=Ln(u.coordinates,h),p=t.getPixelFromCoordinate(_);Nh(p,e.startPx)>i&&(f=!1)}if(f){const _=u.coordinates,p=_.length,x=u.startIndex,w=h;if(x<w){const C=tr(_,x,w);tr(_,x,w-p)<C&&(h-=p)}else{const C=tr(_,x,w);tr(_,x,w+p)<C&&(h+=p)}}return va.index=a,va.endIndex=h,va}function ir(n,e,t,i){const s=n[0],r=n[1];for(let l=0,a=e.length-1;l<a;++l){const h=e[l],u=e[l+1],f=Vc(s,r,h,u);if(f.squaredDistance===0){const _=l+f.along;i.push({coordinates:e,ring:t,startIndex:_,endIndex:_});return}}}const xa={along:0,squaredDistance:0};function Vc(n,e,t,i){const s=t[0],r=t[1],l=i[0],a=i[1],h=l-s,u=a-r;let f=0,_=s,p=r;return(h!==0||u!==0)&&(f=rt(((n-s)*h+(e-r)*u)/(h*h+u*u),0,1),_+=h*f,p+=u*f),xa.along=f,xa.squaredDistance=Pr(Ci(n,e,_,p),10),xa}function Ln(n,e){const t=n.length;let i=Math.floor(e);const s=e-i;i>=t?i-=t:i<0&&(i+=t);let r=i+1;r>=t&&(r-=t);const l=n[i],a=l[0],h=l[1],u=n[r],f=u[0]-a,_=u[1]-h;return[a+f*s,h+_*s]}class Wx extends Gn{constructor(e){const t=e;t.stopDown||(t.stopDown=Vn),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=zx(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Yn,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const s=this.mode_;if(s==="Circle")i=function(r,l,a){const h=l||new Fc([NaN,NaN]),u=Ht(r[0]),f=Yh(u,Ht(r[r.length-1]));return h.setCenterAndRadius(u,Math.sqrt(f),this.geometryLayout_),h};else{let r;s==="Point"?r=Bi:s==="LineString"?r=an:s==="Polygon"&&(r=ds),i=function(l,a,h){return a?s==="Polygon"?l[0].length?a.setCoordinates([l[0].concat([l[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(l,this.geometryLayout_):a=new r(l,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Dn({source:new kn({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Gx(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Do,this.freehandCondition_,e.freehand?this.freehandCondition_=Ba:this.freehandCondition_=e.freehandCondition?e.freehandCondition:uc,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Ya.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Ba:t=e:t=n0,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===xe.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Ye.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ye.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ye.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Ye.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Ye.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Ye.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Ye.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new xi(Ye.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),r=Sa([i,s]),l=this.traceSource_.getFeaturesInExtent(r);if(l.length===0)return;const a=Bx(e.coordinate,l);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,s=e.startIndex<=t;i===s?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const s=Math.ceil(e);let r=Math.floor(t);r===t&&(r-=1),i=r-s+1}else{const s=Math.floor(e);let r=Math.ceil(t);r===t&&(r+=1),i=s-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const s=[];if(t<i){const r=Math.ceil(t);let l=Math.floor(i);l===i&&(l-=1);for(let a=r;a<=l;++a)s.push(In(e.coordinates,a))}else{const r=Math.floor(t);let l=Math.ceil(i);l===i&&(l+=1);for(let a=r;a>=l;--a)s.push(In(e.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Nh(t.startPx,e.pixel)<this.snapTolerance_)return;const i=Vx(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const h=t.targets[t.targetIndex];this.removeTracedCoordinates_(h.startIndex,h.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}t.targetIndex=i.index;const s=t.targets[t.targetIndex];s.endIndex=i.endIndex;const r=Ln(s.coordinates,s.endIndex),l=this.getMap().getPixelFromCoordinate(r);e.coordinate=r,e.pixel=[Math.round(l[0]),Math.round(l[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,s=t[0]-i[0],r=t[1]-i[1],l=s*s+r*r;if(this.shouldHandle_=this.freehand_?l>this.squaredClickTolerance_:l<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const l=this.mode_;if(l==="Point")i=!0;else if(l==="Circle")i=this.sketchCoords_.length===2;else if(l==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(l==="Polygon"){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],t?r=[a[0][0]]:r=[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let h=0,u=r.length;h<u;h++){const f=r[h],_=a.getPixelFromCoordinate(f),p=e[0]-_[0],x=e[1]-_[1],w=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+x*x)<=w,i){this.finishCoordinate_=f;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new wi(new Bi(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new wi);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new an(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=fr(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new wi(new an(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new wi,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new Qs($s.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),r=fr(this.geometryLayout_);let l,a;for(;e.length<r;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(l=this.sketchCoords_[0],a=l[l.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(l=this.sketchCoords_,a=l[l.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,r;const l=this.mode_;l==="LineString"||l==="Circle"?(this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),this.geometryFunction_(r,t,i)):l==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<e;++r){let l;if(s==="LineString"||s==="Circle"){if(l=this.sketchCoords_,l.splice(-2,1),l.length>=2){this.finishCoordinate_=l[l.length-2].slice();const a=this.finishCoordinate_.slice();l[l.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(l,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){l=this.sketchCoords_[0],l.splice(-2,1);const a=this.sketchLine_.getGeometry();if(l.length>=2){const h=l[l.length-2].slice();l[l.length-1]=h,this.createOrUpdateSketchPoint_(h)}a.setCoordinates(l),this.geometryFunction_(this.sketchCoords_,t,i)}if(l.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,s),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Yc([t])):this.type_==="MultiLineString"?e.setGeometry(new jc([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Nc([t])),this.dispatchEvent(new Qs($s.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Qs($s.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&s.shift(),s.pop();for(let l=0;l<e.length;l++)this.addToDrawing_(e[l]);const r=e[e.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new wi(new Bi(s)),this.updateSketchFeatures_(),this.dispatchEvent(new Qs($s.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Gx(){const n=jv();return function(e,t){return n[e.getGeometry().getType()]}}function zx(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}const Ux=Wx,Xx={name:"MapComponent",props:["objects","showPositionOrNot","zoomOnPosition","vector","isVector","isDraw","removeDraw","addLimit","isShowLimit","showLimitObject"],data(){return{map:null,marker:null,vectorLayer:null,layers:[],draw:null,drawCoordinates:null,drawRadius:null,drawVector:null,showVectorLayer:null,showLineVectorLayer:null,limitVector:null}},watch:{objects:function(n,e){this.removeMarker();for(let t=0;t<(n==null?void 0:n.length);t++)this.handleMapLayer(n,e,t)},isVector:function(){this.isVector?(this.showLineVector(this.vector),this.showVector(this.vector)):this.clearShowVector()},"zoomOnPosition.long":function(n,e){this.zoomOnPosition.long!=0&&this.zoomOnPosition.long!=null?this.zoomToPoint(this.zoomOnPosition.long,this.zoomOnPosition.lat,17):(this.zoomOnPosition.long==0&&kt.error("the position is wrong!"),this.zoomToPoint(51.389,35.68,7))},isDraw:function(){this.isDraw?this.drawCircle():this.cleanDraw()},removeDraw:function(){this.map.removeLayer(this.drawVector)},addLimit:function(){localStorage.setItem("centerCoords",JSON.stringify(this.drawCoordinates)),localStorage.setItem("radius",JSON.stringify(this.drawRadius))},isShowLimit:function(){this.isShowLimit?(this.showLimit(),this.zoomToPoint(this.showLimitObject.longitude,this.showLimitObject.latitude,10)):this.removeLimit()}},mounted(){this.initMap()},methods:{initMap(){const n=new R0({target:"map",layers:[new $0({source:new Ev})],view:new ei({center:yn([51.389,35.6892]),zoom:7})});this.map=n;const e=document.querySelector(".ol-zoom"),t=document.querySelector(".ol-attribution"),i=document.createElement("a");i.textContent="Designed & Developed by xssirr17 | All rights reserved by GMK",i.style.padding="2px",i.style.fontSize="13px",t.textContent="",t.appendChild(i),e.style.left="auto",e.style.right="10px"},handleMapLayer(n,e,t){var i,s,r,l;this.showPositionOrNot[t]==!0&&((i=n[t])==null?void 0:i.longitude)!=0&&this.addMarker((s=n[t])==null?void 0:s.longitude,(r=n[t])==null?void 0:r.latitude,n[t].type,this.calculateRotation((l=n[t])==null?void 0:l.angle),this.generateLable(n[t]))},showLineVector(n){this.showLineVectorLayer=new Dn({source:new kn,style:new en({stroke:new An({color:"red",width:5})})}),this.map.addLayer(this.showLineVectorLayer);let e=[];for(let s=0;s<n.length;s++)n[s][0]!=0&&n[s][1]!=0&&e.push(yn([n[s][0],n[s][1]]));const t=new an(e),i=new wi({geometry:t});this.showLineVectorLayer.getSource().addFeature(i),this.map.getView().fit(t,{padding:[50,50,50,50],minResolution:10})},showVector(n){this.showVectorLayer=new Dn({source:new kn,style:i=>{const s=i.get("rotation");return new en({image:new rs({src:Yx,scale:.015,rotation:s})})}}),this.map.addLayer(this.showVectorLayer);let e=[];for(let i=0;i<n.length;i++)if(n[i][0]!==0&&n[i][1]!==0){const s=yn([n[i][0],n[i][1]]),r=new wi({geometry:new Bi(s)});r.set("rotation",this.calculateRotation(n[i][2])),e.push(r)}this.showVectorLayer.getSource().addFeatures(e);const t=this.showVectorLayer.getSource().getExtent();this.map.getView().fit(t,{padding:[50,50,50,50],minResolution:10})},clearShowVector(){this.map.removeLayer(this.showVectorLayer),this.map.removeLayer(this.showLineVectorLayer),this.showVectorLayer=null,this.showLineVectorLayer=null},createStyle(n){return new en({text:new Wa({font:"16px sans-serif",text:n,backgroundFill:new hn({color:[255,250,250,1]}),padding:[10,10,10,10],radius:40})})},addMarker(n,e,t,i,s="null"){let r=t=="human"?Nx:jx,l=t=="human"?.15:.05,a=i==0||t=="human"?new rs({src:r,scale:l}):new rs({src:r,scale:l,rotation:i});const h=new en({text:new Wa({font:"16px sans-serif",textAlign:"left",text:s,backgroundFill:new hn({color:[255,250,250,1]}),padding:[10,10,10,10],offsetX:50}),image:a}),u=new wi({geometry:new Bi(yn([n,e]))});u.setStyle(h);const f=new kn({features:new Kt([u])}),_=new Dn({source:f});this.map.addLayer(_),this.vectorLayer=_,this.layers.push(_),this.marker=u},changeRotation(n,e){this.map.getView().animate({rotation:n,duration:e})},removeMarker(){(this.marker||this.vectorLayer)&&(this.layers.forEach(n=>{this.map.removeLayer(n)}),this.layers=[],this.marker=null,this.vectorLayer=null)},zoomToPoint(n,e,t){this.map.getView().animate({center:yn([n,e]),zoom:t,duration:500})},drawCircle(){const n=new kn({wrapX:!1});this.drawVector=new Dn({source:n}),this.map.addLayer(this.drawVector),this.draw=new Ux({source:n,type:"Circle"}),this.map.addInteraction(this.draw),this.draw.on("drawend",e=>{const i=e.feature.getGeometry();this.drawCoordinates=Np(i.getCenter()),this.drawRadius=i.getRadius()})},cleanDraw(){this.map.removeInteraction(this.draw),this.draw=null},showLimit(){const n=new kn,e=new wi({geometry:new Fc(yn([+this.showLimitObject.longitude,+this.showLimitObject.latitude]),+this.showLimitObject.radius)});n.addFeature(e);const t=new Dn({source:n});this.limitVector=t,this.map.addLayer(t)},removeLimit(){this.map.removeLayer(this.limitVector),this.limitVector=null},calculateRotation(n){return parseInt(+n)*.0174532925*-1},calculateRotationMap(n){return parseInt(+n)*.0174532925-.8153981634},generateLable(n){return(n==null?void 0:n.type)+" : "+(n==null?void 0:n.speed)+` kph
longitude : `+(n==null?void 0:n.longitude)+`
latitude : `+(n==null?void 0:n.latitude)+`
time : `+new Date(n==null?void 0:n.time).toLocaleString()}}},Hx={id:"map",class:"map-container"};function Zx(n,e,t,i,s,r){return ve(),Fe("div",Hx)}const Kx=Mr(Xx,[["render",Zx],["__scopeId","data-v-890b3308"]]),Ft=n=>(Er("data-v-7f8e5f97"),n=n(),Tr(),n),qx={class:"search"},Jx=Ft(()=>oe("i",{class:"fa fa-add"},null,-1)),$x=[Jx],Qx=Ft(()=>oe("a",{href:"/",class:"addObject"},[oe("i",{class:"fa fa-refresh"})],-1)),e1={class:"scroll"},t1={class:"titleIconsOfTable titleItem"},i1=Ft(()=>oe("i",{class:"fa-solid fa-shoe-prints titleItem"},null,-1)),n1=Ft(()=>oe("i",{class:"fa fa-server server titleItem","aria-hidden":"true"},null,-1)),s1={class:"totals titleItem"},r1={class:"totals"},a1={class:"totals"},o1=["onUpdate:modelValue"],l1=["onUpdate:modelValue","onClick"],h1=["onClick"],c1={class:"time"},u1={class:"item1"},d1={key:0,class:"item1"},f1={key:2,class:"item1"},g1={key:3,class:"fa fa-wifi item1",style:{color:"green"}},m1={key:0,class:"fa fa-wifi item1",style:{color:"red"}},_1={key:5,class:"fa fa-exclamation-circle",style:{color:"green"}},p1={key:6,class:"label"},y1=Ft(()=>oe("i",{class:"fa fa-desktop","aria-hidden":"true"},null,-1)),v1=Ft(()=>oe("i",{class:"fa fa-edit"},null,-1)),x1=Ft(()=>oe("i",{class:"fa fa-history","aria-hidden":"true"},null,-1)),w1=Ft(()=>oe("i",{class:"fa fa-trash"},null,-1)),b1=Ft(()=>oe("i",{class:"fa fa-paper-plane","aria-hidden":"true"},null,-1)),C1=Ft(()=>oe("i",{class:"fa fa-power-off"},null,-1)),S1=Ft(()=>oe("i",{class:"fa fa-usd"},null,-1)),T1=Ft(()=>oe("i",{class:"fa fa-remove removeGap"},null,-1)),E1=Ft(()=>oe("p",null,"Do you want to add limit for this object?",-1)),M1={__name:"objectTab",emits:["showPosition"],setup(n,{emit:e}){var Ke,Pe,O;let t=Be([]);const i=Be("fa-solid fa-eye  titleItem");let s=Be();const r=Be("fa fa-angle-double-right openTab"),l=Be("mobileHidden"),a=Be(),h=Be(localStorage.getItem("user_id")),u=Be("hidden"),f=xh(),_=Be(),p=Be(0),x=Be(!0);let w=Be([]),C=Be({}),b=Be([]),E=Be([]),M=Be(0),k=Be([]),P=Be(!1),F=Be("fa-solid fa-expand"),A=Be(!1),j=Be(!1),V=Be("hidden"),H=Be(!1);t.value.length=((Ke=s.value)==null?void 0:Ke.length)??0,b.value.length=((Pe=s.value)==null?void 0:Pe.length)??0,E.value.length=((O=s.value)==null?void 0:O.length)??0;let z=Be({}),se=Be(!1);const ne=()=>{Se(),F.value=="fa-solid fa-expand"?(Zt.push("/draw"),F.value="fa fa-stop",A.value=!0):(Zt.push("/"),V.value="DrawContainer",l.value="mobileHidden",F.value="fa-solid fa-expand",A.value=!1)},re=()=>{V.value="hidden",j.value=!0},Ce=()=>{H.value=!0,setTimeout(()=>{let R=localStorage.getItem("centerCoords");R=JSON.parse(R);let N=localStorage.getItem("radius");_.value&&$n.post("/user/addLimit",{longitude:R[0],latitude:R[1],radius:JSON.parse(N),object_id:_.value}).then(W=>{W.data.code!=200?kt.error("somthing went wrong when adding limit to object",{autoClose:3e3}):W.data.code==200&&kt.success("object limited successfully",{autoClose:3e3})}).catch(W=>{kt.error("somthing went wrong",{autoClose:3e3})}),localStorage.removeItem("centerCoords"),localStorage.removeItem("radius"),re()},1e3)},te=()=>{let R;for(let N=0;N<s.value.length;N++)if(s.value[N].object_id==_.value){R=s.value[N].status;break}R=="disable"?$n.post("/user/enableObject",{object_id:_.value,gps_imei:a.value}).then(N=>{N.data.code!=200?kt.error("somthing went wrong when enabling object",{autoClose:3e3}):N.data.code==200&&kt.success("object enabled successfully",{autoClose:3e3})}).catch(N=>{kt.error("somthing went wrong",{autoClose:3e3})}):$n.post("/user/disableObject",{object_id:_.value,gps_imei:a.value}).then(N=>{N.data.code!=200?kt.error("somthing went wrong when disabling object",{autoClose:3e3}):N.data.code==200&&kt.success("object disabled successfully",{autoClose:3e3})}).catch(N=>{kt.error("somthing went wrong",{autoClose:3e3})})};nr(E.value,()=>{for(let R=0;R<E.value.length;R++)b.value[R]=E.value[R]}),nr(f,()=>{if(f.path.startsWith("/showLimit")){se.value=!0,z.value.longitude=f.params.longitude,z.value.latitude=f.params.latitude,z.value.radius=f.params.radius;for(let R=0;R<E.value.length;R++)E.value[R]=!1;C.value.long=void 0,C.value.lat=void 0,C.value.index=void 0}else se.value=!1,z.value={};f.path!="/"&&(l.value="mobileHidden",r.value="fa fa-angle-double-right openTab")}),nr(f,(R,N)=>{if(R.path=="/showGraph"){let W=localStorage.getItem("history");W=JSON.parse(W),localStorage.removeItem("history");for(let Q=0;Q<W.length;Q++)k.value.push([parseFloat(W[Q][0]),parseFloat(W[Q][1]),parseFloat(W[Q][2])]);P.value=!0}else P.value=!1});const ie=()=>{if(x.value){for(let R=0;R<s.value.length;R++)b.value[R]=!0;x.value=!1,i.value="fa-solid fa-eye-slash titleItem"}else{for(let R=0;R<s.value.length;R++)b.value[R]=!1;x.value=!0,i.value="fa-solid fa-eye titleItem"}},$=R=>{for(let N=0;N<E.value.length;N++)E.value[N]=!1;E.value[R]=!0,C.value.long&&C.value.index==R?(C.value.long=void 0,C.value.lat=void 0,C.value.index=void 0):(setInterval(()=>{C.value.index==R&&(C.value.long=s.value[R].longitude,C.value.lat=s.value[R].latitude)},100),C.value.index=R)},ue=(R,N,W)=>{_.value=R,a.value=N,u.value="edit";for(let Q=0;Q<t.value.length;Q++)t.value[Q]="objectsFirst";t.value[W]="objectsFirstActive",Zt.push("/")},Se=()=>{r.value=="fa fa-angle-double-left closeTab"?(l.value="mobileHidden",r.value="fa fa-angle-double-right openTab"):(l.value="container",r.value="fa fa-angle-double-left closeTab",Zt.push("/"))},me=()=>{h.value&&$n.post("/user/fetchUserObject",{user_id:h.value}).then(R=>{var N,W,Q;s.value=R.data.objectsData,M.value=0,w.value.length=0,w.value.length=s.value.length;for(let K=0;K<s.value.length;K++)s.value[K].remainHours>0&&M.value++,parseFloat(s.value[K].remainHours/24)>0?w.value[K]=!0:w.value[K]=!1,s.value[K].remainHours<=60*60*24*5&&(t[K]="objectsFirst");p.value=0;for(let K=0;K<((N=s.value)==null?void 0:N.length);K++)s.value[K].status=="enable"&&p.value++;for(let K=0;K<((W=s.value)==null?void 0:W.length);K++)for(let de=0;de<((Q=s.value)==null?void 0:Q.length);de++)s.value[K].gps_imei<s.value[de].gps_imei&&([s.value[K],s.value[de]]=[s.value[de],s.value[K]])}).catch(R=>{kt.error("somthing went wrong when fetchig objects",{autoClose:3e3})})};me(),setInterval(()=>{me()},1e3);const Le=Be(),U=()=>{$n.post("/user/addObject",{user_id:h.value,gps_imei:Le.value}).then(R=>{s.value.push({user_id:h.value,gps_imei:Le.value}),R.data.code==200?kt.success("object added successfully",{autoClose:3e3}):kt.error("somthing went wrong when adding object",{autoClose:3e3})}).catch(R=>{kt.error("somthing went wrong when adding object",{autoClose:3e3})})},ae=()=>{u.value="hidden",Zt.push("/");for(let R=0;R<t.value.length;R++)t.value[R]="objectsFirst"},pe=()=>{localStorage.setItem("object_id",_.value),localStorage.setItem("gps_imei",a.value),Zt.push("/removeObject")},Z=()=>{l.value="mobileHidden",r.value="fa fa-angle-double-right openTab",Zt.push("/editobject/"+_.value)},et=()=>{l.value="mobileHidden",r.value="fa fa-angle-double-right openTab"};return(R,N)=>{var Q;const W=Za("router-link");return ve(),Fe(nn,null,[oe("i",{class:Qe(r.value),"aria-hidden":"true",onClick:Se},null,2),oe("div",{class:Qe(l.value)},[oe("div",qx,[sr(oe("input",{type:"text",placeholder:"To add object enter IMEI","onUpdate:modelValue":N[0]||(N[0]=K=>Le.value=K)},null,512),[[vh,Le.value]]),oe("button",{class:"addObject",onClick:U},$x),Qx]),oe("div",e1,[oe("div",t1,[oe("i",{class:Qe(i.value),onClick:ie},null,2),i1,n1,oe("p",s1,[$e(" Totals: "),oe("strong",null,ot((Q=X(s))==null?void 0:Q.length),1)]),oe("p",r1,[$e(" Actives: "),oe("strong",null,ot(p.value),1)]),oe("p",a1,[$e(" Subscription: "),oe("strong",null,ot(X(M)),1)])]),(ve(!0),Fe(nn,null,Ha(X(s),(K,de)=>(ve(),Fe("div",{key:de,class:Qe(X(t)[de]||"objectsFirst")},[sr(oe("input",{type:"checkbox",class:"checkShow","onUpdate:modelValue":Ee=>X(b)[de]=Ee},null,8,o1),[[Ca,X(b)[de]]]),sr(oe("input",{type:"checkbox",class:"checkShow","onUpdate:modelValue":Ee=>X(E)[de]=Ee,onClick:Ee=>$(de)},null,8,l1),[[Ca,X(E)[de]]]),oe("div",{class:"objects",onClick:Ee=>ue(K.object_id,K.gps_imei,de)},[K.engin_status=="on"&&K.status=="enable"&&K.priority==1&&K.satellites>=3?(ve(),Fe("i",{key:0,class:Qe([X(Sl).state.icons[K.type],"objectLogo"]),style:{color:"green"}},null,2)):(ve(),Fe("i",{key:1,class:Qe([X(Sl).state.icons[K.type],"objectLogo"])},null,2)),oe("div",c1,[oe("p",u1,[$e(ot(K.gps_imei)+" ",1),oe("label",{for:"",class:Qe(X(w)[de]?"remainHours":"remainHours-red")},ot(parseInt(K.remainHours/24)<0?0:parseInt(K.remainHours/24))+" days",3)]),K.status=="enable"?(ve(),Fe("p",d1,ot(new Date(K.time).toLocaleString("fa-Ir")),1)):mt("",!0)]),K.status=="enable"?(ve(),Fe("p",f1,ot(K.speed)+" kph ",1)):mt("",!0),K.engin_status=="on"&&K.status=="enable"&&K.priority!=3?(ve(),Fe("i",g1)):(ve(),Fe(nn,{key:4},[K.engin_status=="off"&&K.status=="enable"?(ve(),Fe("i",m1)):mt("",!0)],64)),K.engin_status=="on"&&K.status=="enable"&&K.priority==3?(ve(),Fe("i",_1)):mt("",!0),K.status=="disable"?(ve(),Fe("p",p1,"Inactive")):mt("",!0)],8,h1)],2))),128)),oe("div",{class:Qe(u.value)},[lt(W,{to:"/object/"+_.value,class:"editItem",onClick:et},{default:Ue(()=>[y1,$e("data")]),_:1},8,["to"]),lt(W,{to:"",class:"editItem",onClick:Z},{default:Ue(()=>[v1,$e("edit ")]),_:1}),lt(W,{to:"/history/"+_.value,class:"editItem"},{default:Ue(()=>[x1,$e("history ")]),_:1},8,["to"]),lt(W,{to:"",class:"editItem",onClick:pe},{default:Ue(()=>[w1,$e("delete ")]),_:1}),lt(W,{to:"/sendCommand/"+a.value,class:"editItem"},{default:Ue(()=>[b1,$e("command ")]),_:1},8,["to"]),lt(W,{to:"",class:"editItem",onClick:te},{default:Ue(()=>[C1,$e("off/on ")]),_:1}),lt(W,{to:"/charging/"+_.value,class:"editItem"},{default:Ue(()=>[S1,$e("charging")]),_:1},8,["to"]),lt(W,{to:"",class:"editItem",onClick:ne},{default:Ue(()=>[oe("i",{class:Qe(X(F))},null,2),$e("limitation ")]),_:1}),lt(W,{to:"",class:"editItem",onClick:ae},{default:Ue(()=>[T1]),_:1})],2)])],2),oe("div",{class:Qe(X(V))},[oe("div",{class:"DrawCenter"},[E1,oe("div",{class:"DrawButtoms"},[oe("button",{onClick:Ce,class:"drawBtn"},"YES"),oe("button",{onClick:re,class:"drawBtn"},"NO")])])],2),lt(Kx,{objects:X(s),showPositionOrNot:X(b),zoomOnPosition:X(C),vector:X(k),isVector:X(P),isDraw:X(A),removeDraw:X(j),addLimit:X(H),isShowLimit:X(se),showLimitObject:X(z)},null,8,["objects","showPositionOrNot","zoomOnPosition","vector","isVector","isDraw","removeDraw","addLimit","isShowLimit","showLimitObject"])],64)}}},D1=Mr(M1,[["__scopeId","data-v-7f8e5f97"]]),k1="/assets/logo2-0cb83ffd.png",O1={mounted(){const n=this.getTheme()||this.getMediaPreference();this.setTheme(n)},data(){return{userTheme:"light-theme"}},methods:{toggleTheme(){localStorage.getItem("user-theme")==="light-theme"?this.setTheme("dark-theme"):this.setTheme("light-theme")},getTheme(){return localStorage.getItem("user-theme")},setTheme(n){localStorage.setItem("user-theme",n),this.userTheme=n,document.documentElement.className=n},getMediaPreference(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark-theme":"light-theme"}}},Wc=n=>(Er("data-v-cc38c508"),n=n(),Tr(),n),R1={for:"checkbox",class:"switch-label"},I1=Wc(()=>oe("span",null,"🌙",-1)),L1=Wc(()=>oe("span",null,"☀️",-1));function P1(n,e,t,i,s,r){return ve(),Fe("div",null,[oe("input",{onChange:e[0]||(e[0]=(...l)=>r.toggleTheme&&r.toggleTheme(...l)),id:"checkbox",type:"checkbox",class:"switch-checkbox"},null,32),oe("label",R1,[I1,L1,oe("div",{class:Qe(["switch-toggle",{"switch-toggle-checked":s.userTheme==="dark-theme"}])},null,2)])])}const F1=Mr(O1,[["render",P1],["__scopeId","data-v-cc38c508"]]),zn=n=>(Er("data-v-df5dd854"),n=n(),Tr(),n),A1={class:"topInformation"},j1=zn(()=>oe("img",{src:k1,alt:"",style:{width:"120px"}},null,-1)),Y1={class:"left"},N1=zn(()=>oe("button",{class:"icon"},[oe("i",{class:"fa-regular fa-gear"})],-1)),B1=zn(()=>oe("button",{class:"icon"},[oe("i",{class:"fa fa-dashboard","aria-hidden":"true"})],-1)),V1=zn(()=>oe("button",{class:"icon"},[oe("i",{class:"fa fa-usd","aria-hidden":"true"})],-1)),W1={class:"right"},G1={class:"user"},z1=zn(()=>oe("i",{class:"fa fa-user"},null,-1)),U1={class:"userEmail"},X1=zn(()=>oe("i",{class:"fa-solid fa-right-from-bracket"},null,-1)),H1=[X1],Z1={__name:"topMenu",setup(n){const e=Be(localStorage.getItem("user_id")),t=Be(localStorage.getItem("user")),i=()=>{localStorage.removeItem("user"),localStorage.removeItem("user_id"),Zt.push("/login")};return(s,r)=>{const l=Za("router-link");return ve(),Fe("div",A1,[j1,oe("div",Y1,[lt(l,{to:"/edituserinfo/"+X(e)},{default:Ue(()=>[N1]),_:1},8,["to"]),lt(l,{to:"/userdata/"+X(e)},{default:Ue(()=>[B1]),_:1},8,["to"]),lt(l,{to:"/chargingManyObjects"},{default:Ue(()=>[V1]),_:1})]),oe("div",W1,[lt(F1,{class:"toggleMode"}),lt(l,{to:"/userdata/"+X(e)},{default:Ue(()=>[oe("div",G1,[z1,oe("p",U1,ot(X(t)),1)])]),_:1},8,["to"]),lt(l,{to:"/login"},{default:Ue(()=>[oe("button",{class:"remainIcon",onClick:i},H1)]),_:1})])])}}},K1=Mr(Z1,[["__scopeId","data-v-df5dd854"]]),q1={__name:"HomeView",setup(n){return window.addEventListener("storage",()=>{console.log("helo")}),(e,t)=>(ve(),Fe(nn,null,[lt(K1),lt(D1,{onShowPosition:e.showPoint},null,8,["onShowPosition"])],64))}},J1={__name:"App",setup(n){const e=xh();return localStorage.getItem("user")?Zt.push("/"):Zt.push("/login"),(t,i)=>(ve(),Fe(nn,null,[X(e).path!="/login"&&X(e).path!="/register"?(ve(),It(q1,{key:0})):mt("",!0),lt(X(Yg))],64))}};var Ua={},$1={get exports(){return Ua},set exports(n){Ua=n}};const Q1=A_(L_);function ew(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cr={},tw={get exports(){return Cr},set exports(n){Cr=n}},mh;function Gc(){return mh||(mh=1,function(n,e){(function(t,i){n.exports=i()})(P_,function(){var t;function i(){return t.apply(null,arguments)}function s(o){t=o}function r(o){return o instanceof Array||Object.prototype.toString.call(o)==="[object Array]"}function l(o){return o!=null&&Object.prototype.toString.call(o)==="[object Object]"}function a(o,c){return Object.prototype.hasOwnProperty.call(o,c)}function h(o){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(o).length===0;var c;for(c in o)if(a(o,c))return!1;return!0}function u(o){return o===void 0}function f(o){return typeof o=="number"||Object.prototype.toString.call(o)==="[object Number]"}function _(o){return o instanceof Date||Object.prototype.toString.call(o)==="[object Date]"}function p(o,c){var d=[],g,y=o.length;for(g=0;g<y;++g)d.push(c(o[g],g));return d}function x(o,c){for(var d in c)a(c,d)&&(o[d]=c[d]);return a(c,"toString")&&(o.toString=c.toString),a(c,"valueOf")&&(o.valueOf=c.valueOf),o}function w(o,c,d,g){return il(o,c,d,g,!0).utc()}function C(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function b(o){return o._pf==null&&(o._pf=C()),o._pf}var E;Array.prototype.some?E=Array.prototype.some:E=function(o){var c=Object(this),d=c.length>>>0,g;for(g=0;g<d;g++)if(g in c&&o.call(this,c[g],g,c))return!0;return!1};function M(o){if(o._isValid==null){var c=b(o),d=E.call(c.parsedDateParts,function(y){return y!=null}),g=!isNaN(o._d.getTime())&&c.overflow<0&&!c.empty&&!c.invalidEra&&!c.invalidMonth&&!c.invalidWeekday&&!c.weekdayMismatch&&!c.nullInput&&!c.invalidFormat&&!c.userInvalidated&&(!c.meridiem||c.meridiem&&d);if(o._strict&&(g=g&&c.charsLeftOver===0&&c.unusedTokens.length===0&&c.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(o))o._isValid=g;else return g}return o._isValid}function k(o){var c=w(NaN);return o!=null?x(b(c),o):b(c).userInvalidated=!0,c}var P=i.momentProperties=[],F=!1;function A(o,c){var d,g,y,I=P.length;if(u(c._isAMomentObject)||(o._isAMomentObject=c._isAMomentObject),u(c._i)||(o._i=c._i),u(c._f)||(o._f=c._f),u(c._l)||(o._l=c._l),u(c._strict)||(o._strict=c._strict),u(c._tzm)||(o._tzm=c._tzm),u(c._isUTC)||(o._isUTC=c._isUTC),u(c._offset)||(o._offset=c._offset),u(c._pf)||(o._pf=b(c)),u(c._locale)||(o._locale=c._locale),I>0)for(d=0;d<I;d++)g=P[d],y=c[g],u(y)||(o[g]=y);return o}function j(o){A(this,o),this._d=new Date(o._d!=null?o._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),F===!1&&(F=!0,i.updateOffset(this),F=!1)}function V(o){return o instanceof j||o!=null&&o._isAMomentObject!=null}function H(o){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+o)}function z(o,c){var d=!0;return x(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,o),d){var g=[],y,I,B,he=arguments.length;for(I=0;I<he;I++){if(y="",typeof arguments[I]=="object"){y+=`
[`+I+"] ";for(B in arguments[0])a(arguments[0],B)&&(y+=B+": "+arguments[0][B]+", ");y=y.slice(0,-2)}else y=arguments[I];g.push(y)}H(o+`
Arguments: `+Array.prototype.slice.call(g).join("")+`
`+new Error().stack),d=!1}return c.apply(this,arguments)},c)}var se={};function ne(o,c){i.deprecationHandler!=null&&i.deprecationHandler(o,c),se[o]||(H(c),se[o]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function re(o){return typeof Function<"u"&&o instanceof Function||Object.prototype.toString.call(o)==="[object Function]"}function Ce(o){var c,d;for(d in o)a(o,d)&&(c=o[d],re(c)?this[d]=c:this["_"+d]=c);this._config=o,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function te(o,c){var d=x({},o),g;for(g in c)a(c,g)&&(l(o[g])&&l(c[g])?(d[g]={},x(d[g],o[g]),x(d[g],c[g])):c[g]!=null?d[g]=c[g]:delete d[g]);for(g in o)a(o,g)&&!a(c,g)&&l(o[g])&&(d[g]=x({},d[g]));return d}function ie(o){o!=null&&this.set(o)}var $;Object.keys?$=Object.keys:$=function(o){var c,d=[];for(c in o)a(o,c)&&d.push(c);return d};var ue={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Se(o,c,d){var g=this._calendar[o]||this._calendar.sameElse;return re(g)?g.call(c,d):g}function me(o,c,d){var g=""+Math.abs(o),y=c-g.length,I=o>=0;return(I?d?"+":"":"-")+Math.pow(10,Math.max(0,y)).toString().substr(1)+g}var Le=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ae={},pe={};function Z(o,c,d,g){var y=g;typeof g=="string"&&(y=function(){return this[g]()}),o&&(pe[o]=y),c&&(pe[c[0]]=function(){return me(y.apply(this,arguments),c[1],c[2])}),d&&(pe[d]=function(){return this.localeData().ordinal(y.apply(this,arguments),o)})}function et(o){return o.match(/\[[\s\S]/)?o.replace(/^\[|\]$/g,""):o.replace(/\\/g,"")}function Ke(o){var c=o.match(Le),d,g;for(d=0,g=c.length;d<g;d++)pe[c[d]]?c[d]=pe[c[d]]:c[d]=et(c[d]);return function(y){var I="",B;for(B=0;B<g;B++)I+=re(c[B])?c[B].call(y,o):c[B];return I}}function Pe(o,c){return o.isValid()?(c=O(c,o.localeData()),ae[c]=ae[c]||Ke(c),ae[c](o)):o.localeData().invalidDate()}function O(o,c){var d=5;function g(y){return c.longDateFormat(y)||y}for(U.lastIndex=0;d>=0&&U.test(o);)o=o.replace(U,g),U.lastIndex=0,d-=1;return o}var R={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function N(o){var c=this._longDateFormat[o],d=this._longDateFormat[o.toUpperCase()];return c||!d?c:(this._longDateFormat[o]=d.match(Le).map(function(g){return g==="MMMM"||g==="MM"||g==="DD"||g==="dddd"?g.slice(1):g}).join(""),this._longDateFormat[o])}var W="Invalid date";function Q(){return this._invalidDate}var K="%d",de=/\d{1,2}/;function Ee(o){return this._ordinal.replace("%d",o)}var ze={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Vt(o,c,d,g){var y=this._relativeTime[d];return re(y)?y(o,c,d,g):y.replace(/%d/i,o)}function Jt(o,c){var d=this._relativeTime[o>0?"future":"past"];return re(d)?d(c):d.replace(/%s/i,c)}var xt={};function tt(o,c){var d=o.toLowerCase();xt[d]=xt[d+"s"]=xt[c]=o}function Ne(o){return typeof o=="string"?xt[o]||xt[o.toLowerCase()]:void 0}function ut(o){var c={},d,g;for(g in o)a(o,g)&&(d=Ne(g),d&&(c[d]=o[g]));return c}var _t={};function We(o,c){_t[o]=c}function Wt(o){var c=[],d;for(d in o)a(o,d)&&c.push({unit:d,priority:_t[d]});return c.sort(function(g,y){return g.priority-y.priority}),c}function Et(o){return o%4===0&&o%100!==0||o%400===0}function qe(o){return o<0?Math.ceil(o)||0:Math.floor(o)}function ye(o){var c=+o,d=0;return c!==0&&isFinite(c)&&(d=qe(c)),d}function Rt(o,c){return function(d){return d!=null?(Ti(this,o,d),i.updateOffset(this,c),this):it(this,o)}}function it(o,c){return o.isValid()?o._d["get"+(o._isUTC?"UTC":"")+c]():NaN}function Ti(o,c,d){o.isValid()&&!isNaN(d)&&(c==="FullYear"&&Et(o.year())&&o.month()===1&&o.date()===29?(d=ye(d),o._d["set"+(o._isUTC?"UTC":"")+c](d,o.month(),ks(d,o.month()))):o._d["set"+(o._isUTC?"UTC":"")+c](d))}function wt(o){return o=Ne(o),re(this[o])?this[o]():this}function Un(o,c){if(typeof o=="object"){o=ut(o);var d=Wt(o),g,y=d.length;for(g=0;g<y;g++)this[d[g].unit](o[d[g].unit])}else if(o=Ne(o),re(this[o]))return this[o](c);return this}var Ui=/\d/,dt=/\d\d/,li=/\d{3}/,At=/\d{4}/,$t=/[+-]?\d{6}/,ke=/\d\d?/,Mt=/\d\d\d\d?/,Qt=/\d\d\d\d\d\d?/,hi=/\d{1,3}/,Ei=/\d{1,4}/,nt=/[+-]?\d{1,6}/,bt=/\d+/,ht=/[+-]?\d+/,Dt=/Z|[+-]\d\d:?\d\d/gi,at=/Z|[+-]\d\d(?::?\d\d)?/gi,D=/[+-]?\d+(\.\d{1,3})?/,m=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,v;v={};function T(o,c,d){v[o]=re(c)?c:function(g,y){return g&&d?d:c}}function L(o,c){return a(v,o)?v[o](c._strict,c._locale):new RegExp(S(o))}function S(o){return G(o.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(c,d,g,y,I){return d||g||y||I}))}function G(o){return o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ee={};function Y(o,c){var d,g=c,y;for(typeof o=="string"&&(o=[o]),f(c)&&(g=function(I,B){B[c]=ye(I)}),y=o.length,d=0;d<y;d++)ee[o[d]]=g}function we(o,c){Y(o,function(d,g,y,I){y._w=y._w||{},c(d,y._w,y,I)})}function fe(o,c,d){c!=null&&a(ee,o)&&ee[o](c,d._a,d,o)}var _e=0,J=1,Me=2,le=3,je=4,Ct=5,Gt=6,Ds=7,Xc=8;function Hc(o,c){return(o%c+c)%c}var st;Array.prototype.indexOf?st=Array.prototype.indexOf:st=function(o){var c;for(c=0;c<this.length;++c)if(this[c]===o)return c;return-1};function ks(o,c){if(isNaN(o)||isNaN(c))return NaN;var d=Hc(c,12);return o+=(c-d)/12,d===1?Et(o)?29:28:31-d%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1}),Z("MMM",0,0,function(o){return this.localeData().monthsShort(this,o)}),Z("MMMM",0,0,function(o){return this.localeData().months(this,o)}),tt("month","M"),We("month",8),T("M",ke),T("MM",ke,dt),T("MMM",function(o,c){return c.monthsShortRegex(o)}),T("MMMM",function(o,c){return c.monthsRegex(o)}),Y(["M","MM"],function(o,c){c[J]=ye(o)-1}),Y(["MMM","MMMM"],function(o,c,d,g){var y=d._locale.monthsParse(o,g,d._strict);y!=null?c[J]=y:b(d).invalidMonth=o});var Zc="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Vo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Wo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Kc=m,qc=m;function Jc(o,c){return o?r(this._months)?this._months[o.month()]:this._months[(this._months.isFormat||Wo).test(c)?"format":"standalone"][o.month()]:r(this._months)?this._months:this._months.standalone}function $c(o,c){return o?r(this._monthsShort)?this._monthsShort[o.month()]:this._monthsShort[Wo.test(c)?"format":"standalone"][o.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Qc(o,c,d){var g,y,I,B=o.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],g=0;g<12;++g)I=w([2e3,g]),this._shortMonthsParse[g]=this.monthsShort(I,"").toLocaleLowerCase(),this._longMonthsParse[g]=this.months(I,"").toLocaleLowerCase();return d?c==="MMM"?(y=st.call(this._shortMonthsParse,B),y!==-1?y:null):(y=st.call(this._longMonthsParse,B),y!==-1?y:null):c==="MMM"?(y=st.call(this._shortMonthsParse,B),y!==-1?y:(y=st.call(this._longMonthsParse,B),y!==-1?y:null)):(y=st.call(this._longMonthsParse,B),y!==-1?y:(y=st.call(this._shortMonthsParse,B),y!==-1?y:null))}function eu(o,c,d){var g,y,I;if(this._monthsParseExact)return Qc.call(this,o,c,d);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),g=0;g<12;g++){if(y=w([2e3,g]),d&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(y,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),!d&&!this._monthsParse[g]&&(I="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[g]=new RegExp(I.replace(".",""),"i")),d&&c==="MMMM"&&this._longMonthsParse[g].test(o))return g;if(d&&c==="MMM"&&this._shortMonthsParse[g].test(o))return g;if(!d&&this._monthsParse[g].test(o))return g}}function Go(o,c){var d;if(!o.isValid())return o;if(typeof c=="string"){if(/^\d+$/.test(c))c=ye(c);else if(c=o.localeData().monthsParse(c),!f(c))return o}return d=Math.min(o.date(),ks(o.year(),c)),o._d["set"+(o._isUTC?"UTC":"")+"Month"](c,d),o}function zo(o){return o!=null?(Go(this,o),i.updateOffset(this,!0),this):it(this,"Month")}function tu(){return ks(this.year(),this.month())}function iu(o){return this._monthsParseExact?(a(this,"_monthsRegex")||Uo.call(this),o?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Kc),this._monthsShortStrictRegex&&o?this._monthsShortStrictRegex:this._monthsShortRegex)}function nu(o){return this._monthsParseExact?(a(this,"_monthsRegex")||Uo.call(this),o?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=qc),this._monthsStrictRegex&&o?this._monthsStrictRegex:this._monthsRegex)}function Uo(){function o(B,he){return he.length-B.length}var c=[],d=[],g=[],y,I;for(y=0;y<12;y++)I=w([2e3,y]),c.push(this.monthsShort(I,"")),d.push(this.months(I,"")),g.push(this.months(I,"")),g.push(this.monthsShort(I,""));for(c.sort(o),d.sort(o),g.sort(o),y=0;y<12;y++)c[y]=G(c[y]),d[y]=G(d[y]);for(y=0;y<24;y++)g[y]=G(g[y]);this._monthsRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}Z("Y",0,0,function(){var o=this.year();return o<=9999?me(o,4):"+"+o}),Z(0,["YY",2],0,function(){return this.year()%100}),Z(0,["YYYY",4],0,"year"),Z(0,["YYYYY",5],0,"year"),Z(0,["YYYYYY",6,!0],0,"year"),tt("year","y"),We("year",1),T("Y",ht),T("YY",ke,dt),T("YYYY",Ei,At),T("YYYYY",nt,$t),T("YYYYYY",nt,$t),Y(["YYYYY","YYYYYY"],_e),Y("YYYY",function(o,c){c[_e]=o.length===2?i.parseTwoDigitYear(o):ye(o)}),Y("YY",function(o,c){c[_e]=i.parseTwoDigitYear(o)}),Y("Y",function(o,c){c[_e]=parseInt(o,10)});function Xn(o){return Et(o)?366:365}i.parseTwoDigitYear=function(o){return ye(o)+(ye(o)>68?1900:2e3)};var Xo=Rt("FullYear",!0);function su(){return Et(this.year())}function ru(o,c,d,g,y,I,B){var he;return o<100&&o>=0?(he=new Date(o+400,c,d,g,y,I,B),isFinite(he.getFullYear())&&he.setFullYear(o)):he=new Date(o,c,d,g,y,I,B),he}function Hn(o){var c,d;return o<100&&o>=0?(d=Array.prototype.slice.call(arguments),d[0]=o+400,c=new Date(Date.UTC.apply(null,d)),isFinite(c.getUTCFullYear())&&c.setUTCFullYear(o)):c=new Date(Date.UTC.apply(null,arguments)),c}function Os(o,c,d){var g=7+c-d,y=(7+Hn(o,0,g).getUTCDay()-c)%7;return-y+g-1}function Ho(o,c,d,g,y){var I=(7+d-g)%7,B=Os(o,g,y),he=1+7*(c-1)+I+B,be,Ge;return he<=0?(be=o-1,Ge=Xn(be)+he):he>Xn(o)?(be=o+1,Ge=he-Xn(o)):(be=o,Ge=he),{year:be,dayOfYear:Ge}}function Zn(o,c,d){var g=Os(o.year(),c,d),y=Math.floor((o.dayOfYear()-g-1)/7)+1,I,B;return y<1?(B=o.year()-1,I=y+ci(B,c,d)):y>ci(o.year(),c,d)?(I=y-ci(o.year(),c,d),B=o.year()+1):(B=o.year(),I=y),{week:I,year:B}}function ci(o,c,d){var g=Os(o,c,d),y=Os(o+1,c,d);return(Xn(o)-g+y)/7}Z("w",["ww",2],"wo","week"),Z("W",["WW",2],"Wo","isoWeek"),tt("week","w"),tt("isoWeek","W"),We("week",5),We("isoWeek",5),T("w",ke),T("ww",ke,dt),T("W",ke),T("WW",ke,dt),we(["w","ww","W","WW"],function(o,c,d,g){c[g.substr(0,1)]=ye(o)});function au(o){return Zn(o,this._week.dow,this._week.doy).week}var ou={dow:0,doy:6};function lu(){return this._week.dow}function hu(){return this._week.doy}function cu(o){var c=this.localeData().week(this);return o==null?c:this.add((o-c)*7,"d")}function uu(o){var c=Zn(this,1,4).week;return o==null?c:this.add((o-c)*7,"d")}Z("d",0,"do","day"),Z("dd",0,0,function(o){return this.localeData().weekdaysMin(this,o)}),Z("ddd",0,0,function(o){return this.localeData().weekdaysShort(this,o)}),Z("dddd",0,0,function(o){return this.localeData().weekdays(this,o)}),Z("e",0,0,"weekday"),Z("E",0,0,"isoWeekday"),tt("day","d"),tt("weekday","e"),tt("isoWeekday","E"),We("day",11),We("weekday",11),We("isoWeekday",11),T("d",ke),T("e",ke),T("E",ke),T("dd",function(o,c){return c.weekdaysMinRegex(o)}),T("ddd",function(o,c){return c.weekdaysShortRegex(o)}),T("dddd",function(o,c){return c.weekdaysRegex(o)}),we(["dd","ddd","dddd"],function(o,c,d,g){var y=d._locale.weekdaysParse(o,g,d._strict);y!=null?c.d=y:b(d).invalidWeekday=o}),we(["d","e","E"],function(o,c,d,g){c[g]=ye(o)});function du(o,c){return typeof o!="string"?o:isNaN(o)?(o=c.weekdaysParse(o),typeof o=="number"?o:null):parseInt(o,10)}function fu(o,c){return typeof o=="string"?c.weekdaysParse(o)%7||7:isNaN(o)?null:o}function Gr(o,c){return o.slice(c,7).concat(o.slice(0,c))}var gu="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Zo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),mu="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),_u=m,pu=m,yu=m;function vu(o,c){var d=r(this._weekdays)?this._weekdays:this._weekdays[o&&o!==!0&&this._weekdays.isFormat.test(c)?"format":"standalone"];return o===!0?Gr(d,this._week.dow):o?d[o.day()]:d}function xu(o){return o===!0?Gr(this._weekdaysShort,this._week.dow):o?this._weekdaysShort[o.day()]:this._weekdaysShort}function wu(o){return o===!0?Gr(this._weekdaysMin,this._week.dow):o?this._weekdaysMin[o.day()]:this._weekdaysMin}function bu(o,c,d){var g,y,I,B=o.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],g=0;g<7;++g)I=w([2e3,1]).day(g),this._minWeekdaysParse[g]=this.weekdaysMin(I,"").toLocaleLowerCase(),this._shortWeekdaysParse[g]=this.weekdaysShort(I,"").toLocaleLowerCase(),this._weekdaysParse[g]=this.weekdays(I,"").toLocaleLowerCase();return d?c==="dddd"?(y=st.call(this._weekdaysParse,B),y!==-1?y:null):c==="ddd"?(y=st.call(this._shortWeekdaysParse,B),y!==-1?y:null):(y=st.call(this._minWeekdaysParse,B),y!==-1?y:null):c==="dddd"?(y=st.call(this._weekdaysParse,B),y!==-1||(y=st.call(this._shortWeekdaysParse,B),y!==-1)?y:(y=st.call(this._minWeekdaysParse,B),y!==-1?y:null)):c==="ddd"?(y=st.call(this._shortWeekdaysParse,B),y!==-1||(y=st.call(this._weekdaysParse,B),y!==-1)?y:(y=st.call(this._minWeekdaysParse,B),y!==-1?y:null)):(y=st.call(this._minWeekdaysParse,B),y!==-1||(y=st.call(this._weekdaysParse,B),y!==-1)?y:(y=st.call(this._shortWeekdaysParse,B),y!==-1?y:null))}function Cu(o,c,d){var g,y,I;if(this._weekdaysParseExact)return bu.call(this,o,c,d);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),g=0;g<7;g++){if(y=w([2e3,1]).day(g),d&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=new RegExp("^"+this.weekdays(y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[g]=new RegExp("^"+this.weekdaysShort(y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[g]||(I="^"+this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[g]=new RegExp(I.replace(".",""),"i")),d&&c==="dddd"&&this._fullWeekdaysParse[g].test(o))return g;if(d&&c==="ddd"&&this._shortWeekdaysParse[g].test(o))return g;if(d&&c==="dd"&&this._minWeekdaysParse[g].test(o))return g;if(!d&&this._weekdaysParse[g].test(o))return g}}function Su(o){if(!this.isValid())return o!=null?this:NaN;var c=this._isUTC?this._d.getUTCDay():this._d.getDay();return o!=null?(o=du(o,this.localeData()),this.add(o-c,"d")):c}function Tu(o){if(!this.isValid())return o!=null?this:NaN;var c=(this.day()+7-this.localeData()._week.dow)%7;return o==null?c:this.add(o-c,"d")}function Eu(o){if(!this.isValid())return o!=null?this:NaN;if(o!=null){var c=fu(o,this.localeData());return this.day(this.day()%7?c:c-7)}else return this.day()||7}function Mu(o){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||zr.call(this),o?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=_u),this._weekdaysStrictRegex&&o?this._weekdaysStrictRegex:this._weekdaysRegex)}function Du(o){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||zr.call(this),o?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=pu),this._weekdaysShortStrictRegex&&o?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ku(o){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||zr.call(this),o?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=yu),this._weekdaysMinStrictRegex&&o?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function zr(){function o(St,mi){return mi.length-St.length}var c=[],d=[],g=[],y=[],I,B,he,be,Ge;for(I=0;I<7;I++)B=w([2e3,1]).day(I),he=G(this.weekdaysMin(B,"")),be=G(this.weekdaysShort(B,"")),Ge=G(this.weekdays(B,"")),c.push(he),d.push(be),g.push(Ge),y.push(he),y.push(be),y.push(Ge);c.sort(o),d.sort(o),g.sort(o),y.sort(o),this._weekdaysRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function Ur(){return this.hours()%12||12}function Ou(){return this.hours()||24}Z("H",["HH",2],0,"hour"),Z("h",["hh",2],0,Ur),Z("k",["kk",2],0,Ou),Z("hmm",0,0,function(){return""+Ur.apply(this)+me(this.minutes(),2)}),Z("hmmss",0,0,function(){return""+Ur.apply(this)+me(this.minutes(),2)+me(this.seconds(),2)}),Z("Hmm",0,0,function(){return""+this.hours()+me(this.minutes(),2)}),Z("Hmmss",0,0,function(){return""+this.hours()+me(this.minutes(),2)+me(this.seconds(),2)});function Ko(o,c){Z(o,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),c)})}Ko("a",!0),Ko("A",!1),tt("hour","h"),We("hour",13);function qo(o,c){return c._meridiemParse}T("a",qo),T("A",qo),T("H",ke),T("h",ke),T("k",ke),T("HH",ke,dt),T("hh",ke,dt),T("kk",ke,dt),T("hmm",Mt),T("hmmss",Qt),T("Hmm",Mt),T("Hmmss",Qt),Y(["H","HH"],le),Y(["k","kk"],function(o,c,d){var g=ye(o);c[le]=g===24?0:g}),Y(["a","A"],function(o,c,d){d._isPm=d._locale.isPM(o),d._meridiem=o}),Y(["h","hh"],function(o,c,d){c[le]=ye(o),b(d).bigHour=!0}),Y("hmm",function(o,c,d){var g=o.length-2;c[le]=ye(o.substr(0,g)),c[je]=ye(o.substr(g)),b(d).bigHour=!0}),Y("hmmss",function(o,c,d){var g=o.length-4,y=o.length-2;c[le]=ye(o.substr(0,g)),c[je]=ye(o.substr(g,2)),c[Ct]=ye(o.substr(y)),b(d).bigHour=!0}),Y("Hmm",function(o,c,d){var g=o.length-2;c[le]=ye(o.substr(0,g)),c[je]=ye(o.substr(g))}),Y("Hmmss",function(o,c,d){var g=o.length-4,y=o.length-2;c[le]=ye(o.substr(0,g)),c[je]=ye(o.substr(g,2)),c[Ct]=ye(o.substr(y))});function Ru(o){return(o+"").toLowerCase().charAt(0)==="p"}var Iu=/[ap]\.?m?\.?/i,Lu=Rt("Hours",!0);function Pu(o,c,d){return o>11?d?"pm":"PM":d?"am":"AM"}var Jo={calendar:ue,longDateFormat:R,invalidDate:W,ordinal:K,dayOfMonthOrdinalParse:de,relativeTime:ze,months:Zc,monthsShort:Vo,week:ou,weekdays:gu,weekdaysMin:mu,weekdaysShort:Zo,meridiemParse:Iu},Je={},Kn={},qn;function Fu(o,c){var d,g=Math.min(o.length,c.length);for(d=0;d<g;d+=1)if(o[d]!==c[d])return d;return g}function $o(o){return o&&o.toLowerCase().replace("_","-")}function Au(o){for(var c=0,d,g,y,I;c<o.length;){for(I=$o(o[c]).split("-"),d=I.length,g=$o(o[c+1]),g=g?g.split("-"):null;d>0;){if(y=Rs(I.slice(0,d).join("-")),y)return y;if(g&&g.length>=d&&Fu(I,g)>=d-1)break;d--}c++}return qn}function ju(o){return o.match("^[^/\\\\]*$")!=null}function Rs(o){var c=null,d;if(Je[o]===void 0&&n&&n.exports&&ju(o))try{c=qn._abbr,d=ew,d("./locale/"+o),Mi(c)}catch{Je[o]=null}return Je[o]}function Mi(o,c){var d;return o&&(u(c)?d=ui(o):d=Xr(o,c),d?qn=d:typeof console<"u"&&console.warn&&console.warn("Locale "+o+" not found. Did you forget to load it?")),qn._abbr}function Xr(o,c){if(c!==null){var d,g=Jo;if(c.abbr=o,Je[o]!=null)ne("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),g=Je[o]._config;else if(c.parentLocale!=null)if(Je[c.parentLocale]!=null)g=Je[c.parentLocale]._config;else if(d=Rs(c.parentLocale),d!=null)g=d._config;else return Kn[c.parentLocale]||(Kn[c.parentLocale]=[]),Kn[c.parentLocale].push({name:o,config:c}),null;return Je[o]=new ie(te(g,c)),Kn[o]&&Kn[o].forEach(function(y){Xr(y.name,y.config)}),Mi(o),Je[o]}else return delete Je[o],null}function Yu(o,c){if(c!=null){var d,g,y=Jo;Je[o]!=null&&Je[o].parentLocale!=null?Je[o].set(te(Je[o]._config,c)):(g=Rs(o),g!=null&&(y=g._config),c=te(y,c),g==null&&(c.abbr=o),d=new ie(c),d.parentLocale=Je[o],Je[o]=d),Mi(o)}else Je[o]!=null&&(Je[o].parentLocale!=null?(Je[o]=Je[o].parentLocale,o===Mi()&&Mi(o)):Je[o]!=null&&delete Je[o]);return Je[o]}function ui(o){var c;if(o&&o._locale&&o._locale._abbr&&(o=o._locale._abbr),!o)return qn;if(!r(o)){if(c=Rs(o),c)return c;o=[o]}return Au(o)}function Nu(){return $(Je)}function Hr(o){var c,d=o._a;return d&&b(o).overflow===-2&&(c=d[J]<0||d[J]>11?J:d[Me]<1||d[Me]>ks(d[_e],d[J])?Me:d[le]<0||d[le]>24||d[le]===24&&(d[je]!==0||d[Ct]!==0||d[Gt]!==0)?le:d[je]<0||d[je]>59?je:d[Ct]<0||d[Ct]>59?Ct:d[Gt]<0||d[Gt]>999?Gt:-1,b(o)._overflowDayOfYear&&(c<_e||c>Me)&&(c=Me),b(o)._overflowWeeks&&c===-1&&(c=Ds),b(o)._overflowWeekday&&c===-1&&(c=Xc),b(o).overflow=c),o}var Bu=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wu=/Z|[+-]\d\d(?::?\d\d)?/,Is=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Zr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Gu=/^\/?Date\((-?\d+)/i,zu=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Uu={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Qo(o){var c,d,g=o._i,y=Bu.exec(g)||Vu.exec(g),I,B,he,be,Ge=Is.length,St=Zr.length;if(y){for(b(o).iso=!0,c=0,d=Ge;c<d;c++)if(Is[c][1].exec(y[1])){B=Is[c][0],I=Is[c][2]!==!1;break}if(B==null){o._isValid=!1;return}if(y[3]){for(c=0,d=St;c<d;c++)if(Zr[c][1].exec(y[3])){he=(y[2]||" ")+Zr[c][0];break}if(he==null){o._isValid=!1;return}}if(!I&&he!=null){o._isValid=!1;return}if(y[4])if(Wu.exec(y[4]))be="Z";else{o._isValid=!1;return}o._f=B+(he||"")+(be||""),qr(o)}else o._isValid=!1}function Xu(o,c,d,g,y,I){var B=[Hu(o),Vo.indexOf(c),parseInt(d,10),parseInt(g,10),parseInt(y,10)];return I&&B.push(parseInt(I,10)),B}function Hu(o){var c=parseInt(o,10);return c<=49?2e3+c:c<=999?1900+c:c}function Zu(o){return o.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ku(o,c,d){if(o){var g=Zo.indexOf(o),y=new Date(c[0],c[1],c[2]).getDay();if(g!==y)return b(d).weekdayMismatch=!0,d._isValid=!1,!1}return!0}function qu(o,c,d){if(o)return Uu[o];if(c)return 0;var g=parseInt(d,10),y=g%100,I=(g-y)/100;return I*60+y}function el(o){var c=zu.exec(Zu(o._i)),d;if(c){if(d=Xu(c[4],c[3],c[2],c[5],c[6],c[7]),!Ku(c[1],d,o))return;o._a=d,o._tzm=qu(c[8],c[9],c[10]),o._d=Hn.apply(null,o._a),o._d.setUTCMinutes(o._d.getUTCMinutes()-o._tzm),b(o).rfc2822=!0}else o._isValid=!1}function Ju(o){var c=Gu.exec(o._i);if(c!==null){o._d=new Date(+c[1]);return}if(Qo(o),o._isValid===!1)delete o._isValid;else return;if(el(o),o._isValid===!1)delete o._isValid;else return;o._strict?o._isValid=!1:i.createFromInputFallback(o)}i.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(o){o._d=new Date(o._i+(o._useUTC?" UTC":""))});function dn(o,c,d){return o??c??d}function $u(o){var c=new Date(i.now());return o._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function Kr(o){var c,d,g=[],y,I,B;if(!o._d){for(y=$u(o),o._w&&o._a[Me]==null&&o._a[J]==null&&Qu(o),o._dayOfYear!=null&&(B=dn(o._a[_e],y[_e]),(o._dayOfYear>Xn(B)||o._dayOfYear===0)&&(b(o)._overflowDayOfYear=!0),d=Hn(B,0,o._dayOfYear),o._a[J]=d.getUTCMonth(),o._a[Me]=d.getUTCDate()),c=0;c<3&&o._a[c]==null;++c)o._a[c]=g[c]=y[c];for(;c<7;c++)o._a[c]=g[c]=o._a[c]==null?c===2?1:0:o._a[c];o._a[le]===24&&o._a[je]===0&&o._a[Ct]===0&&o._a[Gt]===0&&(o._nextDay=!0,o._a[le]=0),o._d=(o._useUTC?Hn:ru).apply(null,g),I=o._useUTC?o._d.getUTCDay():o._d.getDay(),o._tzm!=null&&o._d.setUTCMinutes(o._d.getUTCMinutes()-o._tzm),o._nextDay&&(o._a[le]=24),o._w&&typeof o._w.d<"u"&&o._w.d!==I&&(b(o).weekdayMismatch=!0)}}function Qu(o){var c,d,g,y,I,B,he,be,Ge;c=o._w,c.GG!=null||c.W!=null||c.E!=null?(I=1,B=4,d=dn(c.GG,o._a[_e],Zn(Xe(),1,4).year),g=dn(c.W,1),y=dn(c.E,1),(y<1||y>7)&&(be=!0)):(I=o._locale._week.dow,B=o._locale._week.doy,Ge=Zn(Xe(),I,B),d=dn(c.gg,o._a[_e],Ge.year),g=dn(c.w,Ge.week),c.d!=null?(y=c.d,(y<0||y>6)&&(be=!0)):c.e!=null?(y=c.e+I,(c.e<0||c.e>6)&&(be=!0)):y=I),g<1||g>ci(d,I,B)?b(o)._overflowWeeks=!0:be!=null?b(o)._overflowWeekday=!0:(he=Ho(d,g,y,I,B),o._a[_e]=he.year,o._dayOfYear=he.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function qr(o){if(o._f===i.ISO_8601){Qo(o);return}if(o._f===i.RFC_2822){el(o);return}o._a=[],b(o).empty=!0;var c=""+o._i,d,g,y,I,B,he=c.length,be=0,Ge,St;for(y=O(o._f,o._locale).match(Le)||[],St=y.length,d=0;d<St;d++)I=y[d],g=(c.match(L(I,o))||[])[0],g&&(B=c.substr(0,c.indexOf(g)),B.length>0&&b(o).unusedInput.push(B),c=c.slice(c.indexOf(g)+g.length),be+=g.length),pe[I]?(g?b(o).empty=!1:b(o).unusedTokens.push(I),fe(I,g,o)):o._strict&&!g&&b(o).unusedTokens.push(I);b(o).charsLeftOver=he-be,c.length>0&&b(o).unusedInput.push(c),o._a[le]<=12&&b(o).bigHour===!0&&o._a[le]>0&&(b(o).bigHour=void 0),b(o).parsedDateParts=o._a.slice(0),b(o).meridiem=o._meridiem,o._a[le]=ed(o._locale,o._a[le],o._meridiem),Ge=b(o).era,Ge!==null&&(o._a[_e]=o._locale.erasConvertYear(Ge,o._a[_e])),Kr(o),Hr(o)}function ed(o,c,d){var g;return d==null?c:o.meridiemHour!=null?o.meridiemHour(c,d):(o.isPM!=null&&(g=o.isPM(d),g&&c<12&&(c+=12),!g&&c===12&&(c=0)),c)}function td(o){var c,d,g,y,I,B,he=!1,be=o._f.length;if(be===0){b(o).invalidFormat=!0,o._d=new Date(NaN);return}for(y=0;y<be;y++)I=0,B=!1,c=A({},o),o._useUTC!=null&&(c._useUTC=o._useUTC),c._f=o._f[y],qr(c),M(c)&&(B=!0),I+=b(c).charsLeftOver,I+=b(c).unusedTokens.length*10,b(c).score=I,he?I<g&&(g=I,d=c):(g==null||I<g||B)&&(g=I,d=c,B&&(he=!0));x(o,d||c)}function id(o){if(!o._d){var c=ut(o._i),d=c.day===void 0?c.date:c.day;o._a=p([c.year,c.month,d,c.hour,c.minute,c.second,c.millisecond],function(g){return g&&parseInt(g,10)}),Kr(o)}}function nd(o){var c=new j(Hr(tl(o)));return c._nextDay&&(c.add(1,"d"),c._nextDay=void 0),c}function tl(o){var c=o._i,d=o._f;return o._locale=o._locale||ui(o._l),c===null||d===void 0&&c===""?k({nullInput:!0}):(typeof c=="string"&&(o._i=c=o._locale.preparse(c)),V(c)?new j(Hr(c)):(_(c)?o._d=c:r(d)?td(o):d?qr(o):sd(o),M(o)||(o._d=null),o))}function sd(o){var c=o._i;u(c)?o._d=new Date(i.now()):_(c)?o._d=new Date(c.valueOf()):typeof c=="string"?Ju(o):r(c)?(o._a=p(c.slice(0),function(d){return parseInt(d,10)}),Kr(o)):l(c)?id(o):f(c)?o._d=new Date(c):i.createFromInputFallback(o)}function il(o,c,d,g,y){var I={};return(c===!0||c===!1)&&(g=c,c=void 0),(d===!0||d===!1)&&(g=d,d=void 0),(l(o)&&h(o)||r(o)&&o.length===0)&&(o=void 0),I._isAMomentObject=!0,I._useUTC=I._isUTC=y,I._l=d,I._i=o,I._f=c,I._strict=g,nd(I)}function Xe(o,c,d,g){return il(o,c,d,g,!1)}var rd=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var o=Xe.apply(null,arguments);return this.isValid()&&o.isValid()?o<this?this:o:k()}),ad=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var o=Xe.apply(null,arguments);return this.isValid()&&o.isValid()?o>this?this:o:k()});function nl(o,c){var d,g;if(c.length===1&&r(c[0])&&(c=c[0]),!c.length)return Xe();for(d=c[0],g=1;g<c.length;++g)(!c[g].isValid()||c[g][o](d))&&(d=c[g]);return d}function od(){var o=[].slice.call(arguments,0);return nl("isBefore",o)}function ld(){var o=[].slice.call(arguments,0);return nl("isAfter",o)}var hd=function(){return Date.now?Date.now():+new Date},Jn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function cd(o){var c,d=!1,g,y=Jn.length;for(c in o)if(a(o,c)&&!(st.call(Jn,c)!==-1&&(o[c]==null||!isNaN(o[c]))))return!1;for(g=0;g<y;++g)if(o[Jn[g]]){if(d)return!1;parseFloat(o[Jn[g]])!==ye(o[Jn[g]])&&(d=!0)}return!0}function ud(){return this._isValid}function dd(){return zt(NaN)}function Ls(o){var c=ut(o),d=c.year||0,g=c.quarter||0,y=c.month||0,I=c.week||c.isoWeek||0,B=c.day||0,he=c.hour||0,be=c.minute||0,Ge=c.second||0,St=c.millisecond||0;this._isValid=cd(c),this._milliseconds=+St+Ge*1e3+be*6e4+he*1e3*60*60,this._days=+B+I*7,this._months=+y+g*3+d*12,this._data={},this._locale=ui(),this._bubble()}function Ps(o){return o instanceof Ls}function Jr(o){return o<0?Math.round(-1*o)*-1:Math.round(o)}function fd(o,c,d){var g=Math.min(o.length,c.length),y=Math.abs(o.length-c.length),I=0,B;for(B=0;B<g;B++)(d&&o[B]!==c[B]||!d&&ye(o[B])!==ye(c[B]))&&I++;return I+y}function sl(o,c){Z(o,0,0,function(){var d=this.utcOffset(),g="+";return d<0&&(d=-d,g="-"),g+me(~~(d/60),2)+c+me(~~d%60,2)})}sl("Z",":"),sl("ZZ",""),T("Z",at),T("ZZ",at),Y(["Z","ZZ"],function(o,c,d){d._useUTC=!0,d._tzm=$r(at,o)});var gd=/([\+\-]|\d\d)/gi;function $r(o,c){var d=(c||"").match(o),g,y,I;return d===null?null:(g=d[d.length-1]||[],y=(g+"").match(gd)||["-",0,0],I=+(y[1]*60)+ye(y[2]),I===0?0:y[0]==="+"?I:-I)}function Qr(o,c){var d,g;return c._isUTC?(d=c.clone(),g=(V(o)||_(o)?o.valueOf():Xe(o).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+g),i.updateOffset(d,!1),d):Xe(o).local()}function ea(o){return-Math.round(o._d.getTimezoneOffset())}i.updateOffset=function(){};function md(o,c,d){var g=this._offset||0,y;if(!this.isValid())return o!=null?this:NaN;if(o!=null){if(typeof o=="string"){if(o=$r(at,o),o===null)return this}else Math.abs(o)<16&&!d&&(o=o*60);return!this._isUTC&&c&&(y=ea(this)),this._offset=o,this._isUTC=!0,y!=null&&this.add(y,"m"),g!==o&&(!c||this._changeInProgress?ll(this,zt(o-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?g:ea(this)}function _d(o,c){return o!=null?(typeof o!="string"&&(o=-o),this.utcOffset(o,c),this):-this.utcOffset()}function pd(o){return this.utcOffset(0,o)}function yd(o){return this._isUTC&&(this.utcOffset(0,o),this._isUTC=!1,o&&this.subtract(ea(this),"m")),this}function vd(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var o=$r(Dt,this._i);o!=null?this.utcOffset(o):this.utcOffset(0,!0)}return this}function xd(o){return this.isValid()?(o=o?Xe(o).utcOffset():0,(this.utcOffset()-o)%60===0):!1}function wd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bd(){if(!u(this._isDSTShifted))return this._isDSTShifted;var o={},c;return A(o,this),o=tl(o),o._a?(c=o._isUTC?w(o._a):Xe(o._a),this._isDSTShifted=this.isValid()&&fd(o._a,c.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Cd(){return this.isValid()?!this._isUTC:!1}function Sd(){return this.isValid()?this._isUTC:!1}function rl(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Td=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ed=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zt(o,c){var d=o,g=null,y,I,B;return Ps(o)?d={ms:o._milliseconds,d:o._days,M:o._months}:f(o)||!isNaN(+o)?(d={},c?d[c]=+o:d.milliseconds=+o):(g=Td.exec(o))?(y=g[1]==="-"?-1:1,d={y:0,d:ye(g[Me])*y,h:ye(g[le])*y,m:ye(g[je])*y,s:ye(g[Ct])*y,ms:ye(Jr(g[Gt]*1e3))*y}):(g=Ed.exec(o))?(y=g[1]==="-"?-1:1,d={y:Xi(g[2],y),M:Xi(g[3],y),w:Xi(g[4],y),d:Xi(g[5],y),h:Xi(g[6],y),m:Xi(g[7],y),s:Xi(g[8],y)}):d==null?d={}:typeof d=="object"&&("from"in d||"to"in d)&&(B=Md(Xe(d.from),Xe(d.to)),d={},d.ms=B.milliseconds,d.M=B.months),I=new Ls(d),Ps(o)&&a(o,"_locale")&&(I._locale=o._locale),Ps(o)&&a(o,"_isValid")&&(I._isValid=o._isValid),I}zt.fn=Ls.prototype,zt.invalid=dd;function Xi(o,c){var d=o&&parseFloat(o.replace(",","."));return(isNaN(d)?0:d)*c}function al(o,c){var d={};return d.months=c.month()-o.month()+(c.year()-o.year())*12,o.clone().add(d.months,"M").isAfter(c)&&--d.months,d.milliseconds=+c-+o.clone().add(d.months,"M"),d}function Md(o,c){var d;return o.isValid()&&c.isValid()?(c=Qr(c,o),o.isBefore(c)?d=al(o,c):(d=al(c,o),d.milliseconds=-d.milliseconds,d.months=-d.months),d):{milliseconds:0,months:0}}function ol(o,c){return function(d,g){var y,I;return g!==null&&!isNaN(+g)&&(ne(c,"moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),I=d,d=g,g=I),y=zt(d,g),ll(this,y,o),this}}function ll(o,c,d,g){var y=c._milliseconds,I=Jr(c._days),B=Jr(c._months);o.isValid()&&(g=g??!0,B&&Go(o,it(o,"Month")+B*d),I&&Ti(o,"Date",it(o,"Date")+I*d),y&&o._d.setTime(o._d.valueOf()+y*d),g&&i.updateOffset(o,I||B))}var Dd=ol(1,"add"),kd=ol(-1,"subtract");function hl(o){return typeof o=="string"||o instanceof String}function Od(o){return V(o)||_(o)||hl(o)||f(o)||Id(o)||Rd(o)||o===null||o===void 0}function Rd(o){var c=l(o)&&!h(o),d=!1,g=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],y,I,B=g.length;for(y=0;y<B;y+=1)I=g[y],d=d||a(o,I);return c&&d}function Id(o){var c=r(o),d=!1;return c&&(d=o.filter(function(g){return!f(g)&&hl(o)}).length===0),c&&d}function Ld(o){var c=l(o)&&!h(o),d=!1,g=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],y,I;for(y=0;y<g.length;y+=1)I=g[y],d=d||a(o,I);return c&&d}function Pd(o,c){var d=o.diff(c,"days",!0);return d<-6?"sameElse":d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":"sameElse"}function Fd(o,c){arguments.length===1&&(arguments[0]?Od(arguments[0])?(o=arguments[0],c=void 0):Ld(arguments[0])&&(c=arguments[0],o=void 0):(o=void 0,c=void 0));var d=o||Xe(),g=Qr(d,this).startOf("day"),y=i.calendarFormat(this,g)||"sameElse",I=c&&(re(c[y])?c[y].call(this,d):c[y]);return this.format(I||this.localeData().calendar(y,this,Xe(d)))}function Ad(){return new j(this)}function jd(o,c){var d=V(o)?o:Xe(o);return this.isValid()&&d.isValid()?(c=Ne(c)||"millisecond",c==="millisecond"?this.valueOf()>d.valueOf():d.valueOf()<this.clone().startOf(c).valueOf()):!1}function Yd(o,c){var d=V(o)?o:Xe(o);return this.isValid()&&d.isValid()?(c=Ne(c)||"millisecond",c==="millisecond"?this.valueOf()<d.valueOf():this.clone().endOf(c).valueOf()<d.valueOf()):!1}function Nd(o,c,d,g){var y=V(o)?o:Xe(o),I=V(c)?c:Xe(c);return this.isValid()&&y.isValid()&&I.isValid()?(g=g||"()",(g[0]==="("?this.isAfter(y,d):!this.isBefore(y,d))&&(g[1]===")"?this.isBefore(I,d):!this.isAfter(I,d))):!1}function Bd(o,c){var d=V(o)?o:Xe(o),g;return this.isValid()&&d.isValid()?(c=Ne(c)||"millisecond",c==="millisecond"?this.valueOf()===d.valueOf():(g=d.valueOf(),this.clone().startOf(c).valueOf()<=g&&g<=this.clone().endOf(c).valueOf())):!1}function Vd(o,c){return this.isSame(o,c)||this.isAfter(o,c)}function Wd(o,c){return this.isSame(o,c)||this.isBefore(o,c)}function Gd(o,c,d){var g,y,I;if(!this.isValid())return NaN;if(g=Qr(o,this),!g.isValid())return NaN;switch(y=(g.utcOffset()-this.utcOffset())*6e4,c=Ne(c),c){case"year":I=Fs(this,g)/12;break;case"month":I=Fs(this,g);break;case"quarter":I=Fs(this,g)/3;break;case"second":I=(this-g)/1e3;break;case"minute":I=(this-g)/6e4;break;case"hour":I=(this-g)/36e5;break;case"day":I=(this-g-y)/864e5;break;case"week":I=(this-g-y)/6048e5;break;default:I=this-g}return d?I:qe(I)}function Fs(o,c){if(o.date()<c.date())return-Fs(c,o);var d=(c.year()-o.year())*12+(c.month()-o.month()),g=o.clone().add(d,"months"),y,I;return c-g<0?(y=o.clone().add(d-1,"months"),I=(c-g)/(g-y)):(y=o.clone().add(d+1,"months"),I=(c-g)/(y-g)),-(d+I)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zd(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ud(o){if(!this.isValid())return null;var c=o!==!0,d=c?this.clone().utc():this;return d.year()<0||d.year()>9999?Pe(d,c?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):re(Date.prototype.toISOString)?c?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Pe(d,"Z")):Pe(d,c?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Xd(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var o="moment",c="",d,g,y,I;return this.isLocal()||(o=this.utcOffset()===0?"moment.utc":"moment.parseZone",c="Z"),d="["+o+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",y="-MM-DD[T]HH:mm:ss.SSS",I=c+'[")]',this.format(d+g+y+I)}function Hd(o){o||(o=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var c=Pe(this,o);return this.localeData().postformat(c)}function Zd(o,c){return this.isValid()&&(V(o)&&o.isValid()||Xe(o).isValid())?zt({to:this,from:o}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()}function Kd(o){return this.from(Xe(),o)}function qd(o,c){return this.isValid()&&(V(o)&&o.isValid()||Xe(o).isValid())?zt({from:this,to:o}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()}function Jd(o){return this.to(Xe(),o)}function cl(o){var c;return o===void 0?this._locale._abbr:(c=ui(o),c!=null&&(this._locale=c),this)}var ul=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(o){return o===void 0?this.localeData():this.locale(o)});function dl(){return this._locale}var As=1e3,fn=60*As,js=60*fn,fl=(365*400+97)*24*js;function gn(o,c){return(o%c+c)%c}function gl(o,c,d){return o<100&&o>=0?new Date(o+400,c,d)-fl:new Date(o,c,d).valueOf()}function ml(o,c,d){return o<100&&o>=0?Date.UTC(o+400,c,d)-fl:Date.UTC(o,c,d)}function $d(o){var c,d;if(o=Ne(o),o===void 0||o==="millisecond"||!this.isValid())return this;switch(d=this._isUTC?ml:gl,o){case"year":c=d(this.year(),0,1);break;case"quarter":c=d(this.year(),this.month()-this.month()%3,1);break;case"month":c=d(this.year(),this.month(),1);break;case"week":c=d(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":c=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":c=d(this.year(),this.month(),this.date());break;case"hour":c=this._d.valueOf(),c-=gn(c+(this._isUTC?0:this.utcOffset()*fn),js);break;case"minute":c=this._d.valueOf(),c-=gn(c,fn);break;case"second":c=this._d.valueOf(),c-=gn(c,As);break}return this._d.setTime(c),i.updateOffset(this,!0),this}function Qd(o){var c,d;if(o=Ne(o),o===void 0||o==="millisecond"||!this.isValid())return this;switch(d=this._isUTC?ml:gl,o){case"year":c=d(this.year()+1,0,1)-1;break;case"quarter":c=d(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":c=d(this.year(),this.month()+1,1)-1;break;case"week":c=d(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":c=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":c=d(this.year(),this.month(),this.date()+1)-1;break;case"hour":c=this._d.valueOf(),c+=js-gn(c+(this._isUTC?0:this.utcOffset()*fn),js)-1;break;case"minute":c=this._d.valueOf(),c+=fn-gn(c,fn)-1;break;case"second":c=this._d.valueOf(),c+=As-gn(c,As)-1;break}return this._d.setTime(c),i.updateOffset(this,!0),this}function ef(){return this._d.valueOf()-(this._offset||0)*6e4}function tf(){return Math.floor(this.valueOf()/1e3)}function nf(){return new Date(this.valueOf())}function sf(){var o=this;return[o.year(),o.month(),o.date(),o.hour(),o.minute(),o.second(),o.millisecond()]}function rf(){var o=this;return{years:o.year(),months:o.month(),date:o.date(),hours:o.hours(),minutes:o.minutes(),seconds:o.seconds(),milliseconds:o.milliseconds()}}function af(){return this.isValid()?this.toISOString():null}function of(){return M(this)}function lf(){return x({},b(this))}function hf(){return b(this).overflow}function cf(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr"),Z("NN",0,0,"eraAbbr"),Z("NNN",0,0,"eraAbbr"),Z("NNNN",0,0,"eraName"),Z("NNNNN",0,0,"eraNarrow"),Z("y",["y",1],"yo","eraYear"),Z("y",["yy",2],0,"eraYear"),Z("y",["yyy",3],0,"eraYear"),Z("y",["yyyy",4],0,"eraYear"),T("N",ta),T("NN",ta),T("NNN",ta),T("NNNN",wf),T("NNNNN",bf),Y(["N","NN","NNN","NNNN","NNNNN"],function(o,c,d,g){var y=d._locale.erasParse(o,g,d._strict);y?b(d).era=y:b(d).invalidEra=o}),T("y",bt),T("yy",bt),T("yyy",bt),T("yyyy",bt),T("yo",Cf),Y(["y","yy","yyy","yyyy"],_e),Y(["yo"],function(o,c,d,g){var y;d._locale._eraYearOrdinalRegex&&(y=o.match(d._locale._eraYearOrdinalRegex)),d._locale.eraYearOrdinalParse?c[_e]=d._locale.eraYearOrdinalParse(o,y):c[_e]=parseInt(o,10)});function uf(o,c){var d,g,y,I=this._eras||ui("en")._eras;for(d=0,g=I.length;d<g;++d){switch(typeof I[d].since){case"string":y=i(I[d].since).startOf("day"),I[d].since=y.valueOf();break}switch(typeof I[d].until){case"undefined":I[d].until=1/0;break;case"string":y=i(I[d].until).startOf("day").valueOf(),I[d].until=y.valueOf();break}}return I}function df(o,c,d){var g,y,I=this.eras(),B,he,be;for(o=o.toUpperCase(),g=0,y=I.length;g<y;++g)if(B=I[g].name.toUpperCase(),he=I[g].abbr.toUpperCase(),be=I[g].narrow.toUpperCase(),d)switch(c){case"N":case"NN":case"NNN":if(he===o)return I[g];break;case"NNNN":if(B===o)return I[g];break;case"NNNNN":if(be===o)return I[g];break}else if([B,he,be].indexOf(o)>=0)return I[g]}function ff(o,c){var d=o.since<=o.until?1:-1;return c===void 0?i(o.since).year():i(o.since).year()+(c-o.offset)*d}function gf(){var o,c,d,g=this.localeData().eras();for(o=0,c=g.length;o<c;++o)if(d=this.clone().startOf("day").valueOf(),g[o].since<=d&&d<=g[o].until||g[o].until<=d&&d<=g[o].since)return g[o].name;return""}function mf(){var o,c,d,g=this.localeData().eras();for(o=0,c=g.length;o<c;++o)if(d=this.clone().startOf("day").valueOf(),g[o].since<=d&&d<=g[o].until||g[o].until<=d&&d<=g[o].since)return g[o].narrow;return""}function _f(){var o,c,d,g=this.localeData().eras();for(o=0,c=g.length;o<c;++o)if(d=this.clone().startOf("day").valueOf(),g[o].since<=d&&d<=g[o].until||g[o].until<=d&&d<=g[o].since)return g[o].abbr;return""}function pf(){var o,c,d,g,y=this.localeData().eras();for(o=0,c=y.length;o<c;++o)if(d=y[o].since<=y[o].until?1:-1,g=this.clone().startOf("day").valueOf(),y[o].since<=g&&g<=y[o].until||y[o].until<=g&&g<=y[o].since)return(this.year()-i(y[o].since).year())*d+y[o].offset;return this.year()}function yf(o){return a(this,"_erasNameRegex")||ia.call(this),o?this._erasNameRegex:this._erasRegex}function vf(o){return a(this,"_erasAbbrRegex")||ia.call(this),o?this._erasAbbrRegex:this._erasRegex}function xf(o){return a(this,"_erasNarrowRegex")||ia.call(this),o?this._erasNarrowRegex:this._erasRegex}function ta(o,c){return c.erasAbbrRegex(o)}function wf(o,c){return c.erasNameRegex(o)}function bf(o,c){return c.erasNarrowRegex(o)}function Cf(o,c){return c._eraYearOrdinalRegex||bt}function ia(){var o=[],c=[],d=[],g=[],y,I,B=this.eras();for(y=0,I=B.length;y<I;++y)c.push(G(B[y].name)),o.push(G(B[y].abbr)),d.push(G(B[y].narrow)),g.push(G(B[y].name)),g.push(G(B[y].abbr)),g.push(G(B[y].narrow));this._erasRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+c.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+d.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100}),Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ys(o,c){Z(0,[o,o.length],0,c)}Ys("gggg","weekYear"),Ys("ggggg","weekYear"),Ys("GGGG","isoWeekYear"),Ys("GGGGG","isoWeekYear"),tt("weekYear","gg"),tt("isoWeekYear","GG"),We("weekYear",1),We("isoWeekYear",1),T("G",ht),T("g",ht),T("GG",ke,dt),T("gg",ke,dt),T("GGGG",Ei,At),T("gggg",Ei,At),T("GGGGG",nt,$t),T("ggggg",nt,$t),we(["gggg","ggggg","GGGG","GGGGG"],function(o,c,d,g){c[g.substr(0,2)]=ye(o)}),we(["gg","GG"],function(o,c,d,g){c[g]=i.parseTwoDigitYear(o)});function Sf(o){return _l.call(this,o,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Tf(o){return _l.call(this,o,this.isoWeek(),this.isoWeekday(),1,4)}function Ef(){return ci(this.year(),1,4)}function Mf(){return ci(this.isoWeekYear(),1,4)}function Df(){var o=this.localeData()._week;return ci(this.year(),o.dow,o.doy)}function kf(){var o=this.localeData()._week;return ci(this.weekYear(),o.dow,o.doy)}function _l(o,c,d,g,y){var I;return o==null?Zn(this,g,y).year:(I=ci(o,g,y),c>I&&(c=I),Of.call(this,o,c,d,g,y))}function Of(o,c,d,g,y){var I=Ho(o,c,d,g,y),B=Hn(I.year,0,I.dayOfYear);return this.year(B.getUTCFullYear()),this.month(B.getUTCMonth()),this.date(B.getUTCDate()),this}Z("Q",0,"Qo","quarter"),tt("quarter","Q"),We("quarter",7),T("Q",Ui),Y("Q",function(o,c){c[J]=(ye(o)-1)*3});function Rf(o){return o==null?Math.ceil((this.month()+1)/3):this.month((o-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date"),tt("date","D"),We("date",9),T("D",ke),T("DD",ke,dt),T("Do",function(o,c){return o?c._dayOfMonthOrdinalParse||c._ordinalParse:c._dayOfMonthOrdinalParseLenient}),Y(["D","DD"],Me),Y("Do",function(o,c){c[Me]=ye(o.match(ke)[0])});var pl=Rt("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear"),tt("dayOfYear","DDD"),We("dayOfYear",4),T("DDD",hi),T("DDDD",li),Y(["DDD","DDDD"],function(o,c,d){d._dayOfYear=ye(o)});function If(o){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return o==null?c:this.add(o-c,"d")}Z("m",["mm",2],0,"minute"),tt("minute","m"),We("minute",14),T("m",ke),T("mm",ke,dt),Y(["m","mm"],je);var Lf=Rt("Minutes",!1);Z("s",["ss",2],0,"second"),tt("second","s"),We("second",15),T("s",ke),T("ss",ke,dt),Y(["s","ss"],Ct);var Pf=Rt("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)}),Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Z(0,["SSS",3],0,"millisecond"),Z(0,["SSSS",4],0,function(){return this.millisecond()*10}),Z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),tt("millisecond","ms"),We("millisecond",16),T("S",hi,Ui),T("SS",hi,dt),T("SSS",hi,li);var Di,yl;for(Di="SSSS";Di.length<=9;Di+="S")T(Di,bt);function Ff(o,c){c[Gt]=ye(("0."+o)*1e3)}for(Di="S";Di.length<=9;Di+="S")Y(Di,Ff);yl=Rt("Milliseconds",!1),Z("z",0,0,"zoneAbbr"),Z("zz",0,0,"zoneName");function Af(){return this._isUTC?"UTC":""}function jf(){return this._isUTC?"Coordinated Universal Time":""}var q=j.prototype;q.add=Dd,q.calendar=Fd,q.clone=Ad,q.diff=Gd,q.endOf=Qd,q.format=Hd,q.from=Zd,q.fromNow=Kd,q.to=qd,q.toNow=Jd,q.get=wt,q.invalidAt=hf,q.isAfter=jd,q.isBefore=Yd,q.isBetween=Nd,q.isSame=Bd,q.isSameOrAfter=Vd,q.isSameOrBefore=Wd,q.isValid=of,q.lang=ul,q.locale=cl,q.localeData=dl,q.max=ad,q.min=rd,q.parsingFlags=lf,q.set=Un,q.startOf=$d,q.subtract=kd,q.toArray=sf,q.toObject=rf,q.toDate=nf,q.toISOString=Ud,q.inspect=Xd,typeof Symbol<"u"&&Symbol.for!=null&&(q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),q.toJSON=af,q.toString=zd,q.unix=tf,q.valueOf=ef,q.creationData=cf,q.eraName=gf,q.eraNarrow=mf,q.eraAbbr=_f,q.eraYear=pf,q.year=Xo,q.isLeapYear=su,q.weekYear=Sf,q.isoWeekYear=Tf,q.quarter=q.quarters=Rf,q.month=zo,q.daysInMonth=tu,q.week=q.weeks=cu,q.isoWeek=q.isoWeeks=uu,q.weeksInYear=Df,q.weeksInWeekYear=kf,q.isoWeeksInYear=Ef,q.isoWeeksInISOWeekYear=Mf,q.date=pl,q.day=q.days=Su,q.weekday=Tu,q.isoWeekday=Eu,q.dayOfYear=If,q.hour=q.hours=Lu,q.minute=q.minutes=Lf,q.second=q.seconds=Pf,q.millisecond=q.milliseconds=yl,q.utcOffset=md,q.utc=pd,q.local=yd,q.parseZone=vd,q.hasAlignedHourOffset=xd,q.isDST=wd,q.isLocal=Cd,q.isUtcOffset=Sd,q.isUtc=rl,q.isUTC=rl,q.zoneAbbr=Af,q.zoneName=jf,q.dates=z("dates accessor is deprecated. Use date instead.",pl),q.months=z("months accessor is deprecated. Use month instead",zo),q.years=z("years accessor is deprecated. Use year instead",Xo),q.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_d),q.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",bd);function Yf(o){return Xe(o*1e3)}function Nf(){return Xe.apply(null,arguments).parseZone()}function vl(o){return o}var Re=ie.prototype;Re.calendar=Se,Re.longDateFormat=N,Re.invalidDate=Q,Re.ordinal=Ee,Re.preparse=vl,Re.postformat=vl,Re.relativeTime=Vt,Re.pastFuture=Jt,Re.set=Ce,Re.eras=uf,Re.erasParse=df,Re.erasConvertYear=ff,Re.erasAbbrRegex=vf,Re.erasNameRegex=yf,Re.erasNarrowRegex=xf,Re.months=Jc,Re.monthsShort=$c,Re.monthsParse=eu,Re.monthsRegex=nu,Re.monthsShortRegex=iu,Re.week=au,Re.firstDayOfYear=hu,Re.firstDayOfWeek=lu,Re.weekdays=vu,Re.weekdaysMin=wu,Re.weekdaysShort=xu,Re.weekdaysParse=Cu,Re.weekdaysRegex=Mu,Re.weekdaysShortRegex=Du,Re.weekdaysMinRegex=ku,Re.isPM=Ru,Re.meridiem=Pu;function Ns(o,c,d,g){var y=ui(),I=w().set(g,c);return y[d](I,o)}function xl(o,c,d){if(f(o)&&(c=o,o=void 0),o=o||"",c!=null)return Ns(o,c,d,"month");var g,y=[];for(g=0;g<12;g++)y[g]=Ns(o,g,d,"month");return y}function na(o,c,d,g){typeof o=="boolean"?(f(c)&&(d=c,c=void 0),c=c||""):(c=o,d=c,o=!1,f(c)&&(d=c,c=void 0),c=c||"");var y=ui(),I=o?y._week.dow:0,B,he=[];if(d!=null)return Ns(c,(d+I)%7,g,"day");for(B=0;B<7;B++)he[B]=Ns(c,(B+I)%7,g,"day");return he}function Bf(o,c){return xl(o,c,"months")}function Vf(o,c){return xl(o,c,"monthsShort")}function Wf(o,c,d){return na(o,c,d,"weekdays")}function Gf(o,c,d){return na(o,c,d,"weekdaysShort")}function zf(o,c,d){return na(o,c,d,"weekdaysMin")}Mi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(o){var c=o%10,d=ye(o%100/10)===1?"th":c===1?"st":c===2?"nd":c===3?"rd":"th";return o+d}}),i.lang=z("moment.lang is deprecated. Use moment.locale instead.",Mi),i.langData=z("moment.langData is deprecated. Use moment.localeData instead.",ui);var di=Math.abs;function Uf(){var o=this._data;return this._milliseconds=di(this._milliseconds),this._days=di(this._days),this._months=di(this._months),o.milliseconds=di(o.milliseconds),o.seconds=di(o.seconds),o.minutes=di(o.minutes),o.hours=di(o.hours),o.months=di(o.months),o.years=di(o.years),this}function wl(o,c,d,g){var y=zt(c,d);return o._milliseconds+=g*y._milliseconds,o._days+=g*y._days,o._months+=g*y._months,o._bubble()}function Xf(o,c){return wl(this,o,c,1)}function Hf(o,c){return wl(this,o,c,-1)}function bl(o){return o<0?Math.floor(o):Math.ceil(o)}function Zf(){var o=this._milliseconds,c=this._days,d=this._months,g=this._data,y,I,B,he,be;return o>=0&&c>=0&&d>=0||o<=0&&c<=0&&d<=0||(o+=bl(sa(d)+c)*864e5,c=0,d=0),g.milliseconds=o%1e3,y=qe(o/1e3),g.seconds=y%60,I=qe(y/60),g.minutes=I%60,B=qe(I/60),g.hours=B%24,c+=qe(B/24),be=qe(Cl(c)),d+=be,c-=bl(sa(be)),he=qe(d/12),d%=12,g.days=c,g.months=d,g.years=he,this}function Cl(o){return o*4800/146097}function sa(o){return o*146097/4800}function Kf(o){if(!this.isValid())return NaN;var c,d,g=this._milliseconds;if(o=Ne(o),o==="month"||o==="quarter"||o==="year")switch(c=this._days+g/864e5,d=this._months+Cl(c),o){case"month":return d;case"quarter":return d/3;case"year":return d/12}else switch(c=this._days+Math.round(sa(this._months)),o){case"week":return c/7+g/6048e5;case"day":return c+g/864e5;case"hour":return c*24+g/36e5;case"minute":return c*1440+g/6e4;case"second":return c*86400+g/1e3;case"millisecond":return Math.floor(c*864e5)+g;default:throw new Error("Unknown unit "+o)}}function qf(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ye(this._months/12)*31536e6:NaN}function fi(o){return function(){return this.as(o)}}var Jf=fi("ms"),$f=fi("s"),Qf=fi("m"),eg=fi("h"),tg=fi("d"),ig=fi("w"),ng=fi("M"),sg=fi("Q"),rg=fi("y");function ag(){return zt(this)}function og(o){return o=Ne(o),this.isValid()?this[o+"s"]():NaN}function Hi(o){return function(){return this.isValid()?this._data[o]:NaN}}var lg=Hi("milliseconds"),hg=Hi("seconds"),cg=Hi("minutes"),ug=Hi("hours"),dg=Hi("days"),fg=Hi("months"),gg=Hi("years");function mg(){return qe(this.days()/7)}var gi=Math.round,mn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function _g(o,c,d,g,y){return y.relativeTime(c||1,!!d,o,g)}function pg(o,c,d,g){var y=zt(o).abs(),I=gi(y.as("s")),B=gi(y.as("m")),he=gi(y.as("h")),be=gi(y.as("d")),Ge=gi(y.as("M")),St=gi(y.as("w")),mi=gi(y.as("y")),ki=I<=d.ss&&["s",I]||I<d.s&&["ss",I]||B<=1&&["m"]||B<d.m&&["mm",B]||he<=1&&["h"]||he<d.h&&["hh",he]||be<=1&&["d"]||be<d.d&&["dd",be];return d.w!=null&&(ki=ki||St<=1&&["w"]||St<d.w&&["ww",St]),ki=ki||Ge<=1&&["M"]||Ge<d.M&&["MM",Ge]||mi<=1&&["y"]||["yy",mi],ki[2]=c,ki[3]=+o>0,ki[4]=g,_g.apply(null,ki)}function yg(o){return o===void 0?gi:typeof o=="function"?(gi=o,!0):!1}function vg(o,c){return mn[o]===void 0?!1:c===void 0?mn[o]:(mn[o]=c,o==="s"&&(mn.ss=c-1),!0)}function xg(o,c){if(!this.isValid())return this.localeData().invalidDate();var d=!1,g=mn,y,I;return typeof o=="object"&&(c=o,o=!1),typeof o=="boolean"&&(d=o),typeof c=="object"&&(g=Object.assign({},mn,c),c.s!=null&&c.ss==null&&(g.ss=c.s-1)),y=this.localeData(),I=pg(this,!d,g,y),d&&(I=y.pastFuture(+this,I)),y.postformat(I)}var ra=Math.abs;function _n(o){return(o>0)-(o<0)||+o}function Bs(){if(!this.isValid())return this.localeData().invalidDate();var o=ra(this._milliseconds)/1e3,c=ra(this._days),d=ra(this._months),g,y,I,B,he=this.asSeconds(),be,Ge,St,mi;return he?(g=qe(o/60),y=qe(g/60),o%=60,g%=60,I=qe(d/12),d%=12,B=o?o.toFixed(3).replace(/\.?0+$/,""):"",be=he<0?"-":"",Ge=_n(this._months)!==_n(he)?"-":"",St=_n(this._days)!==_n(he)?"-":"",mi=_n(this._milliseconds)!==_n(he)?"-":"",be+"P"+(I?Ge+I+"Y":"")+(d?Ge+d+"M":"")+(c?St+c+"D":"")+(y||g||o?"T":"")+(y?mi+y+"H":"")+(g?mi+g+"M":"")+(o?mi+B+"S":"")):"P0D"}var De=Ls.prototype;De.isValid=ud,De.abs=Uf,De.add=Xf,De.subtract=Hf,De.as=Kf,De.asMilliseconds=Jf,De.asSeconds=$f,De.asMinutes=Qf,De.asHours=eg,De.asDays=tg,De.asWeeks=ig,De.asMonths=ng,De.asQuarters=sg,De.asYears=rg,De.valueOf=qf,De._bubble=Zf,De.clone=ag,De.get=og,De.milliseconds=lg,De.seconds=hg,De.minutes=cg,De.hours=ug,De.days=dg,De.weeks=mg,De.months=fg,De.years=gg,De.humanize=xg,De.toISOString=Bs,De.toString=Bs,De.toJSON=Bs,De.locale=cl,De.localeData=dl,De.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Bs),De.lang=ul,Z("X",0,0,"unix"),Z("x",0,0,"valueOf"),T("x",ht),T("X",D),Y("X",function(o,c,d){d._d=new Date(parseFloat(o)*1e3)}),Y("x",function(o,c,d){d._d=new Date(ye(o))});//! moment.js
return i.version="2.29.4",s(Xe),i.fn=q,i.min=od,i.max=ld,i.now=hd,i.utc=w,i.unix=Yf,i.months=Bf,i.isDate=_,i.locale=Mi,i.invalid=k,i.duration=zt,i.isMoment=V,i.weekdays=Wf,i.parseZone=Nf,i.localeData=ui,i.isDuration=Ps,i.monthsShort=Vf,i.weekdaysMin=zf,i.defineLocale=Xr,i.updateLocale=Yu,i.locales=Nu,i.weekdaysShort=Gf,i.normalizeUnits=Ne,i.relativeTimeRounding=yg,i.relativeTimeThreshold=vg,i.calendarFormat=Pd,i.prototype=q,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(tw)),Cr}var wa,_h;function iw(){if(_h)return wa;_h=1,wa={toJalaali:e,toGregorian:t,isValidJalaaliDate:i,isLeapJalaaliYear:s,jalaaliMonthLength:r,jalCal:a,j2d:h,d2j:u,g2d:f,d2g:_,jalaaliToDateObject:x,jalaaliWeek:p};var n=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function e(b,E,M){return Object.prototype.toString.call(b)==="[object Date]"&&(M=b.getDate(),E=b.getMonth()+1,b=b.getFullYear()),u(f(b,E,M))}function t(b,E,M){return _(h(b,E,M))}function i(b,E,M){return b>=-61&&b<=3177&&E>=1&&E<=12&&M>=1&&M<=r(b,E)}function s(b){return l(b)===0}function r(b,E){return E<=6?31:E<=11||s(b)?30:29}function l(b){var E=n.length,M=n[0],k,P,F,A,j;if(b<M||b>=n[E-1])throw new Error("Invalid Jalaali year "+b);for(j=1;j<E&&(k=n[j],P=k-M,!(b<k));j+=1)M=k;return A=b-M,P-A<6&&(A=A-P+w(P+4,33)*33),F=C(C(A+1,33)-1,4),F===-1&&(F=4),F}function a(b,E){var M=n.length,k=b+621,P=-14,F=n[0],A,j,V,H,z,se,ne;if(b<F||b>=n[M-1])throw new Error("Invalid Jalaali year "+b);for(ne=1;ne<M&&(A=n[ne],j=A-F,!(b<A));ne+=1)P=P+w(j,33)*8+w(C(j,33),4),F=A;return se=b-F,P=P+w(se,33)*8+w(C(se,33)+3,4),C(j,33)===4&&j-se===4&&(P+=1),H=w(k,4)-w((w(k,100)+1)*3,4)-150,z=20+P-H,E?{gy:k,march:z}:(j-se<6&&(se=se-j+w(j+4,33)*33),V=C(C(se+1,33)-1,4),V===-1&&(V=4),{leap:V,gy:k,march:z})}function h(b,E,M){var k=a(b,!0);return f(k.gy,3,k.march)+(E-1)*31-w(E,7)*(E-7)+M-1}function u(b){var E=_(b).gy,M=E-621,k=a(M,!1),P=f(E,3,k.march),F,A,j;if(j=b-P,j>=0){if(j<=185)return A=1+w(j,31),F=C(j,31)+1,{jy:M,jm:A,jd:F};j-=186}else M-=1,j+=179,k.leap===1&&(j+=1);return A=7+w(j,30),F=C(j,30)+1,{jy:M,jm:A,jd:F}}function f(b,E,M){var k=w((b+w(E-8,6)+100100)*1461,4)+w(153*C(E+9,12)+2,5)+M-34840408;return k=k-w(w(b+100100+w(E-8,6),100)*3,4)+752,k}function _(b){var E,M,k,P,F;return E=4*b+139361631,E=E+w(w(4*b+183187720,146097)*3,4)*4-3908,M=w(C(E,1461),4)*5+308,k=w(C(M,153),5)+1,P=C(w(M,153),12)+1,F=w(E,1461)-100100+w(8-P,6),{gy:F,gm:P,gd:k}}function p(b,E,M){var k=x(b,E,M).getDay(),P=k==6?0:-(k+1),F=6+P;return{saturday:u(h(b,E,M+P)),friday:u(h(b,E,M+F))}}function x(b,E,M,k,P,F,A){var j=t(b,E,M);return new Date(j.gy,j.gm-1,j.gd,k||0,P||0,F||0,A||0)}function w(b,E){return~~(b/E)}function C(b,E){return b-~~(b/E)*E}return wa}var ba,ph;function nw(){if(ph)return ba;ph=1,ba=ae;var n=Gc(),e=iw(),t=/(\[[^\[]*\])|(\\)?j(Mo|MM?M?M?|Do|DDDo|DD?D?D?|w[o|w]?|YYYYY|YYYY|YY|gg(ggg?)?|)|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,i=/(\[[^\[]*\])|(\\)?(LTS?|LL?L?L?|l{1,4})/g,s=/\d\d?/,r=/\d{1,3}/,l=/\d{3}/,a=/\d{1,4}/,h=/[+\-]?\d{1,6}/,u=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,f=/Z|[\+\-]\d\d:?\d\d/i,_=/T/i,p=/[\+\-]?\d+(\.\d{1,3})?/,x={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},w={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},C={jm:"jmonth",jmonths:"jmonth",jy:"jyear",jyears:"jyear"},b={},E="DDD w M D".split(" "),M="M D w".split(" "),k={jM:function(){return this.jMonth()+1},jMMM:function(O){return this.localeData().jMonthsShort(this,O)},jMMMM:function(O){return this.localeData().jMonths(this,O)},jD:function(){return this.jDate()},jDDD:function(){return this.jDayOfYear()},jw:function(){return this.jWeek()},jYY:function(){return j(this.jYear()%100,2)},jYYYY:function(){return j(this.jYear(),4)},jYYYYY:function(){return j(this.jYear(),5)},jgg:function(){return j(this.jWeekYear()%100,2)},jgggg:function(){return this.jWeekYear()},jggggg:function(){return j(this.jWeekYear(),5)}};function P(O,R){return function(N){return j(O.call(this,N),R)}}function F(O,R){return function(N){return this.localeData().ordinal(O.call(this,N),R)}}(function(){for(var O;E.length;)O=E.pop(),k["j"+O+"o"]=F(k["j"+O],O);for(;M.length;)O=M.pop(),k["j"+O+O]=P(k["j"+O],2);k.jDDDD=P(k.jDDD,3)})();function A(O,R){var N;for(N in R)R.hasOwnProperty(N)&&(O[N]=R[N]);return O}function j(O,R){for(var N=O+"";N.length<R;)N="0"+N;return N}function V(O){return Object.prototype.toString.call(O)==="[object Array]"}function H(O){if(O){var R=O.toLowerCase();O=C[R]||R}return O}function z(O,R,N,W){var Q=O._d;isNaN(R)&&(O._isValid=!1),O._isUTC?O._d=new Date(Date.UTC(R,N,W,Q.getUTCHours(),Q.getUTCMinutes(),Q.getUTCSeconds(),Q.getUTCMilliseconds())):O._d=new Date(R,N,W,Q.getHours(),Q.getMinutes(),Q.getSeconds(),Q.getMilliseconds())}function se(O){function R(){}return R.prototype=O,new R}function ne(O){return Object.getPrototypeOf?Object.getPrototypeOf(O):"".__proto__?O.__proto__:O.constructor.prototype}A(ne(n.localeData()),{_jMonths:["Farvardin","Ordibehesht","Khordaad","Tir","Amordaad","Shahrivar","Mehr","Aabaan","Aazar","Dey","Bahman","Esfand"],jMonths:function(O){return this._jMonths[O.jMonth()]},_jMonthsShort:["Far","Ord","Kho","Tir","Amo","Sha","Meh","Aab","Aaz","Dey","Bah","Esf"],jMonthsShort:function(O){return this._jMonthsShort[O.jMonth()]},jMonthsParse:function(O){var R,N,W;for(this._jMonthsParse||(this._jMonthsParse=[]),R=0;R<12;R+=1)if(this._jMonthsParse[R]||(N=ae([2e3,(2+R)%12,25]),W="^"+this.jMonths(N,"")+"|^"+this.jMonthsShort(N,""),this._jMonthsParse[R]=new RegExp(W.replace(".",""),"i")),this._jMonthsParse[R].test(O))return R}});function re(O){var R=O.match(t),N=R.length,W;for(W=0;W<N;W+=1)k[R[W]]&&(R[W]=k[R[W]]);return function(Q){var K="";for(W=0;W<N;W+=1)K+=R[W]instanceof Function?"["+R[W].call(Q,O)+"]":R[W];return K}}function Ce(O,R){switch(O){case"jDDDD":return l;case"jYYYY":return a;case"jYYYYY":return h;case"jDDD":return r;case"jMMM":case"jMMMM":return u;case"jMM":case"jDD":case"jYY":case"jM":case"jD":return s;case"DDDD":return l;case"YYYY":return a;case"YYYYY":return h;case"S":case"SS":case"SSS":case"DDD":return r;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return u;case"a":case"A":return n.localeData(R._l)._meridiemParse;case"X":return p;case"Z":case"ZZ":return f;case"T":return _;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return s;default:return new RegExp(O.replace("\\",""))}}function te(O,R,N){var W,Q=N._a;switch(O){case"jM":case"jMM":Q[1]=R==null?0:~~R-1;break;case"jMMM":case"jMMMM":W=n.localeData(N._l).jMonthsParse(R),W!=null?Q[1]=W:N._isValid=!1;break;case"jD":case"jDD":case"jDDD":case"jDDDD":R!=null&&(Q[2]=~~R);break;case"jYY":Q[0]=~~R+(~~R>47?1300:1400);break;case"jYYYY":case"jYYYYY":Q[0]=~~R}R==null&&(N._isValid=!1)}function ie(O){var R,N,W=O._a[0],Q=O._a[1],K=O._a[2];return W==null&&Q==null&&K==null?[0,0,1]:(W=W??0,Q=Q??0,K=K??1,(K<1||K>ae.jDaysInMonth(W,Q)||Q<0||Q>11)&&(O._isValid=!1),R=et(W,Q,K),N=Z(R.gy,R.gm,R.gd),isNaN(R.gy)&&(O._isValid=!1),O._jDiff=0,~~N.jy!==W&&(O._jDiff+=1),~~N.jm!==Q&&(O._jDiff+=1),~~N.jd!==K&&(O._jDiff+=1),[R.gy,R.gm,R.gd])}function $(O){var R=O._f.match(t),N=O._i+"",W=R.length,Q,K,de;for(O._a=[],Q=0;Q<W;Q+=1)K=R[Q],de=(Ce(K,O).exec(N)||[])[0],de&&(N=N.slice(N.indexOf(de)+de.length)),k[K]&&te(K,de,O);return N&&(O._il=N),ie(O)}function ue(O,R){var N=O._f.length,W,Q,K,de,Ee,ze;if(N===0)return U(new Date(NaN));for(W=0;W<N;W+=1)Q=O._f[W],Ee=0,K=U(O._i,Q,O._l,O._strict,R),K.isValid()&&(Ee+=K._jDiff,K._il&&(Ee+=K._il.length),(ze==null||Ee<ze)&&(ze=Ee,de=K));return de}function Se(O){var R=O._i+"",N="",W="",Q=O._f.match(t),K=Q.length,de,Ee,ze;for(de=0;de<K;de+=1)Ee=Q[de],ze=(Ce(Ee,O).exec(R)||[])[0],ze&&(R=R.slice(R.indexOf(ze)+ze.length)),k[Ee]instanceof Function||(W+=Ee,ze&&(N+=ze));O._i=N,O._f=W}function me(O,R,N){var W=N-R,Q=N-O.day(),K;return Q>W&&(Q-=7),Q<W-7&&(Q+=7),K=ae(O).add(Q,"d"),{week:Math.ceil(K.jDayOfYear()/7),year:K.jYear()}}var Le=57724432199999;function U(O,R,N,W,Q){typeof N=="boolean"&&(W=N,N=void 0),R&&typeof R=="string"&&(R=pe(R,n));var K={_i:O,_f:R,_l:N,_strict:W,_isUTC:Q},de,Ee,ze,Vt=O,Jt=R;if(R){if(V(R))return ue(K,Q);de=$(K),Se(K),R="YYYY-MM-DD-"+K._f,O=j(de[0],4)+"-"+j(de[1]+1,2)+"-"+j(de[2],2)+"-"+K._i}return Q?Ee=n.utc(O,R,N,W):Ee=n(O,R,N,W),K._isValid===!1&&(Ee._isValid=!1),Ee._jDiff=K._jDiff||0,ze=se(ae.fn),A(ze,Ee),W&&R&&ze.isValid()&&(ze._isValid=ze.format(Jt)===Vt),Ee._d.getTime()>Le&&(ze._isValid=!1),ze}function ae(O,R,N,W){return U(O,R,N,W,!1)}A(ae,n),ae.fn=se(n.fn),ae.utc=function(O,R,N,W){return U(O,R,N,W,!0)},ae.unix=function(O){return U(O*1e3)};function pe(O,R){for(var N=5,W=function(Q){return R.localeData().longDateFormat(Q)||Q};N>0&&i.test(O);)N-=1,O=O.replace(i,W);return O}ae.fn.format=function(O){return O&&(O=pe(O,this),b[O]||(b[O]=re(O)),O=b[O](this)),n.fn.format.call(this,O)},ae.fn.jYear=function(O){var R,N,W;return typeof O=="number"?(N=Z(this.year(),this.month(),this.date()),R=Math.min(N.jd,ae.jDaysInMonth(O,N.jm)),W=et(O,N.jm,R),z(this,W.gy,W.gm,W.gd),n.updateOffset(this),this):Z(this.year(),this.month(),this.date()).jy},ae.fn.jMonth=function(O){var R,N,W;return O!=null?typeof O=="string"&&(O=this.localeData().jMonthsParse(O),typeof O!="number")?this:(N=Z(this.year(),this.month(),this.date()),R=Math.min(N.jd,ae.jDaysInMonth(N.jy,O)),this.jYear(N.jy+Ke(O,12)),O=Pe(O,12),O<0&&(O+=12,this.jYear(this.jYear()-1)),W=et(this.jYear(),O,R),z(this,W.gy,W.gm,W.gd),n.updateOffset(this),this):Z(this.year(),this.month(),this.date()).jm},ae.fn.jDate=function(O){var R,N;return typeof O=="number"?(R=Z(this.year(),this.month(),this.date()),N=et(R.jy,R.jm,O),z(this,N.gy,N.gm,N.gd),n.updateOffset(this),this):Z(this.year(),this.month(),this.date()).jd},ae.fn.jDayOfYear=function(O){var R=Math.round((ae(this).startOf("day")-ae(this).startOf("jYear"))/864e5)+1;return O==null?R:this.add(O-R,"d")},ae.fn.jWeek=function(O){var R=me(this,this.localeData()._week.dow,this.localeData()._week.doy).week;return O==null?R:this.add((O-R)*7,"d")},ae.fn.jWeekYear=function(O){var R=me(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return O==null?R:this.add(O-R,"y")},ae.fn.add=function(O,R){var N;return R!==null&&!isNaN(+R)&&(N=O,O=R,R=N),R=H(R),R==="jyear"?this.jYear(this.jYear()+O):R==="jmonth"?this.jMonth(this.jMonth()+O):(n.fn.add.call(this,O,R),isNaN(this.jYear())&&(this._isValid=!1)),this},ae.fn.subtract=function(O,R){var N;return R!==null&&!isNaN(+R)&&(N=O,O=R,R=N),R=H(R),R==="jyear"?this.jYear(this.jYear()-O):R==="jmonth"?this.jMonth(this.jMonth()-O):n.fn.subtract.call(this,O,R),this},ae.fn.startOf=function(O){return O=H(O),O==="jyear"||O==="jmonth"?(O==="jyear"&&this.jMonth(0),this.jDate(1),this.hours(0),this.minutes(0),this.seconds(0),this.milliseconds(0),this):n.fn.startOf.call(this,O)},ae.fn.endOf=function(O){return O=H(O),O===void 0||O==="milisecond"?this:this.startOf(O).add(1,O==="isoweek"?"week":O).subtract(1,"ms")},ae.fn.isSame=function(O,R){return R=H(R),R==="jyear"||R==="jmonth"?n.fn.isSame.call(this.startOf(R),O.startOf(R)):n.fn.isSame.call(this,O,R)},ae.fn.clone=function(){return ae(this)},ae.fn.jYears=ae.fn.jYear,ae.fn.jMonths=ae.fn.jMonth,ae.fn.jDates=ae.fn.jDate,ae.fn.jWeeks=ae.fn.jWeek,ae.jDaysInMonth=function(O,R){return O+=Ke(R,12),R=Pe(R,12),R<0&&(R+=12,O-=1),R<6?31:R<11||ae.jIsLeapYear(O)?30:29},ae.jIsLeapYear=e.isLeapJalaaliYear,ae.loadPersian=function(O){var R=O!==void 0&&O.hasOwnProperty("usePersianDigits")?O.usePersianDigits:!1,N=O!==void 0&&O.hasOwnProperty("dialect")?O.dialect:"persian";n.locale("fa"),n.updateLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:{persian:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_آدینه_شنبه".split("_"),"persian-modern":"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_")}[N],weekdaysShort:{persian:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_آدینه_شنبه".split("_"),"persian-modern":"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_")}[N],weekdaysMin:{persian:"ی_د_س_چ_پ_آ_ش".split("_"),"persian-modern":"ی_د_س_چ_پ_ج_ش".split("_")}[N],longDateFormat:{LT:"HH:mm",L:"jYYYY/jMM/jDD",LL:"jD jMMMM jYYYY",LLL:"jD jMMMM jYYYY LT",LLLL:"dddd، jD jMMMM jYYYY LT"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [ی پیش ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",m:"1 دقیقه",mm:"%d دقیقه",h:"1 ساعت",hh:"%d ساعت",d:"1 روز",dd:"%d روز",M:"1 ماه",MM:"%d ماه",y:"1 سال",yy:"%d سال"},preparse:function(W){return R?W.replace(/[۰-۹]/g,function(Q){return w[Q]}).replace(/،/g,","):W},postformat:function(W){return R?W.replace(/\d/g,function(Q){return x[Q]}).replace(/,/g,"،"):W},ordinal:"%dم",week:{dow:6,doy:12},meridiem:function(W){return W<12?"ق.ظ":"ب.ظ"},jMonths:{persian:"فروردین_اردیبهشت_خرداد_تیر_امرداد_شهریور_مهر_آبان_آذر_دی_بهمن_اسفند".split("_"),"persian-modern":"فروردین_اردیبهشت_خرداد_تیر_مرداد_شهریور_مهر_آبان_آذر_دی_بهمن_اسفند".split("_")}[N],jMonthsShort:{persian:"فرو_ارد_خرد_تیر_امر_شهر_مهر_آبا_آذر_دی_بهم_اسف".split("_"),"persian-modern":"فرو_ارد_خرد_تیر_مرد_شهر_مهر_آبا_آذر_دی_بهم_اسف".split("_")}[N]})},ae.jConvert={toJalaali:Z,toGregorian:et};function Z(O,R,N){try{var W=e.toJalaali(O,R+1,N);return W.jm-=1,W}catch{return{jy:NaN,jm:NaN,jd:NaN}}}function et(O,R,N){try{var W=e.toGregorian(O,R+1,N);return W.gm-=1,W}catch{return{gy:NaN,gm:NaN,gd:NaN}}}function Ke(O,R){return~~(O/R)}function Pe(O,R){return O-~~(O/R)*R}return ba}(function(n){n.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(s,r,l){i.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,r){if(r&1&&(s=i(s)),r&8||r&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),r&2&&typeof s!="string")for(var a in s)i.d(l,a,function(h){return s[h]}.bind(null,a));return l},i.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(r,"a",r),r},i.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},i.p="",i(i.s="fb15")}({"24fb":function(e,t,i){e.exports=function(l){var a=[];return a.toString=function(){return this.map(function(u){var f=s(u,l);return u[2]?"@media ".concat(u[2]," {").concat(f,"}"):f}).join("")},a.i=function(h,u,f){typeof h=="string"&&(h=[[null,h,""]]);var _={};if(f)for(var p=0;p<this.length;p++){var x=this[p][0];x!=null&&(_[x]=!0)}for(var w=0;w<h.length;w++){var C=[].concat(h[w]);f&&_[C[0]]||(u&&(C[2]?C[2]="".concat(u," and ").concat(C[2]):C[2]=u),a.push(C))}},a};function s(l,a){var h=l[1]||"",u=l[3];if(!u)return h;if(a&&typeof btoa=="function"){var f=r(u),_=u.sources.map(function(p){return"/*# sourceURL=".concat(u.sourceRoot||"").concat(p," */")});return[h].concat(_).concat([f]).join(`
`)}return[h].join(`
`)}function r(l){var a=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a);return"/*# ".concat(h," */")}},4635:function(e,t,i){var s=i("93e7");s.__esModule&&(s=s.default),typeof s=="string"&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=i("499e").default;r("40b7c789",s,!0,{sourceMap:!1,shadowMode:!1})},"499e":function(e,t,i){i.r(t),i.d(t,"default",function(){return C});function s(A,j){for(var V=[],H={},z=0;z<j.length;z++){var se=j[z],ne=se[0],re=se[1],Ce=se[2],te=se[3],ie={id:A+":"+z,css:re,media:Ce,sourceMap:te};H[ne]?H[ne].parts.push(ie):V.push(H[ne]={id:ne,parts:[ie]})}return V}var r=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l={},a=r&&(document.head||document.getElementsByTagName("head")[0]),h=null,u=0,f=!1,_=function(){},p=null,x="data-vue-ssr-id",w=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function C(A,j,V,H){f=V,p=H||{};var z=s(A,j);return b(z),function(ne){for(var re=[],Ce=0;Ce<z.length;Ce++){var te=z[Ce],ie=l[te.id];ie.refs--,re.push(ie)}ne?(z=s(A,ne),b(z)):z=[];for(var Ce=0;Ce<re.length;Ce++){var ie=re[Ce];if(ie.refs===0){for(var $=0;$<ie.parts.length;$++)ie.parts[$]();delete l[ie.id]}}}}function b(A){for(var j=0;j<A.length;j++){var V=A[j],H=l[V.id];if(H){H.refs++;for(var z=0;z<H.parts.length;z++)H.parts[z](V.parts[z]);for(;z<V.parts.length;z++)H.parts.push(M(V.parts[z]));H.parts.length>V.parts.length&&(H.parts.length=V.parts.length)}else{for(var se=[],z=0;z<V.parts.length;z++)se.push(M(V.parts[z]));l[V.id]={id:V.id,refs:1,parts:se}}}}function E(){var A=document.createElement("style");return A.type="text/css",a.appendChild(A),A}function M(A){var j,V,H=document.querySelector("style["+x+'~="'+A.id+'"]');if(H){if(f)return _;H.parentNode.removeChild(H)}if(w){var z=u++;H=h||(h=E()),j=P.bind(null,H,z,!1),V=P.bind(null,H,z,!0)}else H=E(),j=F.bind(null,H),V=function(){H.parentNode.removeChild(H)};return j(A),function(ne){if(ne){if(ne.css===A.css&&ne.media===A.media&&ne.sourceMap===A.sourceMap)return;j(A=ne)}else V()}}var k=function(){var A=[];return function(j,V){return A[j]=V,A.filter(Boolean).join(`
`)}}();function P(A,j,V,H){var z=V?"":H.css;if(A.styleSheet)A.styleSheet.cssText=k(j,z);else{var se=document.createTextNode(z),ne=A.childNodes;ne[j]&&A.removeChild(ne[j]),ne.length?A.insertBefore(se,ne[j]):A.appendChild(se)}}function F(A,j){var V=j.css,H=j.media,z=j.sourceMap;if(H&&A.setAttribute("media",H),p.ssrId&&A.setAttribute(x,j.id),z&&(V+=`
/*# sourceURL=`+z.sources[0]+" */",V+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(z))))+" */"),A.styleSheet)A.styleSheet.cssText=V;else{for(;A.firstChild;)A.removeChild(A.firstChild);A.appendChild(document.createTextNode(V))}}},8875:function(e,t,i){var s,r,l;(function(a,h){r=[],s=h,l=typeof s=="function"?s.apply(t,r):s,l!==void 0&&(e.exports=l)})(typeof self<"u"?self:this,function(){function a(){var h=Object.getOwnPropertyDescriptor(document,"currentScript");if(!h&&"currentScript"in document&&document.currentScript||h&&h.get!==a&&document.currentScript)return document.currentScript;try{throw new Error}catch(P){var u=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,_=u.exec(P.stack)||f.exec(P.stack),p=_&&_[1]||!1,x=_&&_[2]||!1,w=document.location.href.replace(document.location.hash,""),C,b,E,M=document.getElementsByTagName("script");p===w&&(C=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(x-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),E=C.replace(b,"$1").trim());for(var k=0;k<M.length;k++)if(M[k].readyState==="interactive"||M[k].src===p||p===w&&M[k].innerHTML&&M[k].innerHTML.trim()===E)return M[k];return null}}return a})},"8bbf":function(e,t){e.exports=Q1},"93e7":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,'.fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter-from,.fade-leave-active{opacity:0}.vpd-fade-scale-enter-active,.vpd-fade-scale-leave-active{transition:opacity .5s}.vpd-fade-scale-enter-from,.vpd-fade-scale-leave-active{opacity:0}.vpd-fade-scale-enter-from .vpd-content,.vpd-fade-scale-leave-active .vpd-content{transform:scale(.7);opacity:0}.slideX-enter-active,.slideX-leave-active{position:absolute;top:0;bottom:0;right:0;left:0;opacity:1;transform:translateX(0);transition:all .3s ease-out}.slideX-enter-from,.slideX-leave-to{opacity:0}.direction-next .slideX-leave-to{transform:translateX(-100%)}.direction-next .slideX-enter-from,.direction-prev .slideX-leave-to{transform:translateX(100%)}.direction-prev .slideX-enter-from{transform:translateX(-100%)}.slideY-enter-active,.slideY-leave-active{position:absolute;top:0;bottom:0;right:0;left:0;opacity:1;transform:translateY(0);transition:all .3s ease-in-out}.slideY-enter-from,.slideY-leave-to{opacity:0}.direction-next .slideY-leave-to{transform:translateY(100%)}.direction-next .slideY-enter-from,.direction-prev .slideY-leave-to{transform:translateY(-100%)}.direction-prev .slideY-enter-from{transform:translateY(100%)}.fade-transition{opacity:1;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.fast-updating .slideY-enter-active,.fast-updating .slideY-leave-active{transition:all .17s ease-in-out}.fast-updating .direction-next .slideY-leave-to{transform:translateY(45%)}.fast-updating .direction-next .slideY-enter-from{transform:translateY(-5%)}.fast-updating .direction-prev .slideY-leave-to{transform:translateY(-45%)}.fast-updating .direction-prev .slideY-enter-from{transform:translateY(5%)}.vpd-dir-rtl .direction-next .slideX-leave-to{transform:translateX(100%)}.vpd-dir-rtl .direction-next .slideX-enter-from,.vpd-dir-rtl .direction-prev .slideX-leave-to{transform:translateX(-100%)}.vpd-dir-rtl .direction-prev .slideX-enter-from{transform:translateX(100%)}.vpd-main *,.vpd-wrapper *{box-sizing:border-box}.vpd-clearfix:after,.vpd-clearfix:before{content:" ";display:table}.vpd-clearfix:after{clear:both}.vpd-input-group{display:flex;position:relative}.vpd-input-group input{flex-grow:1;border:1px solid #dadada;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;line-height:30px;padding:0 10px}.vpd-input-group input:not(.vpd-is-editable){cursor:pointer}.vpd-input-group label{color:#fff;white-space:nowrap}.vpd-input-group label svg+span{display:inline-block;margin-right:4px;vertical-align:middle}.vpd-input-group.vpd-disabled input,.vpd-input-group.vpd-disabled label{cursor:default}.vpd-input-group .vpd-clear-btn{position:absolute;left:0;top:0;line-height:32px;width:30px;cursor:pointer;text-align:center;font-style:normal;font-family:monospace,sans-serif;opacity:.4}.vpd-input-group .vpd-clear-btn:hover{opacity:.7}.vpd-icon-btn{cursor:pointer;padding:0 10px;display:flex;justify-content:center;align-items:center}.vpd-wrapper{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:9999}.vpd-container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.vpd-content{opacity:1;transition:all .4s cubic-bezier(.25,.1,.17,1.84);text-align:right;direction:rtl;width:316px;background-color:#fff;box-shadow:5px 22px 95px -14px #000;cursor:default}.vpd-header{color:#fff;padding:10px 20px}.vpd-body,.vpd-header,.vpd-year-label{position:relative}.vpd-year-label{margin-bottom:2px;height:24px;opacity:.7;overflow:hidden;cursor:pointer;font-size:16px}.vpd-year-label>span{display:inline-block;padding:0 10px;line-height:22px;height:22px;border-width:1px;border-style:solid;border-radius:2px;transition:all .1s ease-out}.vpd-year-label>span:not(:hover){border-color:transparent!important;color:inherit!important}.vpd-date{position:relative;font-size:28px;line-height:40px;height:40px;overflow:hidden}.vpd-date span{display:block;height:inherit;line-height:inherit}.vpd-week{font-size:12px;padding:0 14px;line-height:20px;color:#b9b9b9;margin-bottom:10px;height:20px}.vpd-weekday{float:right;width:40px;text-align:center}.vpd-days{padding:0 18px;position:relative;overflow:hidden;transition:height .3s cubic-bezier(.75,.02,.27,.99)}.vpd-day{width:40px;height:40px;float:right;line-height:40px;position:relative}.vpd-day:not(.vpd-empty){cursor:pointer;transition:color .45s ease;text-align:center}.vpd-day[disabled=true]{cursor:default;color:#ccc}.vpd-day[disabled=true] .vpd-day-effect{background-color:transparent}.vpd-day[disabled=true] .vpd-day-text{color:#ccc}.vpd-day:not([disabled=true]):hover{color:#fff}.vpd-day:not([disabled=true]):hover .vpd-day-effect{transform:scale(1);opacity:.6}.vpd-day:not([disabled=true]).vpd-selected{color:#fff}.vpd-day:not([disabled=true]).vpd-selected .vpd-day-effect{transform:scale(1);opacity:1}.vpd-day:not([disabled=true]).vpd-range-between{color:#fff}.vpd-day:not([disabled=true]).vpd-range-between .vpd-day-effect{transform:scale(.75);opacity:1}.vpd-day:not([disabled=true]).vpd-range-hover{color:#fff}.vpd-day:not([disabled=true]).vpd-range-hover .vpd-day-effect{transform:scale(.7);opacity:.6}.vpd-day-effect{position:absolute;width:36px;height:36px;border-radius:50%;top:2px;left:2px;transform:scale(0);opacity:0;transition:all .45s ease}.vpd-controls,.vpd-day-text{position:relative}.vpd-controls{z-index:2;height:50px;line-height:50px;text-align:center}.vpd-controls button{position:relative;background-color:transparent;border:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;cursor:pointer}.vpd-controls button[disabled=true]{opacity:.3;cursor:default}.vpd-next,.vpd-prev{width:50px;height:50px;line-height:50px}.vpd-next{float:right}.vpd-prev{float:left}.vpd-arrow{width:11px;height:11px}.vpd-month{position:relative;overflow:hidden}.vpd-month-label{position:absolute;top:0;left:50px;right:50px;overflow:hidden;width:95px;margin-left:auto;margin-right:auto;line-height:50px;height:50px;text-align:center;cursor:pointer}.vpd-month-label>span{display:inline-block;padding:0 5px;line-height:26px;height:26px;border-width:1px;border-style:solid;border-radius:2px;transition:all .1s ease-out;white-space:nowrap}.vpd-month-label>span:not(:hover){border-color:transparent!important;color:inherit!important}.vpd-actions{text-align:right;padding:8px}.vpd-actions button{border:none;background-color:transparent;display:inline-block;cursor:pointer;outline:none;font-size:14px;text-transform:uppercase;min-width:88px;text-align:center;-webkit-appearance:none;line-height:36px;height:36px;transition:all .3s ease}.vpd-actions button:hover{background-color:#f2f2f2}.vpd-actions button[disabled=true]{opacity:.6;cursor:default}.vpd-addon-list-content{direction:rtl}.vpd-addon-list-item{width:33.33333%;text-align:center;font-size:14px;height:44px;line-height:36px;transition:all .3s ease;color:#8a8a8a;cursor:pointer;float:right;border:4px solid #fff}.vpd-addon-list-item.vpd-selected,.vpd-addon-list-item:hover{background-color:#f9f9f9}.vpd-addon-list-item.vpd-selected{font-weight:700;background-color:#f5f5f5}.vpd-addon-list{width:100%;background-color:#fff;position:absolute;z-index:2;overflow:auto;top:0;bottom:52px;border-bottom:1px solid #eee;direction:ltr}.vpd-addon-list.vpd-can-close{padding-top:30px}.vpd-month-list{padding-top:15px}.vpd-month-list .vpd-addon-list-item{height:54px;line-height:46px}.vpd-addon-list-item[disabled=true]{opacity:.3;cursor:default!important;background-color:transparent!important}.vpd-close-addon{position:absolute;top:4px;left:4px;z-index:2;width:30px;height:30px;line-height:30px;color:#444;font-family:sans-serif;text-align:center;cursor:pointer;background-color:rgba(0,0,0,.1)}.vpd-time{-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-select:none}.vpd-time .vpd-time-h,.vpd-time .vpd-time-m{position:relative;margin-top:70px;float:left;width:50%;height:100%;text-align:center;color:#a2a2a2}.vpd-time .vpd-time-h .vpd-counter,.vpd-time .vpd-time-m .vpd-counter{font-size:90px;height:100px;line-height:100px;overflow:hidden;position:relative;direction:ltr;transition:opacity .3s ease-in-out}.vpd-time .vpd-time-h .vpd-counter-item,.vpd-time .vpd-time-m .vpd-counter-item{height:inherit;width:51px;display:inline-block;vertical-align:text-top;position:relative}.vpd-time .vpd-time-h:after{position:absolute;top:50%;right:0;content:":";font-size:70px;transform:translate(50%,-50%);transition:inherit}.vpd-time .vpd-down-arrow-btn,.vpd-time .vpd-up-arrow-btn{display:block;cursor:pointer;outline:none;height:34px}.vpd-time.vpd-disabled .vpd-counter-item{opacity:.5}.vpd-time-column .vpd-counter{position:relative}.vpd-time-column .vpd-counter input{position:absolute;z-index:5;border:none;background-color:transparent;top:0;left:0;width:100%;height:100%;text-align:center;outline:none;font-size:inherit;color:inherit;line-height:inherit;opacity:0;padding:5% 0 0 0}.vpd-time-column .vpd-counter input:focus{opacity:1}.vpd-time-column .vpd-counter input:focus:not(.is-empty)~div{opacity:0}.vpd-prev-step{position:absolute;top:0;left:0;width:30px;height:30px;text-align:center;padding:9px;cursor:pointer}.vpd-prev-step:hover{background-color:rgba(0,0,0,.2)}[data-type=time] .vpd-time .vpd-time-h,[data-type=time] .vpd-time .vpd-time-m{margin-top:40px}.vpd-is-inline{position:static;background-color:transparent;height:auto;width:auto;display:block;margin-top:2px}.vpd-is-inline .vpd-container{position:static;transform:none}.vpd-is-inline .vpd-content{box-shadow:0 0 1px -1px #000}.vpd-is-popover{display:inline-block;position:relative}.vpd-is-popover .vpd-wrapper{position:static;width:auto;height:0}.vpd-is-popover .vpd-wrapper .vpd-container{transform:none;top:auto;left:auto;z-index:500}.vpd-is-popover .vpd-wrapper .vpd-content{transition:none;box-shadow:0 3px 8px rgba(0,0,0,.4)}.vpd-is-popover[data-placement=top-left] .vpd-container{bottom:100%;left:0}.vpd-is-popover[data-placement=top-left] .vpd-content{box-shadow:0 -3px 8px rgba(0,0,0,.4)}.vpd-is-popover[data-placement=top-right] .vpd-container{bottom:100%;right:0}.vpd-is-popover[data-placement=top-right] .vpd-content{box-shadow:0 -3px 8px rgba(0,0,0,.4)}.vpd-is-popover[data-placement=bottom-left] .vpd-container{top:100%;left:0}.vpd-is-popover[data-placement=bottom-right] .vpd-container{top:100%;right:0}.vpd-is-popover[data-placement=left-top] .vpd-container{bottom:0;right:100%}.vpd-is-popover[data-placement=left-bottom] .vpd-container{top:0;right:100%}.vpd-is-popover[data-placement=right-top] .vpd-container{bottom:0;left:100%}.vpd-is-popover[data-placement=right-bottom] .vpd-container{top:0;left:100%}.vpd-no-footer .vpd-addon-list{bottom:0;border-bottom:none}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time{margin-top:10px;display:block!important;position:relative;border-top:1px solid #eee;overflow:hidden}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-addon-list-content{display:flex;justify-content:center;direction:ltr}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-counter-item{width:18px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-counter{height:30px;font-size:20px;line-height:34px;width:40px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-down-arrow-btn,.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-up-arrow-btn{position:absolute;top:0;height:26px;width:26px;margin:2px;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.05)}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-m{margin-top:0;float:none;width:100px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-m .vpd-up-arrow-btn{right:30px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-m .vpd-down-arrow-btn{right:0}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-h{margin-top:0;float:none;width:100px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-h:after{font-size:20px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-h .vpd-counter{margin-left:auto}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-h .vpd-up-arrow-btn{left:0}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time .vpd-time-h .vpd-down-arrow-btn{left:30px}.vpd-wrapper[data-type=datetime].vpd-compact-time .vpd-time svg{height:10px}.vpd-wrapper[data-type=datetime] .vpd-date{font-size:22px}.vpd-wrapper.vpd-is-range .vpd-date{font-size:16px}.vpd-wrapper.vpd-is-multiple .vpd-date{font-size:14px;white-space:normal;line-height:20px}@media screen and (max-height:460px){.vpd-wrapper{overflow:auto;text-align:center}.vpd-wrapper .vpd-container{position:relative;top:0;left:0;transform:none;display:inline-block;margin:20px auto}}.vpd-locales{list-style-type:none;padding:0;margin:0;position:absolute;left:14px;top:12px;line-height:24px;text-align:center;opacity:.7}.vpd-locales li{cursor:pointer}.vpd-simple-body .vpd-header{display:flex;padding:10px;justify-content:space-between}.vpd-simple-body .vpd-locales{position:static;padding:0 5px;line-height:unset}.vpd-simple-content{display:flex;justify-content:center;height:240px;direction:ltr}.vpd-simple-content .vpd-column{height:100%;flex-grow:1;display:flex;flex-flow:column;padding:5px}.vpd-simple-content .vpd-column .vpd-column-header{text-align:center;font-weight:700;color:#000;height:30px;line-height:30px}.vpd-simple-content .vpd-column .vpd-column-content{flex-grow:1;height:100%;overflow:auto;padding-right:4px;position:relative}.vpd-simple-content .vpd-column .vpd-column-content:after,.vpd-simple-content .vpd-column .vpd-column-content:before{display:block;height:80px;content:""}@media screen and (min-width:640px){.vpd-simple-content .vpd-column .vpd-column-content::-webkit-scrollbar{width:8px}.vpd-simple-content .vpd-column .vpd-column-content::-webkit-scrollbar-track{background:rgba(0,0,0,.05);border-radius:5px}.vpd-simple-content .vpd-column .vpd-column-content::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2);border-radius:5px}.vpd-simple-content .vpd-column .vpd-column-content::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.5)}}.vpd-simple-content .vpd-addon-list-item{width:100%;float:none!important;line-height:42px;height:44px;border:1px solid #fff}.vpd-simple-content .vpd-range-first{border-radius:40px 40px 0 0}.vpd-simple-content .vpd-range-between{font-weight:700;background-color:#f5f5f5}.vpd-simple-content .vpd-range-last{border-radius:0 0 40px 40px}.vpd-simple-content .vpd-range-last.vpd-range-first{border-radius:40px}.vpd-simple-content .vpd-column.vpd-is-mounted .vpd-selected:not(.vpd-range-first):not(.vpd-range-last):not([disabled=true]){position:sticky;top:0;bottom:0}.vpd-is-multiple .vpd-simple-content .vpd-column .vpd-selected{position:static!important}.vpd-dir-ltr .vpd-actions,.vpd-dir-ltr .vpd-addon-list-content,.vpd-dir-ltr .vpd-content{direction:ltr}.vpd-dir-ltr .vpd-actions,.vpd-dir-ltr .vpd-content{text-align:left;font-family:sans-serif}.vpd-dir-ltr .vpd-month-label{font-size:90%}.vpd-dir-ltr .vpd-addon-list-item,.vpd-dir-ltr .vpd-day,.vpd-dir-ltr .vpd-weekday{float:left}.vpd-dir-ltr .vpd-locales{left:auto;right:14px}.vpd-dir-rtl .vpd-next,.vpd-dir-rtl .vpd-prev{transform:rotateY(180deg)}.vpd-dir-rtl .vpd-next{float:left}.vpd-dir-rtl .vpd-prev{float:right}',""]),e.exports=t},b9b3:function(e,t){e.exports=nw()},c32d:function(e,t){e.exports=Gc()},fb15:function(e,t,i){if(i.r(t),typeof window<"u"){var s=window.document.currentScript;{var r=i("8875");s=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r})}var l=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(i.p=l[1])}var a=i("8bbf"),h=Object(a.createTextVNode)("x"),u={ref:"container",class:"vpd-container"},f={class:"vpd-content"},_={class:"vpd-body"},p={class:"vpd-clearfix vpd-week"},x={key:1,style:{height:"250px"}},w={class:"vpd-addon-list-content"},C={class:"vpd-addon-list-content"},b=Object(a.createTextVNode)("x"),E={key:0},M={key:3,class:"vpd-actions"};function k(D,m,v,T,L,S){var G=Object(a.resolveComponent)("time-icon"),ee=Object(a.resolveComponent)("calendar-icon"),Y=Object(a.resolveComponent)("locale-change"),we=Object(a.resolveComponent)("simple-mode"),fe=Object(a.resolveComponent)("arrow"),_e=Object(a.resolveComponent)("time-section");return Object(a.openBlock)(),Object(a.createBlock)("span",{class:["vpd-main",{"vpd-is-popover":S.isPopover}],"data-type":v.type,"data-placement":L.popoverPlace,"data-locale":L.localeData.name,"data-locale-dir":L.localeData.config.dir},[S.customInputElement?v.altName?(Object(a.openBlock)(),Object(a.createBlock)("input",{key:1,type:"hidden",name:v.altName,value:S.altFormatted},null,8,["name","value"])):Object(a.createCommentVNode)("",!0):(Object(a.openBlock)(),Object(a.createBlock)("span",{key:0,ref:"inputGroup",class:["vpd-input-group",{"vpd-disabled":v.disabled}]},[Object(a.createVNode)("label",{for:S.id,class:"vpd-icon-btn",style:{"background-color":v.color},onClick:m[1]||(m[1]=Object(a.withModifiers)(function(J){return L.visible=!L.visible},["prevent","stop"]))},[Object(a.renderSlot)(D.$slots,"label",{},function(){return[v.type==="time"?(Object(a.openBlock)(),Object(a.createBlock)(G,{key:0,width:"16px",height:"16px"})):(Object(a.openBlock)(),Object(a.createBlock)(ee,{key:1,width:"16px",height:"16px"})),v.label?(Object(a.openBlock)(),Object(a.createBlock)("span",{key:2,textContent:Object(a.toDisplayString)(v.label)},null,8,["textContent"])):Object(a.createCommentVNode)("",!0)]})],12,["for"]),Object(a.createVNode)("input",Object(a.mergeProps)({id:S.id,ref:"input",type:"text",name:v.name,class:[v.inputClass,{"vpd-is-editable":v.editable}],placeholder:v.placeholder,value:S.displayValue,disabled:v.disabled},v.inputAttrs,{onFocus:m[2]||(m[2]=function(){return S.focus&&S.focus.apply(S,arguments)}),onBlur:m[3]||(m[3]=function(){return S.setOutput&&S.setOutput.apply(S,arguments)}),onKeydown:m[4]||(m[4]=Object(a.withKeys)(function(){return S.setOutput&&S.setOutput.apply(S,arguments)},["enter"]))}),null,16,["id","name","placeholder","value","disabled"]),v.altName?(Object(a.openBlock)(),Object(a.createBlock)("input",{key:0,type:"hidden",name:v.altName,value:S.altFormatted},null,8,["name","value"])):Object(a.createCommentVNode)("",!0),v.clearable&&!v.disabled&&S.displayValue?(Object(a.openBlock)(),Object(a.createBlock)("i",{key:1,class:"vpd-clear-btn",onClick:m[5]||(m[5]=function(){return S.clearValue&&S.clearValue.apply(S,arguments)})},[Object(a.renderSlot)(D.$slots,"clear-btn",{vm:S.vm},function(){return[h]})])):Object(a.createCommentVNode)("",!0)],2)),Object(a.createVNode)(a.Transition,{name:S.isPopover?"":"vpd-fade-scale"},{default:Object(a.withCtx)(function(){return[L.visible?(Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,ref:"picker",class:["vpd-wrapper","vpd-dir-".concat(L.localeData.config.dir),{"vpd-is-range":v.range,"vpd-is-inline":v.inline,"vpd-is-multiple":v.multiple,"vpd-compact-time":S.isCompactTime,"vpd-no-footer":v.autoSubmit&&!S.hasStep("t")}],"data-type":v.type,onClick:m[17]||(m[17]=Object(a.withModifiers)(function(){return S.wrapperClick&&S.wrapperClick.apply(S,arguments)},["self"]))},[Object(a.createVNode)("div",u,[Object(a.createVNode)("div",f,[v.simple?Object(a.createCommentVNode)("",!0):(Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,class:"vpd-header",style:{"background-color":v.color}},[["date","datetime","year-month"].indexOf(v.type)!==-1?(Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,class:["vpd-year-label",L.directionClass],onClick:m[6]||(m[6]=function(J){return S.goStep("y")})},[Object(a.createVNode)(a.Transition,{name:"slideY"},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(),Object(a.createBlock)("span",{key:S.selectedDate.xYear()},[Object(a.renderSlot)(D.$slots,"header-year",{vm:S.vm,selectedDate:S.selectedDate},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(S.convertToLocaleNumber(S.selectedDate.xYear())),1)]})]))]}),_:3})],2)):Object(a.createCommentVNode)("",!0),v.type!=="year-month"?(Object(a.openBlock)(),Object(a.createBlock)("div",{key:1,class:["vpd-date",L.directionClass]},[Object(a.createVNode)(a.Transition,{name:"slideY"},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(),Object(a.createBlock)("span",{key:S.formattedDate},[Object(a.renderSlot)(D.$slots,"header-date",{vm:S.vm,formattedDate:S.formattedDate},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(S.convertToLocaleNumber(S.formattedDate)),1)]})]))]}),_:3})],2)):Object(a.createCommentVNode)("",!0),L.locales.length>1?Object(a.renderSlot)(D.$slots,"locales",Object(a.mergeProps)({key:2},{vm:S.vm,locales:L.locales,setLocale:S.setLocale}),function(){return[Object(a.createVNode)(Y,{"locale-data":L.localeData,core:L.core,locales:L.locales,class:"vpd-locales",onChange:S.setLocale},null,8,["locale-data","core","locales","onChange"])]}):Object(a.createCommentVNode)("",!0)],4)),Object(a.createVNode)("div",_,[v.simple?(Object(a.openBlock)(),Object(a.createBlock)(we,{key:0,lang:S.lang,core:L.core,range:v.range,color:v.color,locales:L.locales,visible:L.visible,multiple:v.multiple,years:S.years,months:S.months,"month-days":S.monthDays,"has-step":S.hasStep,"selected-dates":L.selectedDates,"formatted-date":S.formattedDate,"set-locale":S.setLocale,"convert-to-locale-number":S.convertToLocaleNumber,onSelectYear:S.selectYear,onSelectMonth:S.selectMonth,onSelectDay:S.selectDay},{"header-date":Object(a.withCtx)(function(J){return[Object(a.renderSlot)(D.$slots,"header-date",J)]}),locales:Object(a.withCtx)(function(J){return[Object(a.renderSlot)(D.$slots,"locales",J)]}),"year-item":Object(a.withCtx)(function(J){return[Object(a.renderSlot)(D.$slots,"year-item",J)]}),"month-item":Object(a.withCtx)(function(J){return[Object(a.renderSlot)(D.$slots,"month-item",J)]}),"day-item":Object(a.withCtx)(function(J){return[Object(a.renderSlot)(D.$slots,"day-item",J)]}),_:3},8,["lang","core","range","color","locales","visible","multiple","years","months","month-days","has-step","selected-dates","formatted-date","set-locale","convert-to-locale-number","onSelectYear","onSelectMonth","onSelectDay"])):(Object(a.openBlock)(),Object(a.createBlock)(a.Fragment,{key:1},[S.hasStep("d")?(Object(a.openBlock)(),Object(a.createBlock)(a.Fragment,{key:0},[Object(a.createVNode)("div",{class:["vpd-controls",L.directionClassDate]},[Object(a.createVNode)("button",{type:"button",class:"vpd-next",title:S.lang.nextMonth,disabled:S.nextMonthDisabled,onClick:m[7]||(m[7]=function(){return S.nextMonth&&S.nextMonth.apply(S,arguments)})},[Object(a.renderSlot)(D.$slots,"next-month",{},function(){return[Object(a.createVNode)(fe,{width:"10",fill:"#000",direction:"right",style:{"vertical-align":"middle"}})]})],8,["title","disabled"]),Object(a.createVNode)("button",{type:"button",class:"vpd-prev",title:S.lang.prevMonth,disabled:S.prevMonthDisabled,onClick:m[8]||(m[8]=function(){return S.prevMonth&&S.prevMonth.apply(S,arguments)})},[Object(a.renderSlot)(D.$slots,"prev-month",{},function(){return[Object(a.createVNode)(fe,{width:"10",fill:"#000",direction:"left",style:{"vertical-align":"middle"}})]})],8,["title","disabled"]),Object(a.createVNode)(a.Transition,{name:"slideX"},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(),Object(a.createBlock)("div",{key:L.date.xMonth(),class:"vpd-month-label",onClick:m[9]||(m[9]=function(J){return S.goStep("m")})},[Object(a.renderSlot)(D.$slots,"month-name",{vm:S.vm,date:L.date,color:v.color},function(){return[Object(a.createVNode)("span",{style:{"border-color":v.color,color:v.color},textContent:Object(a.toDisplayString)(S.convertToLocaleNumber(L.date.xFormat("jMMMM jYYYY")))},null,12,["textContent"])]})]))]}),_:3})],2),Object(a.createVNode)("div",{class:["vpd-clearfix",["vpd-month",L.directionClassDate]]},[Object(a.createVNode)("div",p,[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(S.weekDays,function(J,Me){return Object(a.openBlock)(),Object(a.createBlock)("div",{key:"".concat(Me,"-").concat(J),class:"vpd-weekday"},[Object(a.renderSlot)(D.$slots,"weekday",{vm:S.vm,day:J},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(J),1)]})])}),128))]),Object(a.createVNode)("div",{class:"vpd-days",style:{height:S.month.length*40+"px"},onMouseleave:m[10]||(m[10]=function(J){return L.hoveredItem=null})},[Object(a.createVNode)(a.Transition,{name:"slideX",class:L.directionClassDate},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(),Object(a.createBlock)("div",{key:L.date.xMonth()},[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(S.monthDays,function(J,Me){return Object(a.openBlock)(),Object(a.createBlock)("div",{key:Me,class:"vpd-clearfix"},[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(J,function(le,je){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:je,class:["vpd-day",{"vpd-selected":le.selected,"vpd-empty":le.date==null,"vpd-range-first":le.isFirst,"vpd-range-last":le.isLast,"vpd-range-between":le.isBetween,"vpd-range-hover":L.hoveredItem&&le.isHover},le.attributes.class]},le.attributes,{disabled:le.disabled,onClick:function(Gt){return S.selectDay(le)},onMouseover:function(Gt){return L.hoveredItem=le.date}}),[le.date!=null?Object(a.renderSlot)(D.$slots,"day-item",Object(a.mergeProps)({key:0},{vm:S.vm,day:le,color:v.color}),function(){return[Object(a.createVNode)("span",{class:"vpd-day-effect",style:{"background-color":v.color}},null,4),Object(a.createVNode)("span",{class:"vpd-day-text",textContent:Object(a.toDisplayString)(S.convertToLocaleNumber(le.formatted))},null,8,["textContent"])]}):Object(a.createCommentVNode)("",!0)],16,["disabled","onClick","onMouseover"])}),128))])}),128))]))]}),_:3},8,["class"])],36)],2)],64)):(Object(a.openBlock)(),Object(a.createBlock)("div",x)),Object(a.createVNode)(a.Transition,{name:"fade"},{default:Object(a.withCtx)(function(){return[S.hasStep("y")?Object(a.withDirectives)((Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,ref:"year",class:["vpd-addon-list",{"vpd-can-close":L.steps.length>1}]},[Object(a.createVNode)("div",w,[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(S.years,function(J,Me){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:Me},J.attributes,{class:["vpd-addon-list-item",{"vpd-selected":J.selected},J.attributes.class],style:[{color:J.selected?v.color:""},J.attributes.style],disabled:J.disabled,onClick:function(je){return S.selectYear(J)}}),[Object(a.renderSlot)(D.$slots,"year-item",{vm:S.vm,year:J,color:v.color},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(S.convertToLocaleNumber(J.xFormat("jYYYY"))),1)]})],16,["disabled","onClick"])}),128))])],2)),[[a.vShow,S.currentStep==="y"]]):Object(a.createCommentVNode)("",!0)]}),_:3}),Object(a.createVNode)(a.Transition,{name:"fade"},{default:Object(a.withCtx)(function(){return[S.hasStep("m")?Object(a.withDirectives)((Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,ref:"month",class:["vpd-addon-list vpd-month-list",{"vpd-can-close":L.steps.length>1}]},[Object(a.createVNode)("div",C,[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(S.months,function(J,Me){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:Me},J.attributes,{class:["vpd-addon-list-item",{"vpd-selected":J.selected},J.attributes.class],disabled:J.disabled,style:[{color:J.selected?v.color:""},J.attributes.style],onClick:function(je){return S.selectMonth(J)}}),[Object(a.renderSlot)(D.$slots,"month-item",{vm:S.vm,monthItem:J,color:v.color},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(J.xFormat("jMMMM")),1)]})],16,["disabled","onClick"])}),128))])],2)),[[a.vShow,S.currentStep==="m"]]):Object(a.createCommentVNode)("",!0)]}),_:3}),Object(a.createVNode)(a.Transition,{name:"fade"},{default:Object(a.withCtx)(function(){return[L.steps.length>1&&S.currentStep!=="d"&&S.hasStep("d")?(Object(a.openBlock)(),Object(a.createBlock)("span",{key:0,class:"vpd-close-addon",onClick:m[11]||(m[11]=function(J){return S.goStep("d")})},[Object(a.renderSlot)(D.$slots,"close-btn",{vm:S.vm},function(){return[b]})])):Object(a.createCommentVNode)("",!0)]}),_:3})],64)),Object(a.createVNode)(a.Transition,{name:"fade"},{default:Object(a.withCtx)(function(){return[S.hasStep("t")?Object(a.withDirectives)((Object(a.openBlock)(),Object(a.createBlock)(_e,{key:0,ref:"time",date:L.date,"onUpdate:date":m[12]||(m[12]=function(J){return L.date=J}),time:L.time,"onUpdate:time":m[13]||(m[13]=function(J){return L.time=J}),"is-more":S.isMore,"is-lower":S.isLower,"min-date":L.minDate,"max-date":L.maxDate,"jump-minute":v.jumpMinute,"round-minute":v.roundMinute,"get-highlights":S.getHighlights,"selected-dates":L.selectedDates,"convert-to-locale-number":S.convertToLocaleNumber},null,8,["date","time","is-more","is-lower","min-date","max-date","jump-minute","round-minute","get-highlights","selected-dates","convert-to-locale-number"])),[[a.vShow,S.currentStep==="t"]]):Object(a.createCommentVNode)("",!0)]}),_:1}),v.autoSubmit&&!S.hasStep("t")?(Object(a.openBlock)(),Object(a.createBlock)(a.Fragment,{key:2},[v.simple?Object(a.createCommentVNode)("",!0):(Object(a.openBlock)(),Object(a.createBlock)("br",E))],64)):(Object(a.openBlock)(),Object(a.createBlock)("div",M,[Object(a.renderSlot)(D.$slots,"submit-btn",{vm:S.vm,canSubmit:S.canSubmit,color:v.color,submit:S.submit,lang:S.lang},function(){return[Object(a.createVNode)("button",{type:"button",disabled:!S.canSubmit,style:{color:v.color},onClick:m[14]||(m[14]=function(){return S.submit&&S.submit.apply(S,arguments)}),textContent:Object(a.toDisplayString)(S.lang.submit)},null,12,["disabled","textContent"])]}),v.inline?Object(a.createCommentVNode)("",!0):Object(a.renderSlot)(D.$slots,"cancel-btn",Object(a.mergeProps)({key:0},{vm:S.vm,color:v.color,lang:S.lang}),function(){return[Object(a.createVNode)("button",{type:"button",style:{color:v.color},onClick:m[15]||(m[15]=function(J){return L.visible=!1}),textContent:Object(a.toDisplayString)(S.lang.cancel)},null,12,["textContent"])]}),v.showNowBtn&&S.canGoToday?Object(a.renderSlot)(D.$slots,"now-btn",Object(a.mergeProps)({key:1},{vm:S.vm,color:v.color,goToday:S.goToday,lang:S.lang}),function(){return[Object(a.createVNode)("button",{type:"button",style:{color:v.color},onClick:m[16]||(m[16]=function(){return S.goToday&&S.goToday.apply(S,arguments)}),textContent:Object(a.toDisplayString)(S.lang.now)},null,12,["textContent"])]}):Object(a.createCommentVNode)("",!0)]))])])],512)],10,["data-type"])):Object(a.createCommentVNode)("",!0)]}),_:3},8,["name"])],10,["data-type","data-placement","data-locale","data-locale-dir"])}i("4635");function P(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 129 129",width:"30",height:"30",perspectiveAspectRato:"none",style:{transform:"rotate(".concat(S.rotation,"deg)")}},[Object(a.createVNode)("path",{fill:v.fill,d:`M88.6 121.3c.8.8 1.8 1.2 2.9 1.2s2.1-.4 2.9-1.2a4.1 4.1 0 0 0 0-5.8l-51-51 51-51a4.1 4.1 0 0 0-5.8-5.8l-54
      53.9a4.1 4.1 0 0 0 0 5.8l54 53.9z`},null,8,["fill"])],4)}var F={props:{fill:{type:String,default:"#a2a2a2"},direction:{type:String,default:"up"}},computed:{rotation:function(){return{up:90,left:0,right:180,down:-90}[this.direction]}}};F.render=P;var A=F,j=Object(a.createVNode)("path",{d:`M256 8C119 8 8 119 8 256S119 504 256 504 504 393 504 256 393 8 256 8zM313.1 358.1L224.9 294C221.8 291.7 220
      288.1 220 284.3V116C220 109.4 225.4 104 232 104H280C286.6 104 292 109.4 292 116V253.7L355.5 299.9C360.9 303.8
      362 311.3 358.1 316.7L329.9 355.5C326 360.8 318.5 362 313.1 358.1z`},null,-1);function V(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("svg",{version:"1.1",role:"presentation",width:"16",height:"16",fill:v.fill,viewBox:"0 0 512 512"},[j],8,["fill"])}var H={props:{fill:{type:String,default:"#f9f9f9"}}};H.render=V;var z=H,se=Object(a.createVNode)("path",{d:`M436 160H12C5.4 160 0 154.6 0 148V112C0 85.5 21.5 64 48 64H96V12C96 5.4 101.4 0 108 0H148C154.6 0 160 5.4 160
      12V64H288V12C288 5.4 293.4 0 300 0H340C346.6 0 352 5.4 352 12V64H400C426.5 64 448 85.5 448 112V148C448 154.6
      442.6 160 436 160zM12 192H436C442.6 192 448 197.4 448 204V464C448 490.5 426.5 512 400 512H48C21.5 512 0 490.5 0
      464V204C0 197.4 5.4 192 12 192zM128 396C128 389.4 122.6 384 116 384H76C69.4 384 64 389.4 64 396V436C64 442.6 69.4
      448 76 448H116C122.6 448 128 442.6 128 436V396zM128 268C128 261.4 122.6 256 116 256H76C69.4 256 64 261.4 64
      268V308C64 314.6 69.4 320 76 320H116C122.6 320 128 314.6 128 308V268zM256 396C256 389.4 250.6 384 244
      384H204C197.4 384 192 389.4 192 396V436C192 442.6 197.4 448 204 448H244C250.6 448 256 442.6 256 436V396zM256
      268C256 261.4 250.6 256 244 256H204C197.4 256 192 261.4 192 268V308C192 314.6 197.4 320 204 320H244C250.6 320 256
      314.6 256 308V268zM384 396C384 389.4 378.6 384 372 384H332C325.4 384 320 389.4 320 396V436C320 442.6 325.4 448
      332 448H372C378.6 448 384 442.6 384 436V396zM384 268C384 261.4 378.6 256 372 256H332C325.4 256 320 261.4 320
      268V308C320 314.6 325.4 320 332 320H372C378.6 320 384 314.6 384 308V268z`},null,-1);function ne(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("svg",{version:"1.1",width:"14",height:"16",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg",fill:v.fill},[se],8,["fill"])}var re={props:{fill:{type:String,default:"#f9f9f9"}}};re.render=ne;var Ce=re;function te(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("ul",null,[Object(a.createVNode)("li",{onClick:m[1]||(m[1]=function(G){return D.$emit("change",S.activeItem)}),textContent:Object(a.toDisplayString)(S.label)},null,8,["textContent"])])}var ie={name:"LocaleChange",props:{locales:{type:Array,default:function(){return[]}},core:{type:Object,default:function(){return{}}},localeData:{type:Object,default:function(){return{}}}},emits:["change"],computed:{activeItem:function(){var m=this.locales.indexOf(this.localeData.name)+1;return m===this.locales.length&&(m=0),String(this.locales[m])},label:function(){return this.core.localesConfig[this.activeItem].lang.label||this.activeItem.toUpperCase()}}};ie.render=te;var $=ie,ue={class:"vpd-addon-list-content"};function Se(D,m,v,T,L,S){var G=Object(a.resolveComponent)("time-column");return Object(a.openBlock)(),Object(a.createBlock)("div",{class:["vpd-addon-list vpd-time",{"vpd-disabled":v.isDisableTime}]},[Object(a.createVNode)("div",ue,[Object(a.createVNode)(G,{ref:"hour",modelValue:S.hourModel,"onUpdate:modelValue":m[1]||(m[1]=function(ee){return S.hourModel=ee}),class:"vpd-time-h",attributes:S.timeAttributes,formatter:v.convertToLocaleNumber,onFilled:S.focusNext},null,8,["modelValue","attributes","formatter","onFilled"]),Object(a.createVNode)(G,{ref:"minute",modelValue:S.minuteModel,"onUpdate:modelValue":m[2]||(m[2]=function(ee){return S.minuteModel=ee}),class:"vpd-time-m",jump:v.jumpMinute,attributes:S.timeAttributes,formatter:v.convertToLocaleNumber},null,8,["modelValue","jump","attributes","formatter"])])],2)}function me(D,m,v,T,L,S){var G=Object(a.resolveComponent)("arrow"),ee=Object(a.resolveComponent)("btn");return Object(a.openBlock)(),Object(a.createBlock)("div",{class:["vpd-time-column",L.classFastCounter]},[Object(a.createVNode)(ee,{class:"vpd-up-arrow-btn",onUpdate:m[1]||(m[1]=function(Y){return S.update(1)}),onFastUpdate:S.fastUpdateCounter},{default:Object(a.withCtx)(function(){return[Object(a.createVNode)(G,{width:"20",direction:"up"})]}),_:1},8,["onFastUpdate"]),Object(a.createVNode)("div",{class:["vpd-counter",[L.directionClass,{"vpd-is-focused":L.isInputFocused}]],onMousewheel:m[9]||(m[9]=Object(a.withModifiers)(function(Y){return S.wheelUpdate(Y)},["stop","prevent"])),onDOMMouseScroll:m[10]||(m[10]=Object(a.withModifiers)(function(Y){return S.wheelUpdate(Y)},["stop","prevent"]))},[Object(a.withDirectives)(Object(a.createVNode)("input",{ref:"input","onUpdate:modelValue":m[2]||(m[2]=function(Y){return L.inputValue=Y}),type:"tel",maxlength:D.selfValue.length,class:{"is-empty":!L.inputValue.length},onInput:m[3]||(m[3]=function(){return S.onInputChange&&S.onInputChange.apply(S,arguments)}),onFocus:m[4]||(m[4]=function(Y){return L.isInputFocused=!0}),onBlur:m[5]||(m[5]=function(Y){return L.isInputFocused=!1}),onKeydown:[m[6]||(m[6]=Object(a.withKeys)(Object(a.withModifiers)(function(Y){return S.update(1)},["prevent"]),["up"])),m[7]||(m[7]=Object(a.withKeys)(Object(a.withModifiers)(function(Y){return S.update(-1)},["prevent"]),["down"])),m[8]||(m[8]=Object(a.withKeys)(Object(a.withModifiers)(function(){return S.onInputSubmit&&S.onInputSubmit.apply(S,arguments)},["prevent"]),["enter"]))]},null,42,["maxlength"]),[[a.vModelText,L.inputValue]]),(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(D.modelValue.toString().split(""),function(Y,we){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:"h__".concat(we),class:"vpd-counter-item"},v.attributes),[Object(a.createVNode)(a.Transition,{name:"slideY"},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(),Object(a.createBlock)("span",{key:"".concat(Y,"__").concat(we,"_h"),style:{transition:"all "+L.transitionSpeed+"ms ease-in-out"},textContent:Object(a.toDisplayString)(v.formatter(Y))},null,12,["textContent"]))]}),_:2},1024)],16)}),128))],34),Object(a.createVNode)(ee,{class:"vpd-down-arrow-btn",onUpdate:m[11]||(m[11]=function(Y){return S.update(-1)}),onFastUpdate:S.fastUpdateCounter},{default:Object(a.withCtx)(function(){return[Object(a.createVNode)(G,{width:"20",direction:"down"})]}),_:1},8,["onFastUpdate"])],2)}function Le(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("div",{onMousedown:m[1]||(m[1]=function(){return S.down&&S.down.apply(S,arguments)}),onTouchstart:m[2]||(m[2]=function(){return S.down&&S.down.apply(S,arguments)}),onMouseup:m[3]||(m[3]=function(){return S.click&&S.click.apply(S,arguments)})},[Object(a.renderSlot)(D.$slots,"default")],32)}var U={name:"Btn",emits:["update","fastUpdate"],data:function(){return{interval:!1,timeout:!1,intervalDelay:150}},mounted:function(){var m=this;document.addEventListener("mouseup",function(){(m.timeout||m.interval)&&m.up()}),document.addEventListener("touchend",function(){(m.timeout||m.interval)&&m.up()})},methods:{click:function(){this.interval||this.$emit("update",1)},down:function(){var m=this;window.clearTimeout(this.timeout),window.clearInterval(this.interval),this.interval=!1,this.timeout=window.setTimeout(function(){m.intervalFn()},600)},up:function(){window.clearTimeout(this.timeout),window.clearInterval(this.interval),this.$emit("fastUpdate",!1),this.timeout=!1,this.interval=!1,this.intervalDelay=150},intervalFn:function(){var m=this;this.interval=window.setTimeout(function(){m.$emit("update",1),m.$emit("fastUpdate",!0),m.intervalFn(),m.intervalDelay>30&&(m.intervalDelay-=3)},this.intervalDelay)}}};U.render=Le;var ae=U;function pe(D){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pe=function(v){return typeof v}:pe=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},pe(D)}var Z=Object.prototype.toString,et=Object.prototype.hasOwnProperty,Ke={isFunction:function(m){return Z.call(m)==="[object Function]"},isArray:function(m){return Z.call(m)==="[object Array]"},isPlainObject:function(m){if(!m||Z.call(m)!=="[object Object]"||m.nodeType||m.setInterval||m.constructor&&!et.call(m,"constructor")&&!et.call(m.constructor.prototype,"isPrototypeOf"))return!1;var v;for(v in m);return v===void 0||et.call(m,v)}},Pe=function D(){var m,v,T,L,S,G,ee=arguments[0]||{},Y=1,we=arguments.length,fe=!1;for(typeof ee=="boolean"&&(fe=ee,ee=arguments[1]||{},Y=2),pe(ee)!=="object"&&!Ke.isFunction(ee)&&(ee={}),we===Y&&(ee=this,--Y);Y<we;Y++)if((m=arguments[Y])!==null)for(v in m)T=ee[v],L=m[v],ee!==L&&(fe&&L&&(Ke.isPlainObject(L)||(S=Ke.isArray(L)))?(S?(S=!1,G=T&&Ke.isArray(T)?T:[]):G=T&&Ke.isPlainObject(T)?T:{},ee[v]=D(fe,G,L)):L!==void 0&&(ee[v]=L));return ee},O=function(m){return m.map(function(v){return v.clone()})},R=function(m,v){return m=m.clone().set({h:12,m:0}),Math.abs(m.diff(v,"hours"))<20},N=function(m){return JSON.parse(JSON.stringify(m))},W=function(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,T=arguments.length>2?arguments[2]:void 0,L=m.parentNode,S=L.scrollTop,G=L.offsetHeight/2,ee=m.offsetHeight/2,Y=m.offsetTop-S-G+ee,we,fe=function(){typeof T=="function"&&T()};if(!v){L.scrollTo(0,S+Y),fe();return}window.requestAnimationFrame(function _e(J){we||(we=J);var Me=J-we,le=Math.min(Me/v,1);L.scrollTo(0,S+Y*le),Me<v?window.requestAnimationFrame(_e):fe()})},Q=function(m,v,T){if(typeof m=="string"&&(m=document.querySelector(m)),!m)throw new Error("Cant find custom element: "+m);m.addEventListener?m.addEventListener(v,T,!0):m.attachEvent("on"+v,T,!0)},K=function(m,v,T,L){Q(L||document,v,function(S){S.target.closest(m)&&T.call(S.target,S)})},de={extend:Pe,clone:N},Ee={props:{modelValue:{type:[String,Number,Array,Object,Boolean],default:""}},emits:["update:modelValue"],data:function(){return{selfValue:""}},watch:{modelValue:{handler:function(m){this.selfValue!==m&&(this.selfValue=m)},immediate:!0,deep:!0},selfValue:function(m){m!==this.modelValue&&this.$emit("update:modelValue",m)}}},ze={data:function(){return{routerQueryName:null}},mounted:function(){this.initRouter()},methods:{initRouter:function(){var m=this,v=function(S){return S||typeof S=="string"},T=this.useRouter;!v(T)||this.isPopover||this.inline||!this.$router||(this.$watch("visible",this.onVisibleChange),this.$watch(function(){return m.$route.query},this.onRouteChange,{deep:!0,immediate:!0}),this.routerQueryName=typeof T=="string"&&T?T:this.id)},onVisibleChange:function(m){var v=this.$route,T=N(v.query||{});m?(T[this.routerQueryName]="active",this.$router.push({query:T})):T[this.routerQueryName]&&this.$router.back()},onRouteChange:function(){var m=!!this.$route.query[this.routerQueryName];m&&this.disabled||(this.visible=m)}}},Vt={name:"TimeColumn",components:{Btn:ae,Arrow:A},mixins:[Ee],props:{jump:{type:Number,default:1},formatter:{type:Function,default:null},attributes:{type:Object,default:function(){return{}}}},emits:["filled"],data:function(){return{directionClass:"direction-next",classFastCounter:"",transitionSpeed:300,timeout:!1,lastUpdate:new Date().getTime(),isInputFocused:!1,inputValue:""}},watch:{selfValue:{handler:function(m,v){var T=this;v&&this.setDirection(m,v),this.inputValue=this.selfValue,this.$nextTick(function(){T.modelValue.toString()!==T.selfValue.toString()&&(T.selfValue=T.modelValue)})},immediate:!0},isInputFocused:function(m){var v=this;m?(this.inputValue=this.selfValue,this.$nextTick(function(){v.$refs.input.select()})):this.inputValue&&this.onInputSubmit()}},methods:{update:function(m){var v=this;this.selfValue=+this.selfValue+m*this.jump;var T=new Date().getTime(),L=T-this.lastUpdate;20<L&&L<300&&(this.transitionSpeed=L),this.lastUpdate=T,window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){v.transitionSpeed=300},300)},wheelUpdate:function(m){var v=this.jump,T=(m.wheelDeltaY||-m.detail)>0;this.update(T?v:-v)},fastUpdateCounter:function(m){m||(this.transitionSpeed=300),this.classFastCounter=m?"fast-updating":""},setDirection:function(m,v){m*1!==v*1&&(this.directionClass=m>v?"direction-next":"direction-prev")},onInputSubmit:function(){this.selfValue=this.inputValue,this.transitionSpeed=0},onInputChange:function(m){m.target.value.length>=this.selfValue.length&&this.$emit("filled")}}};Vt.render=me;var Jt=Vt,xt={name:"TimeSection",components:{TimeColumn:Jt},props:{date:{type:Object,default:function(){return{}}},time:{type:Object,default:function(){return{}}},jumpMinute:{type:Number,default:1},roundMinute:{type:Boolean,default:!1},isDisableTime:{type:Boolean,default:!1},getHighlights:{type:Function,default:null},isMore:{type:Function,default:null},isLower:{type:Function,default:null},minDate:{type:[Object,Boolean],default:!1},maxDate:{type:[Object,Boolean],default:!1},selectedDates:{type:Array,default:function(){return[]}},convertToLocaleNumber:{type:Function,default:null}},emits:["update:date","update:time"],computed:{timeAttributes:function(){return this.getHighlights("t",this.time)},hourModel:{get:function(){return this.time.format("HH")},set:function(m){this.setTime(m,"hours")}},minuteModel:{get:function(){return this.time.format("mm")},set:function(m){this.setTime(m,"minutes")}}},watch:{time:{handler:function(){if(this.roundMinute){var m=this.time.clone(),v=this.jumpMinute,T=(v-m.minute()%v)%v;m.add({m:T}),m.valueOf()!==this.time.valueOf()&&(this.$emit("update:time",m),this.selectedDates.forEach(function(L){return L.set({m:m.minute()})}))}},immediate:!0}},methods:{setTime:function(m,v){var T=this.time.clone();if(T.set(v,m),this.type!=="time"){var L=this.date.clone();T.set({year:L.year(),month:L.month(),date:L.date()}),L.set({hour:T.hour(),minute:T.minute()}),this.$emit("update:date",L)}this.isLower(T)&&(T=this.minDate.clone()),this.isMore(T)&&(T=this.maxDate.clone()),this.$emit("update:time",T)},focusNext:function(){this.$refs.minute.$el.querySelector("input").focus()}}};xt.render=Se;var tt=xt,Ne={class:"vpd-simple-body"};function ut(D,m,v,T,L,S){var G=Object(a.resolveComponent)("locale-change"),ee=Object(a.resolveComponent)("simple-mode-column");return Object(a.openBlock)(),Object(a.createBlock)("div",Ne,[S.showHeader?(Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,class:"vpd-header",style:{"background-color":v.color}},[Object(a.createVNode)("div",null,[Object(a.renderSlot)(D.$slots,"header-date",{vm:L.vm,formattedDate:v.formattedDate},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(v.convertToLocaleNumber(v.formattedDate)),1)]})]),v.locales.length>1?Object(a.renderSlot)(D.$slots,"locales",Object(a.mergeProps)({key:0},{vm:L.vm,locales:v.locales,setLocale:v.setLocale}),function(){return[Object(a.createVNode)(G,{"locale-data":v.core.locale,core:v.core,locales:v.locales,class:"vpd-locales",onChange:v.setLocale},null,8,["locale-data","core","locales","onChange"])]}):Object(a.createCommentVNode)("",!0)],4)):Object(a.createCommentVNode)("",!0),Object(a.createVNode)("div",{class:"vpd-simple-content",onMouseleave:m[1]||(m[1]=function(Y){return D.$emit("update:hovered-item",null)})},[v.hasStep("y")?(Object(a.openBlock)(),Object(a.createBlock)(ee,{key:0,label:v.lang.year,value:S.selectedYear,locale:v.core.locale.name},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(v.years,function(Y,we){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:we},Y.attributes,{class:["vpd-addon-list-item",{"vpd-selected":Y.selected},Y.attributes.class],style:[{color:Y.selected?v.color:""},Y.attributes.style],disabled:Y.disabled,onClick:function(_e){return D.$emit("select-year",Y)}}),[Object(a.renderSlot)(D.$slots,"year-item",{vm:L.vm,year:Y,color:v.color},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(v.convertToLocaleNumber(Y.xFormat("jYYYY"))),1)]})],16,["disabled","onClick"])}),128))]}),_:3},8,["label","value","locale"])):Object(a.createCommentVNode)("",!0),v.hasStep("m")?(Object(a.openBlock)(),Object(a.createBlock)(ee,{key:1,label:v.lang.month,value:S.selectedMonth,locale:v.core.locale.name},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(v.months,function(Y,we){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:we},Y.attributes,{class:["vpd-addon-list-item",{"vpd-selected":Y.selected},Y.attributes.class],disabled:Y.disabled,style:[{color:Y.selected?v.color:""},Y.attributes.style],onClick:function(_e){return D.$emit("select-month",Y)}}),[Object(a.renderSlot)(D.$slots,"month-item",{vm:L.vm,monthItem:Y,color:v.color},function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(Y.xFormat("jMMMM")),1)]})],16,["disabled","onClick"])}),128))]}),_:3},8,["label","value","locale"])):Object(a.createCommentVNode)("",!0),v.hasStep("d")?(Object(a.openBlock)(),Object(a.createBlock)(ee,{key:2,label:v.lang.day,value:S.selectedDay,locale:v.core.locale.name},{default:Object(a.withCtx)(function(){return[(Object(a.openBlock)(!0),Object(a.createBlock)(a.Fragment,null,Object(a.renderList)(S.days,function(Y,we){return Object(a.openBlock)(),Object(a.createBlock)("div",Object(a.mergeProps)({key:we,class:["vpd-addon-list-item",{"vpd-selected":Y.selected,"vpd-empty":Y.date==null,"vpd-range-first":Y.isFirst,"vpd-range-last":Y.isLast,"vpd-range-between":Y.isBetween,"vpd-range-hover":v.hoveredItem&&Y.isHover},Y.attributes.class]},Y.attributes,{style:[{color:Y.selected||Y.isBetween?v.color:""},Y.attributes.style],disabled:Y.disabled,onClick:function(_e){return D.$emit("select-day",Y)},onMouseover:function(_e){return D.$emit("update:hovered-item",Y.date)}}),[Y.date!=null?Object(a.renderSlot)(D.$slots,"day-item",Object(a.mergeProps)({key:0},{vm:L.vm,day:Y,color:v.color}),function(){return[Object(a.createTextVNode)(Object(a.toDisplayString)(v.convertToLocaleNumber(Y.formatted)),1)]}):Object(a.createCommentVNode)("",!0)],16,["disabled","onClick","onMouseover"])}),128))]}),_:3},8,["label","value","locale"])):Object(a.createCommentVNode)("",!0)],32)])}var _t={ref:"content",class:"vpd-column-content"};function We(D,m,v,T,L,S){return Object(a.openBlock)(),Object(a.createBlock)("div",{class:["vpd-column",{"vpd-is-mounted":L.isMounted}],onMousewheel:m[1]||(m[1]=Object(a.withModifiers)(function(){},["stop"]))},[v.label?(Object(a.openBlock)(),Object(a.createBlock)("div",{key:0,class:"vpd-column-header",textContent:Object(a.toDisplayString)(v.label)},null,8,["textContent"])):Object(a.createCommentVNode)("",!0),Object(a.createVNode)("div",_t,[Object(a.renderSlot)(D.$slots,"default")],512)],34)}var Wt={name:"SimpleModeColumn",props:{label:{type:String,default:null},locale:{type:String,default:null},value:{type:[String,Number],default:null}},data:function(){return{isMounted:!1}},watch:{value:function(){this.scrollIntoView(200)},locale:function(){this.scrollIntoView(200)}},mounted:function(){this.scrollIntoView(0)},methods:{scrollIntoView:function(m){var v=this;try{this.isMounted=!1,this.$nextTick(function(){var T=v.$refs.content.querySelector(".vpd-selected")||v.$refs.content.querySelector(".vpd-addon-list-item:not([disabled])");T&&W(T,m,function(){v.isMounted=!0})})}catch(T){console.warn(T)}}}};Wt.render=We;var Et=Wt,qe={name:"SimpleMode",components:{LocaleChange:$,SimpleModeColumn:Et},props:{visible:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},range:{type:Boolean,default:!1},lang:{type:Object,default:null},color:{type:String,default:null},hasStep:{type:Function,default:null},years:{type:Array,default:function(){return[]}},months:{type:Array,default:function(){return[]}},monthDays:{type:Array,default:function(){return[]}},selectedDates:{type:Array,default:function(){return[]}},formattedDate:{type:String,default:null},hoveredItem:{type:Date,default:null},locales:{type:Array,default:function(){return[]}},core:{type:Object,default:null},setLocale:{type:Function,default:null},convertToLocaleNumber:{type:Function,default:null}},emits:["select-day","update:hovered-item","select-month","select-year"],data:function(){return{vm:this}},computed:{days:function(){var m=[];return this.monthDays.forEach(function(v){v.forEach(function(T){T.date&&m.push(T)})}),m},selectedYear:function(){var m=this.years.find(function(v){return v.selected});return m?m.xFormat("YYYY"):""},selectedMonth:function(){var m=this.months.find(function(v){return v.selected});return m?m.xFormat("MM"):""},selectedDay:function(){var m=this.days.find(function(v){return v.selected})||{};return m&&m.date?m.date.getDate():""},showHeader:function(){var m=this.selectedDates.length;return this.locales.length>1||m>1||this.range&&m||this.multiple&&m}}};qe.render=ut;var ye=qe,Rt=i("c32d"),it=i.n(Rt),Ti=i("b9b3"),wt=i.n(Ti);//! moment.js locale configuration
var Un={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},Ui={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},dt={months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(m){return/بعد از ظهر/.test(m)},meridiem:function(m){return m<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"ثانیه d%",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(m){return m.replace(/[۰-۹]/g,function(v){return Ui[v]}).replace(/،/g,",")},postformat:function(m){return m.replace(/\d/g,function(v){return Un[v]}).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}};wt.a.updateLocale("en",{weekdaysMin:"S_M_T_W_T_F_S".split("_")}),wt.a.updateLocale("fa",dt),wt.a.loadPersian({dialect:"persian-modern"}),wt.a.daysInMonth=function(D,m){return wt()({year:D,month:m}).daysInMonth()};var li={fa:{daysInMonth:"jDaysInMonth",year:"jYear",month:"jMonth",date:"jDate",day:"day"},en:{daysInMonth:"daysInMonth",year:"year",month:"month",date:"date",day:"day"}},At={fa:{dow:6,dir:"rtl",displayFormat:null,lang:{label:"شمسی",submit:"تایید",cancel:"انصراف",now:"اکنون",nextMonth:"ماه بعد",prevMonth:"ماه قبل",year:"سال",month:"ماه",day:"روز"}},en:{dow:0,dir:"ltr",displayFormat:null,lang:{label:"میلادی",submit:"Select",cancel:"Cancel",now:"Now",nextMonth:"Next month",prevMonth:"Previous month",year:"Year",month:"Month",day:"Day"}}},$t=function(m,v){var T={moment:wt.a,momentBase:it.a,locale:{name:"fa",config:{}},localesConfig:{},setLocalesConfig:null,changeLocale:null,getWeekArray:null,getYearsList:null,getMonthsList:null},L;return T.changeLocale=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"fa",ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=this.locale,we=de.clone(At[G]||At.en),fe=li[G]||li.en;ee=ee[G]||{},At[G]||(ee=de.extend(!0,{},de.clone(At.en),ee)),Y.name=G,Y.config=de.extend(!0,we,ee),L=wt.a[fe.daysInMonth];function _e(J){if(J!==void 0){var Me=function(je){return Y.name!=="fa"&&(je=je.replace(/j/g,"")),je};J.xYear=wt.a.fn[fe.year],J.xMonth=wt.a.fn[fe.month],J.xDate=wt.a.fn[fe.date],J.xFormat=function(le){return this.format(Me(le))},J.xStartOf=function(le){return this.startOf(fe[le])},J.xEndOf=function(le){return this.endOf(fe[le])},J.xAdd=function(le,je){return this.add(le,fe[je])},J.clone=function(){return T.moment(this.toDate())}}}this.moment=function(){var J=wt.a.apply(null,arguments);return J.locale(Y.name),_e(J),J}},T.setLocalesConfig=function(S){var G=de.clone(At);for(var ee in S)S.hasOwnProperty(ee)&&G[ee]===void 0&&(G[ee]=de.extend(!0,{},de.clone(G.en),{lang:{label:ee}},S[ee]));this.localesConfig=de.extend(!0,G,S)},T.getWeekArray=function(G){var ee=this;function Y(je,Ct){for(var Gt=7-Ct.length,Ds=0;Ds<Gt;++Ds)Ct[je.length?"push":"unshift"](null);je.push(Ct)}G.set({h:12,m:0});for(var we=L(G.xYear(),G.xMonth()),fe=G.clone().xDate(1),_e=[fe.toDate()],J=2;J<=we;J++)_e.push(fe.xAdd(1,"day").toDate());var Me=[],le=[];return _e.forEach(function(je){le.length>0&&je.getDay()===ee.locale.config.dow&&(Y(Me,le),le=[]),le.push(je),_e.indexOf(je)===_e.length-1&&Y(Me,le)}),Me},T.getYearsList=function(G,ee){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,we=arguments.length>3?arguments[3]:void 0,fe=[];if(Y){var _e=getYear(we);G=_e-Y,ee=_e+Y}for(var J=G;J<=ee;J++)fe.push(J);return fe},T.getMonthsList=function(G,ee,Y){for(var we=[],fe=G?G.clone().xStartOf("month"):-1/0,_e=ee?ee.clone().xEndOf("month"):1/0,J=0;J<12;J++){var Me=Y.clone().xMonth(J),le=Me.clone().xStartOf("month"),je=Me.clone().xEndOf("month");Me.disabled=le<fe||je>_e,we.push(Me)}return we},T.changeLocale(m,v),T},ke=$t;function Mt(D){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mt=function(v){return typeof v}:Mt=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},Mt(D)}function Qt(D,m){return ht(D)||bt(D,m)||Ei(D,m)||hi()}function hi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(D,m){if(D){if(typeof D=="string")return nt(D,m);var v=Object.prototype.toString.call(D).slice(8,-1);if(v==="Object"&&D.constructor&&(v=D.constructor.name),v==="Map"||v==="Set")return Array.from(D);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return nt(D,m)}}function nt(D,m){(m==null||m>D.length)&&(m=D.length);for(var v=0,T=new Array(m);v<m;v++)T[v]=D[v];return T}function bt(D,m){var v=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(v!=null){var T=[],L=!0,S=!1,G,ee;try{for(v=v.call(D);!(L=(G=v.next()).done)&&(T.push(G.value),!(m&&T.length===m));L=!0);}catch(Y){S=!0,ee=Y}finally{try{!L&&v.return!=null&&v.return()}finally{if(S)throw ee}}return T}}function ht(D){if(Array.isArray(D))return D}var Dt={name:"Vue3PersianDatetimePicker",components:{SimpleMode:ye,TimeSection:tt,LocaleChange:$,Arrow:A,CalendarIcon:Ce,TimeIcon:z},mixins:[ze],props:{modelValue:{type:[Number,String,Date,Array],default:""},initialValue:{type:[Number,String],default:""},inputFormat:{type:String,default:""},displayFormat:{type:String,default:""},format:{type:String,default:""},view:{type:String,default:"day"},type:{type:String,default:"date"},min:{type:[String],default:""},max:{type:[String],default:""},editable:{type:Boolean,default:!1},element:{type:String,default:void 0},customInput:{type:String,default:void 0},name:{type:String,default:void 0},inputClass:{type:String,default:"form-control"},placeholder:{type:String,default:""},altName:{type:String,default:""},altFormat:{type:String,default:""},show:{type:Boolean,default:!1},color:{type:String,default:"#417df4"},autoSubmit:{type:Boolean,default:!1},wrapperSubmit:{type:Boolean,default:!1},appendTo:{type:String,default:null},disabled:{type:Boolean,default:!1},disable:{type:[Array,String,Function,RegExp],default:void 0},label:{type:String,default:""},highlight:{type:Function,default:null},jumpMinute:{type:Number,default:1},roundMinute:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},locale:{type:String,default:"fa"},localeConfig:{type:Object,default:function(){return{}}},timezone:{type:[Boolean,String,Function],default:!1},showNowBtn:{type:Boolean,default:!0},convertNumbers:{type:Boolean,default:!1},compactTime:{type:Boolean,default:!1},range:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},popover:{type:[Boolean,String],default:!1},useRouter:{type:[Boolean,String],default:!1},simple:{type:Boolean,default:!1},inputAttrs:{type:Object,default:null}},emits:["update:modelValue","locale-change","change","open","close","year-change","month-change","next-month","prev-month"],data:function(){var m=this.locale.split(",")[0],v=new ke(m,this.localeConfig);return{core:v,now:v.moment(),date:{},selectedDates:[],hoveredItem:null,visible:!1,directionClass:"",directionClassDate:"",steps:["y","m","d","t"],step:0,shortCodes:{year:"y",month:"m",day:"d",time:"t"},time:{},minDate:!1,maxDate:!1,output:[],updateNowInterval:null,locales:["fa"],localeData:v.locale,windowWidth:window.innerWidth,popoverPlace:"bottom-right"}},computed:{vm:function(){return this},id:function(){var m=Math.round(Math.random()*1e6);return"vpd-".concat(this.$attrs.id||m)},currentStep:function(){return this.steps[this.step]},selectedDate:function(){var m=this.selectedDates;return m.length?m[m.length-1]:this.date},formattedDate:function(){var m="";if(this.hasStep("y")&&(m="jYYYY"),this.hasStep("m")&&(m+=" jMMMM "),this.hasStep("d")&&(m=this.isDataArray?"jD jMMMM jYYYY":"ddd jD jMMMM"),this.hasStep("t")&&(m+=" HH:mm "),!m)return"";var v=this.multiple?" | ":" ~ ";return this.selectedDates.map(function(T){return T.xFormat(m)}).join(v)},month:function(){var m=this;if(!this.hasStep("d"))return[];var v=this.minDate?this.minDate.clone().startOf("day"):-1/0,T=this.maxDate?this.maxDate.clone().endOf("day"):1/0;return this.core.getWeekArray(this.date.clone()).map(function(L){return L.map(function(S){var G={date:S,formatted:"",selected:!1,disabled:!1,attributes:{}};if(!S)return G;var ee=m.core.moment(S);if(G.formatted=ee.xDate(),G.selected=m.selectedDates.find(function(_e){return R(_e,S)}),G.disabled=m.minDate&&ee.clone().startOf("day")<v||m.maxDate&&ee.clone().endOf("day")>T||m.checkDisable("d",ee),m.range&&!G.disabled){var Y=Qt(m.selectedDates,2),we=Y[0],fe=Y[1];G.isFirst=G.selected&&we&&R(we,S),G.isLast=G.selected&&fe&&R(fe,S),G.isBetween=!G.selected&&we&&fe&&S>we&&S<fe}return G.attributes=m.getHighlights("d",ee),G})})},monthDays:function(){var m=this;if(!this.range||this.selectedDates.length!==1||!this.hoveredItem)return this.month;var v=[this.hoveredItem,this.selectedDates[0]];v.sort(function(S,G){return S-G});var T=v[0],L=v[1];return this.month.map(function(S){return S.map(function(G){if(!G.date)return G;if(m.range&&!G.disabled){var ee=G.date;G.isHover=!G.selected&&ee>T&&ee<L}return G})})},years:function(){var m=this,v=this.currentStep==="y"||this.simple;if(!this.hasStep("y")||!v)return[];var T=this.core.moment,L=this.minDate?this.minDate:T("1300","jYYYY"),S=this.maxDate?this.maxDate:L.clone().add(150,"year"),G=this.date.xYear();return this.core.getYearsList(L.xYear(),S.xYear()).reverse().map(function(ee){var Y=T().xYear(ee);return Y.selected=G===ee,Y.disabled=m.checkDisable("y",ee),Y.attributes=m.getHighlights("y",ee),Y})},months:function(){var m=this;if(this.hasStep("m")){var v=this.date.clone().xStartOf("month"),T=this.core.getMonthsList(this.minDate,this.maxDate,v);return T.forEach(function(L){L.selected=m.date.xMonth()===L.xMonth(),L.disabled=L.disabled||m.checkDisable("m",L),L.attributes=m.getHighlights("m",L)}),T}return[]},prevMonthDisabled:function(){return this.hasStep("d")&&this.minDate&&this.minDate.clone().xStartOf("month")>=this.date.clone().xStartOf("month")},nextMonthDisabled:function(){return this.hasStep("d")&&this.maxDate&&this.maxDate.clone().xStartOf("month")<=this.date.clone().xStartOf("month")},canGoToday:function(){if(!this.minDate&&!this.maxDate)return!0;var m=this.now,v=this.minDate&&this.minDate<=m,T=this.maxDate&&m<=this.maxDate;return this.type==="time"&&(this.minDate&&(v=m.clone().hour(this.minDate.hour()).minute(this.minDate.minute()),v=v<=m),this.maxDate&&(T=this.now.clone().hour(this.maxDate.hour()).minute(this.maxDate.minute()),T=m<=T)),this.minDate&&this.maxDate?v&&T:this.minDate?v:this.maxDate?T:!1},altFormatted:function(){var m=this.altFormat;if(m===""||m===void 0)switch(this.type){case"time":m="HH:mm:ss [GMT]ZZ";break;case"datetime":m="YYYY-MM-DD HH:mm:ss [GMT]ZZ";break;case"date":m="YYYY-MM-DD";break;case"year":m="YYYY";break;case"month":m="MM";break;case"year-month":m="YYYY-MM";break}return this.output.map(function(v){return v.format(m)}).join(" ~ ")},selfFormat:function(){var m=this.format;if(["",void 0,"date"].indexOf(m)!==-1)switch(this.type){case"time":m="HH:mm";break;case"datetime":m="jYYYY/jMM/jDD HH:mm";break;case"date":m="jYYYY/jMM/jDD";break;case"year":m="jYYYY";break;case"month":m="jMM";break;case"year-month":m="jYYYY/jMM";break}return m},selfInputFormat:function(){return this.inputFormat===""||this.inputFormat===void 0?this.selfFormat:this.inputFormat},outputValue:function(){var m=this,v=O(this.output),T=this.selfFormat,L=this.modelValue instanceof Date||this.format==="date";return v.map(function(S){return/j\w/.test(T)&&S.locale("fa"),m.setTimezone(S,"out"),L?S.toDate():S.format(T)})},selfDisplayFormat:function(){var m=this.displayFormat||this.selfFormat,v=this.localeData.config.displayFormat;return v?typeof v=="function"?v(this):v:(this.localeData.name!=="fa"&&(m=m.replace(/j/g,"")),m)},displayValue:function(){var m=this,v=this.selfDisplayFormat;return this.output.map(function(T){var L=T.clone();return/j\w/.test(v)&&L.locale("fa"),m.convertToLocaleNumber(L.format(v))}).join(" ~ ")},isDisableTime:function(){return this.hasStep("t")&&this.checkDisable("t",this.time)},canSubmit:function(){if(!this.disable)return!0;var m=!0;return this.hasStep("t")&&(m=!this.isDisableTime),m&&this.type!=="time"&&(m=!this.checkDisable("d",this.date)),m},weekDays:function(){for(var m=JSON.parse(JSON.stringify(this.core.moment().localeData().weekdaysMin())),v=this.core.locale.config.dow;v>0;)m.push(m.shift()),v--;return m},lang:function(){return this.localeData.config.lang},isPopover:function(){return(this.popover===""||this.popover)&&this.windowWidth>480},isDataArray:function(){return this.range||this.multiple},isCompactTime:function(){return this.compactTime||this.type==="datetime"&&this.simple},customInputElement:function(){return this.element?"#".concat(this.element):this.customInput}},watch:{type:{handler:"setType",immediate:!0},view:{handler:"setView",immediate:!0},modelValue:{handler:"updateDates",immediate:!0},min:{handler:"setMinMax",immediate:!0},max:{handler:"setMinMax",immediate:!0},timezone:{handler:"updateDates"},inline:{handler:function(m){this.disabled||(this.visible=!!m)},immediate:!0},disabled:{handler:function(m){m?this.visible=!1:this.inline&&(this.visible=!0)},immediate:!0},selectedDate:function(m,v){this.setDirection("directionClass",m,v)},date:function(m,v){this.setDirection("directionClassDate",m,v),this.isLower(this.date)&&(this.date=this.minDate.clone()),this.isMore(this.date)&&(this.date=this.maxDate.clone())},visible:function(m){var v=this;if(m){if(this.disabled)return this.visible=!1;this.type==="datetime"&&this.view==="day"&&this.goStep("d"),this.view!=="day"&&this.goStep(this.shortCodes[this.view]||"d"),this.$nextTick(function(){if(v.appendTo)try{var T=document.querySelector(v.appendTo);T.appendChild(v.$refs.picker)}catch{console.warn('Cannot append picker to "'.concat(v.appendTo,'"!'))}}),this.checkScroll(),this.setPlacement(),this.$emit("open",this)}else{if(this.inline&&!this.disabled)return this.visible=!0;this.$emit("close",this)}},show:function(m){this.visible=m},locale:{immediate:!0,handler:function(m){var v=m.toString().split(",");this.locales=v.length?v:["fa"],this.core.locale.name!==this.locales[0]&&this.setLocale(this.locales[0])}},localeConfig:{deep:!0,immediate:!0,handler:function(m){this.core.setLocalesConfig(m),this.setLocale(this.localeData.name)}},"localeData.name":function(){this.$emit("locale-change",this.localeData),this.setMinMax()},displayValue:{immediate:!0,handler:function(m){if(this.customInput){var v=document.querySelector(this.customInput);v&&(v.value=m)}}}},created:function(){var m=this;this.updateNowInterval=setInterval(function(){m.now=m.core.moment()},1e3)},mounted:function(){var m=this;this.$nextTick(function(){m.customInputElement&&!m.editable&&K(m.customInputElement,"click",m.focus),m.customInput&&m.editable&&K(m.customInput,"blur",m.setOutput)}),document.body.addEventListener("keydown",function(v){v=v||event;var T=v.keyCode;(T===9||T===27)&&m.visible&&(m.visible=!1)}),window.addEventListener("resize",this.onWindowResize,!0),window.addEventListener("mousedown",this.onWindowClick,!0)},onBeforeUnmount:function(){window.clearInterval(this.updateNowInterval),window.removeEventListener("resize",this.onWindowResize,!0),window.removeEventListener("mousedown",this.onWindowClick,!0);var m=this.$refs.picker;this.appendTo&&m&&m.$el&&m.$el.parentNode&&m.$el.parentNode.removeChild(m.$el)},methods:{nextStep:function(m){var v=this,T=function(){var G=v.range?2:v.multiple?0:1,ee=v.selectedDates.length>=G;(v.autoSubmit||v.inline)&&ee&&v.submit(!v.multiple)};if(this.simple){(this.type==="date"&&m==="day"||this.type==="year-month"&&m==="month"||this.type==="year"||this.type==="month")&&T();return}var L=this.step+1;this.isCompactTime&&this.type==="datetime"&&(L+=1),this.steps.length<=L?T():(this.step++,this.goStep(this.step))},goStep:function(m){this.step=typeof m=="number"?m:this.steps.indexOf(m),this.checkScroll()},checkScroll:function(){var m=this,v=this.currentStep;(v==="y"||v==="m"&&this.visible)&&setTimeout(function(){var T=m.$refs[{y:"year",m:"month"}[v]];if(T){var L=T.querySelector(".vpd-selected");if(L&&"scrollIntoView"in L)try{L.scrollIntoView({block:"center"})}catch{L.scrollIntoView()}}},100)},nextMonth:function(){this.date=this.date.clone().xAdd(1,"month"),this.$emit("next-month",this.date.clone())},prevMonth:function(){this.date=this.date.clone().xAdd(-1,"month"),this.$emit("prev-month",this.date.clone())},selectDay:function(m){if(!(!m.date||m.disabled)){var v=this.core.moment(m.date);if(v.set({hour:this.time.hour(),minute:this.time.minute(),second:0}),this.date=v.clone(),this.time=v.clone(),this.range){var T=this.selectedDates.length;!T||T>1?this.selectedDates=[v.clone()]:(this.selectedDates.push(v.clone()),this.selectedDates.sort(function(S,G){return S-G}))}else if(this.multiple){var L=this.selectedDates.findIndex(function(S){return S.valueOf()===v.valueOf()});L>-1?this.selectedDates.splice(L,1):this.selectedDates.push(v.clone())}else this.selectedDates=[v.clone()];this.nextStep("day")}},selectYear:function(m){m.disabled||(this.date=this.date.clone().xYear(m.xYear()),["year","year-month"].indexOf(this.type)!==-1&&(this.selectedDates=[this.date.clone()]),this.$emit("year-change",m),this.nextStep("year"))},selectMonth:function(m){m.disabled||(this.date=this.date.clone().xMonth(m.xMonth()),["month","year-month"].indexOf(this.type)!==-1&&(this.selectedDates=[this.date.clone()]),this.$emit("month-change",m),this.nextStep("month"))},submit:function(){var m=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,T=this.steps.length-1,L=this.selectedDates;if(this.isCompactTime&&this.type==="datetime"&&(T-=1),this.step<T&&!this.simple)return this.nextStep();if(this.hasStep("t")){var S={hour:this.time.hour(),minute:this.time.minute()};this.date=this.date.set(S).clone(),this.selectedDates=L.map(function(G){return G.set(S).clone()})}["year","month","year-month"].indexOf(this.type)!==-1&&(this.selectedDates=L.map(function(){return m.date.clone()})),this.range&&L.length>1&&(L[0].xStartOf("day"),L[1].xEndOf("day")),this.output=O(L),v&&(this.visible=!1),this.isDataArray?(this.$emit("update:modelValue",this.outputValue),this.$emit("change",O(L))):(this.$emit("update:modelValue",this.outputValue[0]),this.$emit("change",L[0].clone()))},updateDates:function(m){var v=this;if(m||(m=this.isDataArray?[]:""),!(this.date.clone&&m.toString()===this.outputValue.toString())){var T=m instanceof Array,L=function(G){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Y,we=v.modelValue instanceof Array?v.modelValue[ee]:v.modelValue;try{var fe=Mt(G)==="object";G instanceof Date?Y=v.getMoment(G):G&&fe&&"clone"in G?Y=G.clone():(G===null||!fe)&&(Y=v.getMoment(G||we||v.initialValue)),Y=Y.isValid()?Y:v.core.moment()}catch{Y=v.core.moment()}return v.setTimezone(Y,"in"),Y};T?(this.date=L(m[0]),this.selectedDates=m.map(L)):this.date=L(m),this.hasStep("t")||this.date.set({hour:0,minute:0,second:0}),this.isLower(this.date)?this.date=this.minDate.clone():this.isMore(this.date)&&(this.date=this.maxDate.clone()),T||(this.selectedDates=[this.date.clone()]),this.time=this.date.clone(),this.modelValue!==""&&this.modelValue!==null&&this.modelValue.length?this.output=O(this.selectedDates):this.output=[]}},goToday:function(){var m=this.core.moment();this.hasStep("t")||m.set({hour:0,minute:0,second:0}),this.date=m.clone(),this.time=m.clone(),this.selectedDates=[m.clone()]},setType:function(){switch(this.type){case"date":this.steps=["y","m","d"],this.goStep("d");break;case"datetime":this.steps=["y","m","d","t"],this.goStep("d");break;case"year":this.steps=["y"],this.goStep("y");break;case"month":this.steps=["m"],this.goStep("m");break;case"time":this.steps=["t"],this.goStep("t");break;case"year-month":this.steps=["y","m"],this.goStep("y");break}},setView:function(){var m=this.shortCodes[this.view];this.hasStep(m)&&this.goStep(m)},setDirection:function(m,v,T){this[m]=v>T?"direction-next":"direction-prev"},setMinMax:function(){var m=this.getMoment(this.min),v=this.getMoment(this.max);this.minDate=this.min&&m.isValid()?m:!1,this.maxDate=this.max&&v.isValid()?v:!1},getMoment:function(m){var v,T=this.core.moment;if(m instanceof Date)return T(m);if(this.selfInputFormat==="x"||this.selfInputFormat==="unix")v=T(m.toString().length===10?m*1e3:m*1);else try{if(m){var L=T(m,this.selfInputFormat),S=T(m,this.selfFormat),G=T(),ee=G.xYear();this.type==="month"?(L.xYear(ee),S.xYear(ee)):this.type==="time"&&(L=G.clone().set({h:L.hour(),m:L.minute(),s:0}),S=L.clone()),L.year()!==S.year()&&L.year()<1900?v=S.clone():v=L.clone()}else v=T()}catch{v=T()}return v},focus:function(m){if(this.editable)this.$refs.input&&this.$refs.input.focus();else return m?(m.preventDefault(),m.stopPropagation(),m.target.blur(),this.visible=!this.visible):this.visible=!0,!1},hasStep:function(m){return this.steps.indexOf(m)!==-1},setOutput:function(m){var v=this;if(this.editable){var T=m.target.value.split("~"),L=T.map(function(S){if(S="".concat(S).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),S==="")return null;try{var G=v.core.moment(S,v.selfDisplayFormat);return G.isValid()?G:null}catch{return null}});this.output=L.filter(function(S){return S}),this.output.sort(function(S,G){return S-G}),this.output.length?(this.updateDates(O(this.output)),this.submit()):(this.$emit("update:modelValue",this.isDataArray?[]:null),this.$emit("change",this.isDataArray?[]:null))}},wrapperClick:function(){this.visible=!1,this.wrapperSubmit&&this.canSubmit&&this.submit()},applyDevFn:function(m,v){var T=!1,L=Array.prototype.splice.call(arguments,2);try{L.push({y:"year",m:"month",d:"day",t:"time"}[v]),T=m.apply(null,L)}catch(S){console.error(S)}return T},checkDisable:function(m,v){var T=this,L=this.disable;if(!L)return!1;var S=Mt(L),G=function(fe,_e,J){if(fe instanceof RegExp)return fe.test(_e);if(fe===_e)return!0;if(m==="d"){var Me=fe.length;return _e.substr(0,Me)===fe||J.clone().locale("en").format("dddd")===fe}return!1},ee=function(fe,_e){var J=!1;if(S==="function")return T.applyDevFn(L,m,_e,fe.clone());if(Object.prototype.toString.call(L)==="[object Array]"){for(var Me=L.length,le=0;le<Me&&(J=G(L[le],_e,fe),!J);le++);return J}else if(S==="string"||L instanceof RegExp)return G(L,_e,fe);return!1},Y=this.selfFormat;return m==="y"?v=this.core.moment(v,"jYYYY"):m==="d"&&(Y=Y.replace(/(H(H?))|(h(h?))?(:?)m(m?)(:?)(s(s?))?/g,"")),ee(v,v.format(Y))},getHighlights:function(m,v){var T=this.highlight;return!T||typeof T!="function"?{}:(m==="y"&&(v=this.core.moment(v,"jYYYY")),this.applyDevFn(T,m,v.format(this.selfFormat),v.clone())||{})},isLower:function(m){return this.minDate&&m<this.minDate},isMore:function(m){return this.maxDate&&m>this.maxDate},clearValue:function(){this.disabled||(this.output=[],this.$emit("update:modelValue",this.isDataArray?[]:""),this.$emit("change",this.isDataArray?[]:null))},setLocale:function(m){this.core.changeLocale(m,this.localeConfig),this.date=this.date.clone(),this.selectedDates=this.selectedDates.map(function(v){return v.clone()})},setTimezone:function(m,v){var T=this.timezone;if(T){var L=v==="in"?1:-1,S=this.core.momentBase;if(typeof T=="string"){var G=S().utc().format("YYYY-MM-DDTHH:mm:ss")+T;m.add(S.parseZone(G).utcOffset()*L,"minutes")}else typeof T=="boolean"&&T?m.subtract(new Date(m).getTimezoneOffset()*L,"minutes"):typeof T=="function"&&(m=T(m,v,this))}return m.clone()},convertToLocaleNumber:function(m){return this.convertNumbers&&this.locale==="fa"?"".concat(m).replace(/\d+/g,function(v){for(var T="",L=0,S=v.length;L<S;L++)T+=String.fromCharCode(v.charCodeAt(L)+1728);return T}):m},onWindowResize:function(){this.windowWidth=window.innerWidth},onWindowClick:function(m){var v=this;if(this.isPopover&&this.$refs.picker&&this.$refs.inputGroup){var T=this.$refs.picker.contains(m.target),L=this.$refs.inputGroup.contains(m.target);T&&m.preventDefault(),!T&&!L&&setTimeout(function(){return v.visible=!1},this.editable?500:0)}},setPlacement:function(){var m=this;if(this.isPopover){var v=["top-left","top-right","bottom-right","bottom-left","left-top","left-bottom","right-top","right-bottom"];if(v.indexOf(this.popover)!==-1)return this.popoverPlace=this.popover;this.popoverPlace="bottom-right",this.$nextTick(function(){var T=["bottom","right"],L=m.$refs.container,S=L.getBoundingClientRect(),G=S.left,ee=window.innerHeight-S.bottom;ee<=0&&(T[0]="top"),G<=0&&(T[1]="left"),m.popoverPlace=T.join("-")})}}},install:function(m,v){var T=this;v=Pe({name:"data-picker",props:{}},v);for(var L in v.props)T.props.hasOwnProperty(L)&&(T.props[L].default=v.props[L]);m.component(v.name,T)}};Dt.render=k;var at=Dt;t.default=at}}).default})($1);const sw=F_(Ua);function Sr(n){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(n)}function ar(n,e){if(!n.vueAxiosInstalled){var t=zc(e)?ow(e):e;if(lw(t)){var i=hw(n);if(i){var s=i<3?rw:aw;Object.keys(t).forEach(function(r){s(n,r,t[r])}),n.vueAxiosInstalled=!0}else console.error("[vue-axios] unknown Vue version")}else console.error("[vue-axios] configuration is invalid, expected options are either <axios_instance> or { <registration_key>: <axios_instance> }")}}function rw(n,e,t){Object.defineProperty(n.prototype,e,{get:function(){return t}}),n[e]=t}function aw(n,e,t){n.config.globalProperties[e]=t,n[e]=t}function zc(n){return n&&typeof n.get=="function"&&typeof n.post=="function"}function ow(n){return{axios:n,$http:n}}function lw(n){return Sr(n)==="object"&&Object.keys(n).every(function(e){return zc(n[e])})}function hw(n){return n&&n.version&&Number(n.version.split(".")[0])}(typeof Xa>"u"?"undefined":Sr(Xa))=="object"?Uc.exports=ar:typeof define=="function"&&define.amd?define([],function(){return ar}):window.Vue&&window.axios&&window.Vue.use&&Vue.use(ar,window.axios);const cw={key:0},uw={key:1},dw={key:2},fw={key:3},gw={key:4},mw={key:5},_w={key:6},pw={key:7},yw={key:8},vw={key:9},xw=bh({__name:"vue-awesome-paginate",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:10,validator:n=>{if(n<=0){const e="itemsPerPage attribute must be greater than 0.";throw console.error(e),new TypeError(e)}return!0}},currentPage:{type:Number,default:1,validator:n=>{const e="currentPage attribute must be greater than 0.";if(n<=0)throw console.error(e),new TypeError(e);return!0}},modelValue:{type:Number,required:!0,validator:n=>{const e="v-model is required and must be greater than 0.";if(n<=0)throw console.error(e),new TypeError(e);return!0}},maxPagesShown:{type:Number,default:5,validator:n=>{const e="maxPagesShown attribute must be greater than 0.";if(n<=0)throw console.error(e),new TypeError(e);return!0}},dir:{type:String,default:"ltr",validator:n=>{const e='dir attribute must be either "ltr" or "rtl".';if(n!=="ltr"&&n!=="rtl")throw console.error(e),new TypeError(e);return!0}},type:{type:String,default:"button",validator:n=>{const e=["link","button"],t="type attribute must be one of the following: "+e.join(", ");if(e.indexOf(n)===-1)throw console.error(t),new TypeError(t);return!0}},onClick:{type:Function,default:()=>{}},locale:{type:String,default:"en",validator:n=>{const e=["en","ar","ir"],t="locale attribute must be one of the following: "+e.join(", ");if(e.indexOf(n)===-1)throw console.error(t),new TypeError(t);return!0}},prevButtonContent:{type:String,default:"<"},nextButtonContent:{type:String,default:">"},hidePrevNext:{type:Boolean,default:!1},hidePrevNextWhenEnds:{type:Boolean,default:!1},showBreakpointButtons:{type:Boolean,default:!0},disableBreakpointButtons:{type:Boolean,default:!1},startingBreakpointContent:{type:String,default:"..."},endingBreakpointButtonContent:{type:String,default:"..."},showJumpButtons:{type:Boolean,default:!1},linkUrl:{type:String,default:"#"},backwardJumpButtonContent:{type:String,default:"<<"},forwardJumpButtonContent:{type:String,default:">>"},disablePagination:{type:Boolean,default:!1},showEndingButtons:{type:Boolean,default:!1},firstPageContent:{type:String,default:"First"},lastPageContent:{type:String,default:"Last"},backButtonClass:{type:String,default:"back-button"},nextButtonClass:{type:String,default:"next-button"},firstButtonClass:{type:String,default:"first-button"},lastButtonClass:{type:String,default:"last-button"},numberButtonsClass:{type:String,default:"number-buttons"},startingBreakpointButtonClass:{type:String,default:"starting-breakpoint-button"},endingBreakPointButtonClass:{type:String,default:"ending-breakpoint-button"},firstPageButtonClass:{type:String,default:"first-page-button"},lastPageButtonClass:{type:String,default:"last-page-button"},paginateButtonsClass:{type:String,default:"paginate-buttons"},disabledPaginateButtonsClass:{type:String,default:"disabled-paginate-buttons"},activePageClass:{type:String,default:"active-page"},paginationContainerClass:{type:String,default:"pagination-container"},disabledBreakPointButtonClass:{type:String,default:"disabled-breakpoint-button"},backwardJumpButtonClass:{type:String,default:"backward-jump-button"},forwardJumpButtonClass:{type:String,default:"forward-jump-button"},disabledBackwardJumpButtonClass:{type:String,default:"disabled-backward-jump-button"},disabledBackButtonClass:{type:String,default:"disabled-back-button"},disabledFirstButtonClass:{type:String,default:"disabled-first-button"},disabledLastButtonClass:{type:String,default:"disabled-last-button"},disabledNextButtonClass:{type:String,default:"disabled-next-button"},disabledForwardJumpButtonClass:{type:String,default:"disabled-forward-jump-button"}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n;if(t.currentPage&&!t.modelValue)throw new Error("currentPage/current-page is now deprecated, use v-model instead to set the current page.");if(!t.modelValue)throw new TypeError("v-model is required for the paginate component.");const i=Ch(t,"modelValue"),s=M=>{M!==i.value&&(M>a.value||M<1||t.disablePagination||(e("update:modelValue",M),t.onClick(M)))},r=M=>{switch(t.locale){case"en":return M;case"ar":return M.toLocaleString("ar-SA");case"ir":return M.toLocaleString("fa-IR");default:return M}},l=M=>t.type!=="link"?"":t.linkUrl.replace("[page]",M.toString()),a=Yt(()=>Math.ceil(t.totalItems/t.itemsPerPage)),h=Yt(()=>{let M,k;if(a.value<=t.maxPagesShown)M=1,k=a.value;else{let F=Math.floor(t.maxPagesShown/2),A=Math.ceil(t.maxPagesShown/2)-1;i.value<=F?(M=1,k=t.maxPagesShown):i.value+A>=a.value?(M=a.value-t.maxPagesShown+1,k=a.value):(M=i.value-F,k=i.value+A)}let P=Array.from(Array(k+1-M).keys()).map(F=>M+F);return t.dir==="rtl"&&(P=P.reverse()),{totalItems:t.totalItems,currentPage:i.value,itemsPerPage:t.itemsPerPage,totalPages:a,startPage:M,endPage:k,pages:P}}),u=Yt(()=>t.dir==="rtl"),f=Yt(()=>u.value?!t.hidePrevNextWhenEnds||i.value!==a.value:!t.hidePrevNextWhenEnds||i.value!==1),_=Yt(()=>u.value?!t.hidePrevNextWhenEnds||i.value!==1:!t.hidePrevNextWhenEnds||i.value!==a.value),p=Yt(()=>u.value?h.value.pages[0]<a.value-1:h.value.pages[0]>=3),x=Yt(()=>u.value?h.value.pages[h.value.pages.length-1]>=3:h.value.pages[h.value.pages.length-1]<a.value-1),w=Yt(()=>u.value?h.value.pages[0]<a.value:h.value.pages[0]>=2),C=Yt(()=>u.value?h.value.pages[h.value.pages.length-1]>=2:h.value.pages[h.value.pages.length-1]<a.value),b=Yt(()=>i.value!==1),E=Yt(()=>i.value!==a.value);if(t.type==="link"&&t.linkUrl==="#")throw console.error("linkUrl attribute is required if type attribute is 'link'"),new TypeError("linkUrl attribute is required if type attribute is 'link'");if(t.type==="link"&&!t.linkUrl.includes("[page]"))throw console.error("linkUrl attribute must contain '[page]' substring"),new TypeError("linkUrl attribute must contain '[page]' substring");return(M,k)=>(ve(),Fe("ul",{id:"componentContainer",class:Qe(n.paginationContainerClass)},[n.showEndingButtons&&X(b)?(ve(),Fe("li",cw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(a):1),onClick:k[0]||(k[0]=jt(P=>s(X(u)?X(a):1),["prevent"])),class:Qe([n.firstPageContent,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"first-page-button",{},()=>[$e(ot(n.firstPageContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0),n.showJumpButtons&&X(p)?(ve(),Fe("li",uw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(i)+Math.ceil(n.maxPagesShown/2):X(i)-Math.ceil(n.maxPagesShown/2)),onClick:k[1]||(k[1]=jt(P=>s(X(u)?X(i)+Math.ceil(n.maxPagesShown/2):X(i)-Math.ceil(n.maxPagesShown/2)),["prevent"])),class:Qe([n.backwardJumpButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledBackwardJumpButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"backward-jump-button",{},()=>[$e(ot(n.backwardJumpButtonContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0),!n.hidePrevNext&&X(f)?(ve(),Fe("li",dw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(i)+1:X(i)-1),onClick:k[2]||(k[2]=jt(P=>s(X(u)?X(i)+1:X(i)-1),["prevent"])),class:Qe([n.backButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledBackButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"prev-button",{},()=>[$e(ot(n.prevButtonContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0),n.showBreakpointButtons&&X(w)?(ve(),Fe("li",fw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(a):1),onClick:k[3]||(k[3]=jt(P=>s(X(u)?X(a):1),["prevent"])),class:Qe([n.firstButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledFirstButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[$e(ot(X(u)?r(X(a)):r(1)),1)]),_:1},8,["href","class","disabled"]))])):mt("",!0),n.showBreakpointButtons&&X(p)?(ve(),Fe("li",gw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(n.disableBreakpointButtons?X(i):X(u)?X(i)+Math.ceil(n.maxPagesShown/2):X(i)-Math.ceil(n.maxPagesShown/2)),onClick:k[4]||(k[4]=jt(P=>s(n.disableBreakpointButtons?X(i):X(u)?X(i)+Math.ceil(n.maxPagesShown/2):X(i)-Math.ceil(n.maxPagesShown/2)),["prevent"])),disabled:n.disableBreakpointButtons||n.disablePagination,class:Qe([n.startingBreakpointButtonClass,n.paginateButtonsClass,n.disableBreakpointButtons||n.disablePagination?`${n.disabledPaginateButtonsClass} ${n.disabledBreakPointButtonClass}`:""])},{default:Ue(()=>[yi(M.$slots,"starting-breakpoint-button",{},()=>[$e(ot(n.startingBreakpointContent),1)])]),_:3},8,["href","disabled","class"]))])):mt("",!0),(ve(!0),Fe(nn,null,Ha(X(h).pages,(P,F)=>(ve(),Fe("li",{key:F},[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(P),onClick:jt(()=>s(P),["prevent"]),class:Qe([n.paginateButtonsClass,n.numberButtonsClass,P===X(i)?n.activePageClass:"",n.disablePagination?n.disabledPaginateButtonsClass:""]),disabled:n.disablePagination},{default:Ue(()=>[$e(ot(r(P)),1)]),_:2},1032,["href","onClick","class","disabled"]))]))),128)),n.showBreakpointButtons&&X(x)?(ve(),Fe("li",mw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(n.disableBreakpointButtons?X(i):X(u)?X(i)-Math.ceil(n.maxPagesShown/2):X(i)+Math.ceil(n.maxPagesShown/2)),onClick:k[5]||(k[5]=jt(P=>s(n.disableBreakpointButtons?X(i):X(u)?X(i)-Math.ceil(n.maxPagesShown/2):X(i)+Math.ceil(n.maxPagesShown/2)),["prevent"])),disabled:n.disableBreakpointButtons||n.disablePagination,class:Qe([n.endingBreakPointButtonClass,n.paginateButtonsClass,n.disableBreakpointButtons||n.disablePagination?`${n.disabledPaginateButtonsClass} ${n.disabledBreakPointButtonClass}`:""])},{default:Ue(()=>[yi(M.$slots,"ending-breakpoint-button",{},()=>[$e(ot(n.endingBreakpointButtonContent),1)])]),_:3},8,["href","disabled","class"]))])):mt("",!0),n.showBreakpointButtons&&X(C)?(ve(),Fe("li",_w,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?1:X(a)),onClick:k[6]||(k[6]=jt(P=>s(X(u)?1:X(a)),["prevent"])),class:Qe([n.lastButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledLastButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[$e(ot(X(u)?r(1):r(X(a))),1)]),_:1},8,["href","class","disabled"]))])):mt("",!0),!n.hidePrevNext&&X(_)?(ve(),Fe("li",pw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(i)-1:X(i)+1),onClick:k[7]||(k[7]=jt(P=>s(X(u)?X(i)-1:X(i)+1),["prevent"])),class:Qe([n.paginateButtonsClass,n.nextButtonClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledNextButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"next-button",{},()=>[$e(ot(n.nextButtonContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0),n.showJumpButtons&&X(x)?(ve(),Fe("li",yw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?X(i)-Math.ceil(n.maxPagesShown/2):X(i)+Math.ceil(n.maxPagesShown/2)),onClick:k[8]||(k[8]=jt(P=>s(X(u)?X(i)-Math.ceil(n.maxPagesShown/2):X(i)+Math.ceil(n.maxPagesShown/2)),["prevent"])),class:Qe([n.forwardJumpButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:"",n.disablePagination?n.disabledForwardJumpButtonClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"forward-jump-button",{},()=>[$e(ot(n.forwardJumpButtonContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0),n.showEndingButtons&&X(E)?(ve(),Fe("li",vw,[(ve(),It(Nt(n.type==="button"?"button":"a"),{href:l(X(u)?1:X(a)),onClick:k[9]||(k[9]=jt(P=>s(X(u)?1:X(a)),["prevent"])),class:Qe([n.lastPageButtonClass,n.paginateButtonsClass,n.disablePagination?n.disabledPaginateButtonsClass:""]),disabled:n.disablePagination},{default:Ue(()=>[yi(M.$slots,"last-page-button",{},()=>[$e(ot(n.lastPageContent),1)])]),_:3},8,["href","class","disabled"]))])):mt("",!0)],2))}});var ww={install:n=>{n.component("VueAwesomePaginate",xw)}};wh.defaults.withCredentials=!0;const Ms=yh(J1);Ms.use(ww);Ms.use(sw,{name:"CustomDatePicker"});Ms.use(ar,wh);Ms.use(Zt);Ms.mount("#app")});export default bw();
